{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":29,"index":44},"end":{"line":3,"column":84,"index":99}}],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"../../utils/common/makeDecorator","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":44,"index":198},"end":{"line":6,"column":87,"index":241}}],"key":"ADlJXbIyOEW4nk0acJlULW4CQGg=","exportNames":["*"],"imports":1}},{"name":"../../utils/common/logError","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":39,"index":283},"end":{"line":7,"column":77,"index":321}}],"key":"ppS8SPH2RUpTx/9v8zRc9sQ5LAo=","exportNames":["*"],"imports":1}},{"name":"../../utils/common/invariant","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":40,"index":364},"end":{"line":8,"column":79,"index":403}}],"key":"Ri1v75fiwCPZVoZkMGIO2QkMa+M=","exportNames":["*"],"imports":1}},{"name":"../../QueryDescription","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":32,"index":438},"end":{"line":9,"column":65,"index":471}}],"key":"2GUxlYkzTI0SjDyHJZJU4FL0rF4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  exports.__esModule = true;\n  exports.default = void 0;\n  var _makeDecorator = _interopRequireDefault(require(_dependencyMap[1], \"../../utils/common/makeDecorator\"));\n  var _logError = _interopRequireDefault(require(_dependencyMap[2], \"../../utils/common/logError\"));\n  var _invariant = _interopRequireDefault(require(_dependencyMap[3], \"../../utils/common/invariant\"));\n  var Q = _interopRequireWildcard(require(_dependencyMap[4], \"../../QueryDescription\"));\n  function _getRequireWildcardCache(e) {\n    if (\"function\" != typeof WeakMap) return null;\n    var r = new WeakMap(),\n      t = new WeakMap();\n    return (_getRequireWildcardCache = function _getRequireWildcardCache(e) {\n      return e ? t : r;\n    })(e);\n  }\n  function _interopRequireWildcard(e, r) {\n    if (!r && e && e.__esModule) return e;\n    if (null === e || \"object\" != typeof e && \"function\" != typeof e) return {\n      default: e\n    };\n    var t = _getRequireWildcardCache(r);\n    if (t && t.has(e)) return t.get(e);\n    var n = {\n        __proto__: null\n      },\n      a = Object.defineProperty && Object.getOwnPropertyDescriptor;\n    for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) {\n      var i = a ? Object.getOwnPropertyDescriptor(e, u) : null;\n      i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u];\n    }\n    return n.default = e, t && t.set(e, n), n;\n  }\n  // Defines a model property that queries records that *belong_to* this model\n  // Pass name of the table with desired records. (The model defining a @children property must\n  // have a has_many association defined with this table)\n  //\n  // Example: a Task has_many Comments, so it may define:\n  //   @children('comment') comments: Query<Comment>\n  var children = (0, _makeDecorator.default)(function (childTable) {\n    return function () {\n      return {\n        get: function () {\n          // $FlowFixMe\n          var that = this;\n          // Use cached Query if possible\n          that._childrenQueryCache = that._childrenQueryCache || {};\n          var cachedQuery = that._childrenQueryCache[childTable];\n          if (cachedQuery) {\n            return cachedQuery;\n          }\n\n          // Cache new Query\n          var model = that.asModel;\n          var childCollection = model.collections.get(childTable);\n          var association = model.constructor.associations[childTable];\n          (0, _invariant.default)(association && 'has_many' === association.type, \"@children decorator used for a table that's not has_many\");\n          var query = childCollection.query(Q.where(association.foreignKey, model.id));\n          that._childrenQueryCache[childTable] = query;\n          return query;\n        },\n        set: function () {\n          (0, _logError.default)('Setter called on a @children-marked property');\n        }\n      };\n    };\n  });\n  var _default = exports.default = children;\n});","lineCount":71,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"_interopRequireDefault"],[4,28,3,26],[4,31,3,29,"require"],[4,38,3,36],[4,39,3,36,"_dependencyMap"],[4,53,3,36],[4,104,3,83],[4,105,3,84],[5,2,4,0,"exports"],[5,9,4,7],[5,10,4,8,"__esModule"],[5,20,4,18],[5,23,4,21],[5,27,4,25],[6,2,5,0,"exports"],[6,9,5,7],[6,10,5,8,"default"],[6,17,5,15],[6,20,5,18],[6,25,5,23],[6,26,5,24],[7,2,6,0],[7,6,6,4,"_makeDecorator"],[7,20,6,18],[7,23,6,21,"_interopRequireDefault"],[7,45,6,43],[7,46,6,44,"require"],[7,53,6,51],[7,54,6,51,"_dependencyMap"],[7,68,6,51],[7,107,6,86],[7,108,6,87],[7,109,6,88],[8,2,7,0],[8,6,7,4,"_logError"],[8,15,7,13],[8,18,7,16,"_interopRequireDefault"],[8,40,7,38],[8,41,7,39,"require"],[8,48,7,46],[8,49,7,46,"_dependencyMap"],[8,63,7,46],[8,97,7,76],[8,98,7,77],[8,99,7,78],[9,2,8,0],[9,6,8,4,"_invariant"],[9,16,8,14],[9,19,8,17,"_interopRequireDefault"],[9,41,8,39],[9,42,8,40,"require"],[9,49,8,47],[9,50,8,47,"_dependencyMap"],[9,64,8,47],[9,99,8,78],[9,100,8,79],[9,101,8,80],[10,2,9,0],[10,6,9,4,"Q"],[10,7,9,5],[10,10,9,8,"_interopRequireWildcard"],[10,33,9,31],[10,34,9,32,"require"],[10,41,9,39],[10,42,9,39,"_dependencyMap"],[10,56,9,39],[10,85,9,64],[10,86,9,65],[10,87,9,66],[11,2,10,0],[11,11,10,9,"_getRequireWildcardCache"],[11,35,10,33,"_getRequireWildcardCache"],[11,36,10,34,"e"],[11,37,10,35],[11,39,10,37],[12,4,10,39],[12,8,10,43],[12,18,10,53],[12,22,10,57],[12,29,10,64,"WeakMap"],[12,36,10,71],[12,38,10,73],[12,45,10,80],[12,49,10,84],[13,4,10,86],[13,8,10,90,"r"],[13,9,10,91],[13,12,10,94],[13,16,10,98,"WeakMap"],[13,23,10,105],[13,24,10,106],[13,25,10,107],[14,6,10,109,"t"],[14,7,10,110],[14,10,10,113],[14,14,10,117,"WeakMap"],[14,21,10,124],[14,22,10,125],[14,23,10,126],[15,4,10,128],[15,11,10,135],[15,12,10,136,"_getRequireWildcardCache"],[15,36,10,160],[15,39,10,163],[15,48,10,172,"_getRequireWildcardCache"],[15,72,10,196,"_getRequireWildcardCache"],[15,73,10,197,"e"],[15,74,10,198],[15,76,10,200],[16,6,10,202],[16,13,10,209,"e"],[16,14,10,210],[16,17,10,213,"t"],[16,18,10,214],[16,21,10,217,"r"],[16,22,10,218],[17,4,10,220],[17,5,10,221],[17,7,10,223,"e"],[17,8,10,224],[17,9,10,225],[18,2,10,227],[19,2,11,0],[19,11,11,9,"_interopRequireWildcard"],[19,34,11,32,"_interopRequireWildcard"],[19,35,11,33,"e"],[19,36,11,34],[19,38,11,36,"r"],[19,39,11,37],[19,41,11,39],[20,4,11,41],[20,8,11,45],[20,9,11,46,"r"],[20,10,11,47],[20,14,11,51,"e"],[20,15,11,52],[20,19,11,56,"e"],[20,20,11,57],[20,21,11,58,"__esModule"],[20,31,11,68],[20,33,11,70],[20,40,11,77,"e"],[20,41,11,78],[21,4,11,80],[21,8,11,84],[21,12,11,88],[21,17,11,93,"e"],[21,18,11,94],[21,22,11,98],[21,30,11,106],[21,34,11,110],[21,41,11,117,"e"],[21,42,11,118],[21,46,11,122],[21,56,11,132],[21,60,11,136],[21,67,11,143,"e"],[21,68,11,144],[21,70,11,146],[21,77,11,153],[22,6,11,155,"default"],[22,13,11,162],[22,15,11,164,"e"],[23,4,11,166],[23,5,11,167],[24,4,11,169],[24,8,11,173,"t"],[24,9,11,174],[24,12,11,177,"_getRequireWildcardCache"],[24,36,11,201],[24,37,11,202,"r"],[24,38,11,203],[24,39,11,204],[25,4,11,206],[25,8,11,210,"t"],[25,9,11,211],[25,13,11,215,"t"],[25,14,11,216],[25,15,11,217,"has"],[25,18,11,220],[25,19,11,221,"e"],[25,20,11,222],[25,21,11,223],[25,23,11,225],[25,30,11,232,"t"],[25,31,11,233],[25,32,11,234,"get"],[25,35,11,237],[25,36,11,238,"e"],[25,37,11,239],[25,38,11,240],[26,4,11,242],[26,8,11,246,"n"],[26,9,11,247],[26,12,11,250],[27,8,11,252,"__proto__"],[27,17,11,261],[27,19,11,263],[28,6,11,268],[28,7,11,269],[29,6,11,271,"a"],[29,7,11,272],[29,10,11,275,"Object"],[29,16,11,281],[29,17,11,282,"defineProperty"],[29,31,11,296],[29,35,11,300,"Object"],[29,41,11,306],[29,42,11,307,"getOwnPropertyDescriptor"],[29,66,11,331],[30,4,11,333],[30,9,11,338],[30,13,11,342,"u"],[30,14,11,343],[30,18,11,347,"e"],[30,19,11,348],[30,21,11,350],[30,25,11,354],[30,34,11,363],[30,39,11,368,"u"],[30,40,11,369],[30,44,11,373],[30,45,11,374],[30,46,11,375],[30,47,11,376,"hasOwnProperty"],[30,61,11,390],[30,62,11,391,"call"],[30,66,11,395],[30,67,11,396,"e"],[30,68,11,397],[30,70,11,399,"u"],[30,71,11,400],[30,72,11,401],[30,74,11,403],[31,6,11,405],[31,10,11,409,"i"],[31,11,11,410],[31,14,11,413,"a"],[31,15,11,414],[31,18,11,417,"Object"],[31,24,11,423],[31,25,11,424,"getOwnPropertyDescriptor"],[31,49,11,448],[31,50,11,449,"e"],[31,51,11,450],[31,53,11,452,"u"],[31,54,11,453],[31,55,11,454],[31,58,11,457],[31,62,11,461],[32,6,11,463,"i"],[32,7,11,464],[32,12,11,469,"i"],[32,13,11,470],[32,14,11,471,"get"],[32,17,11,474],[32,21,11,478,"i"],[32,22,11,479],[32,23,11,480,"set"],[32,26,11,483],[32,27,11,484],[32,30,11,487,"Object"],[32,36,11,493],[32,37,11,494,"defineProperty"],[32,51,11,508],[32,52,11,509,"n"],[32,53,11,510],[32,55,11,512,"u"],[32,56,11,513],[32,58,11,515,"i"],[32,59,11,516],[32,60,11,517],[32,63,11,520,"n"],[32,64,11,521],[32,65,11,522,"u"],[32,66,11,523],[32,67,11,524],[32,70,11,527,"e"],[32,71,11,528],[32,72,11,529,"u"],[32,73,11,530],[32,74,11,531],[33,4,11,533],[34,4,11,535],[34,11,11,542,"n"],[34,12,11,543],[34,13,11,544,"default"],[34,20,11,551],[34,23,11,554,"e"],[34,24,11,555],[34,26,11,557,"t"],[34,27,11,558],[34,31,11,562,"t"],[34,32,11,563],[34,33,11,564,"set"],[34,36,11,567],[34,37,11,568,"e"],[34,38,11,569],[34,40,11,571,"n"],[34,41,11,572],[34,42,11,573],[34,44,11,575,"n"],[34,45,11,576],[35,2,11,578],[36,2,12,0],[37,2,13,0],[38,2,14,0],[39,2,15,0],[40,2,16,0],[41,2,17,0],[42,2,18,0],[42,6,18,4,"children"],[42,14,18,12],[42,17,18,15],[42,18,18,16],[42,19,18,17],[42,21,18,19,"_makeDecorator"],[42,35,18,33],[42,36,18,34,"default"],[42,43,18,41],[42,45,18,43],[42,55,18,53,"childTable"],[42,65,18,63],[42,67,18,65],[43,4,19,2],[43,11,19,9],[43,23,19,21],[44,6,20,4],[44,13,20,11],[45,8,21,6,"get"],[45,11,21,9],[45,13,21,11],[45,22,21,11,"get"],[45,23,21,11],[45,25,21,23],[46,10,22,8],[47,10,23,8],[47,14,23,12,"that"],[47,18,23,16],[47,21,23,19],[47,25,23,23],[48,10,24,8],[49,10,25,8,"that"],[49,14,25,12],[49,15,25,13,"_childrenQueryCache"],[49,34,25,32],[49,37,25,35,"that"],[49,41,25,39],[49,42,25,40,"_childrenQueryCache"],[49,61,25,59],[49,65,25,63],[49,66,25,64],[49,67,25,65],[50,10,26,8],[50,14,26,12,"cachedQuery"],[50,25,26,23],[50,28,26,26,"that"],[50,32,26,30],[50,33,26,31,"_childrenQueryCache"],[50,52,26,50],[50,53,26,51,"childTable"],[50,63,26,61],[50,64,26,62],[51,10,27,8],[51,14,27,12,"cachedQuery"],[51,25,27,23],[51,27,27,25],[52,12,28,10],[52,19,28,17,"cachedQuery"],[52,30,28,28],[53,10,29,8],[55,10,31,8],[56,10,32,8],[56,14,32,12,"model"],[56,19,32,17],[56,22,32,20,"that"],[56,26,32,24],[56,27,32,25,"asModel"],[56,34,32,32],[57,10,33,8],[57,14,33,12,"childCollection"],[57,29,33,27],[57,32,33,30,"model"],[57,37,33,35],[57,38,33,36,"collections"],[57,49,33,47],[57,50,33,48,"get"],[57,53,33,51],[57,54,33,52,"childTable"],[57,64,33,62],[57,65,33,63],[58,10,34,8],[58,14,34,12,"association"],[58,25,34,23],[58,28,34,26,"model"],[58,33,34,31],[58,34,34,32,"constructor"],[58,45,34,43],[58,46,34,44,"associations"],[58,58,34,56],[58,59,34,57,"childTable"],[58,69,34,67],[58,70,34,68],[59,10,35,8],[59,11,35,9],[59,12,35,10],[59,14,35,12,"_invariant"],[59,24,35,22],[59,25,35,23,"default"],[59,32,35,30],[59,34,35,32,"association"],[59,45,35,43],[59,49,35,47],[59,59,35,57],[59,64,35,62,"association"],[59,75,35,73],[59,76,35,74,"type"],[59,80,35,78],[59,82,35,80],[59,140,35,138],[59,141,35,139],[60,10,36,8],[60,14,36,12,"query"],[60,19,36,17],[60,22,36,20,"childCollection"],[60,37,36,35],[60,38,36,36,"query"],[60,43,36,41],[60,44,36,42,"Q"],[60,45,36,43],[60,46,36,44,"where"],[60,51,36,49],[60,52,36,50,"association"],[60,63,36,61],[60,64,36,62,"foreignKey"],[60,74,36,72],[60,76,36,74,"model"],[60,81,36,79],[60,82,36,80,"id"],[60,84,36,82],[60,85,36,83],[60,86,36,84],[61,10,37,8,"that"],[61,14,37,12],[61,15,37,13,"_childrenQueryCache"],[61,34,37,32],[61,35,37,33,"childTable"],[61,45,37,43],[61,46,37,44],[61,49,37,47,"query"],[61,54,37,52],[62,10,38,8],[62,17,38,15,"query"],[62,22,38,20],[63,8,39,6],[63,9,39,7],[64,8,40,6,"set"],[64,11,40,9],[64,13,40,11],[64,22,40,11,"set"],[64,23,40,11],[64,25,40,23],[65,10,41,8],[65,11,41,9],[65,12,41,10],[65,14,41,12,"_logError"],[65,23,41,21],[65,24,41,22,"default"],[65,31,41,29],[65,33,41,31],[65,79,41,77],[65,80,41,78],[66,8,42,6],[67,6,43,4],[67,7,43,5],[68,4,44,2],[68,5,44,3],[69,2,45,0],[69,3,45,1],[69,4,45,2],[70,2,46,0],[70,6,46,4,"_default"],[70,14,46,12],[70,17,46,15,"exports"],[70,24,46,22],[70,25,46,23,"default"],[70,32,46,30],[70,35,46,33,"children"],[70,43,46,41],[71,0,46,42],[71,3]],"functionMap":{"names":["<global>","_getRequireWildcardCache","_interopRequireWildcard","<anonymous>","get","set"],"mappings":"AAA;ACS,oOD;AEC,mkBF;2CGO;WCG;ODkB;WEC;OFE;CHG"},"hasCjsExports":true},"type":"js/module"}]}
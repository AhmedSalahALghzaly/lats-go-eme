{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":29,"index":44},"end":{"line":3,"column":84,"index":99}}],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"../utils/common/invariant","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":40,"index":395},"end":{"line":10,"column":76,"index":431}}],"key":"xXWoRmIvK22fz8BhZzrIVJrZW3I=","exportNames":["*"],"imports":1}},{"name":"../utils/common/logger","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":37,"index":471},"end":{"line":11,"column":70,"index":504}}],"key":"VryVzzhBa1bGcKcurcOH2zeAFWQ=","exportNames":["*"],"imports":1}},{"name":"../RawRecord","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":17,"index":524},"end":{"line":12,"column":40,"index":547}}],"key":"JOpuSzEXK5N8XJGCnvbqx3y7SSE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  exports.__esModule = true;\n  exports.devSetupCallback = devSetupCallback;\n  exports.sanitizeFindResult = sanitizeFindResult;\n  exports.sanitizeQueryResult = sanitizeQueryResult;\n  exports.validateAdapter = validateAdapter;\n  exports.validateTable = validateTable;\n  var _invariant = _interopRequireDefault(require(_dependencyMap[1], \"../utils/common/invariant\"));\n  var _logger = _interopRequireDefault(require(_dependencyMap[2], \"../utils/common/logger\"));\n  var _RawRecord = require(_dependencyMap[3], \"../RawRecord\");\n  // don't import the whole utils/ here!\n  function validateAdapter(adapter) {\n    if ('production' !== process.env.NODE_ENV) {\n      var {\n        schema: schema,\n        migrations: migrations\n      } = adapter;\n      (0, _invariant.default)(schema, \"Missing schema in the adapter\");\n      // TODO: uncomment when full migrations are shipped\n      // invariant(migrations, `Missing migrations`)\n      if (migrations) {\n        (0, _invariant.default)(migrations.validated, \"Invalid migrations - use schemaMigrations() to create migrations. See docs for more details.\");\n        var {\n          minVersion: minVersion,\n          maxVersion: maxVersion\n        } = migrations;\n        (0, _invariant.default)(maxVersion <= schema.version, \"Migrations can't be newer than schema. Schema is version \".concat(schema.version, \" and migrations cover range from \").concat(minVersion, \" to \").concat(maxVersion));\n        (0, _invariant.default)(maxVersion === schema.version, \"Missing migration. Database schema is currently at version \".concat(schema.version, \", but migrations only cover range from \").concat(minVersion, \" to \").concat(maxVersion));\n      }\n    }\n  }\n  function validateTable(tableName, schema) {\n    (0, _invariant.default)(\n    // $FlowFixMe\n    Object.prototype.hasOwnProperty.call(schema.tables, tableName), \"Could not invoke Adapter method because table name '\".concat(tableName, \"' does not exist in the schema. Most likely, it's a sync bug, and you're sending tables that don't exist in the current version of the app. Or, you made a mistake in migrations. Reminder: it's a serious programming error to pass non-whitelisted table names to Adapter.\"));\n  }\n  function sanitizeFindResult(dirtyRecord, tableSchema) {\n    return dirtyRecord && 'object' === typeof dirtyRecord ? (0, _RawRecord.sanitizedRaw)(dirtyRecord, tableSchema) : dirtyRecord;\n  }\n  function sanitizeQueryResult(dirtyRecords, tableSchema) {\n    return dirtyRecords.map(function (dirtyRecord) {\n      return 'string' === typeof dirtyRecord ? dirtyRecord : (0, _RawRecord.sanitizedRaw)(dirtyRecord, tableSchema);\n    });\n  }\n  function devSetupCallback(result, onSetUpError) {\n    if (result.error) {\n      _logger.default.error(\"Uh-oh. Database failed to load, we're in big trouble. This might happen if you didn't set up native code correctly (iOS, Android), or if you didn't recompile native app after WatermelonDB update. It might also mean that IndexedDB or SQLite refused to open.\", result.error);\n      onSetUpError && onSetUpError(result.error);\n    }\n  }\n});","lineCount":54,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"_interopRequireDefault"],[4,28,3,26],[4,31,3,29,"require"],[4,38,3,36],[4,39,3,36,"_dependencyMap"],[4,53,3,36],[4,104,3,83],[4,105,3,84],[5,2,4,0,"exports"],[5,9,4,7],[5,10,4,8,"__esModule"],[5,20,4,18],[5,23,4,21],[5,27,4,25],[6,2,5,0,"exports"],[6,9,5,7],[6,10,5,8,"devSetupCallback"],[6,26,5,24],[6,29,5,27,"devSetupCallback"],[6,45,5,43],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"sanitizeFindResult"],[7,28,6,26],[7,31,6,29,"sanitizeFindResult"],[7,49,6,47],[8,2,7,0,"exports"],[8,9,7,7],[8,10,7,8,"sanitizeQueryResult"],[8,29,7,27],[8,32,7,30,"sanitizeQueryResult"],[8,51,7,49],[9,2,8,0,"exports"],[9,9,8,7],[9,10,8,8,"validateAdapter"],[9,25,8,23],[9,28,8,26,"validateAdapter"],[9,43,8,41],[10,2,9,0,"exports"],[10,9,9,7],[10,10,9,8,"validateTable"],[10,23,9,21],[10,26,9,24,"validateTable"],[10,39,9,37],[11,2,10,0],[11,6,10,4,"_invariant"],[11,16,10,14],[11,19,10,17,"_interopRequireDefault"],[11,41,10,39],[11,42,10,40,"require"],[11,49,10,47],[11,50,10,47,"_dependencyMap"],[11,64,10,47],[11,96,10,75],[11,97,10,76],[11,98,10,77],[12,2,11,0],[12,6,11,4,"_logger"],[12,13,11,11],[12,16,11,14,"_interopRequireDefault"],[12,38,11,36],[12,39,11,37,"require"],[12,46,11,44],[12,47,11,44,"_dependencyMap"],[12,61,11,44],[12,90,11,69],[12,91,11,70],[12,92,11,71],[13,2,12,0],[13,6,12,4,"_RawRecord"],[13,16,12,14],[13,19,12,17,"require"],[13,26,12,24],[13,27,12,24,"_dependencyMap"],[13,41,12,24],[13,60,12,39],[13,61,12,40],[14,2,13,0],[15,2,14,0],[15,11,14,9,"validateAdapter"],[15,26,14,24,"validateAdapter"],[15,27,14,25,"adapter"],[15,34,14,32],[15,36,14,34],[16,4,15,2],[16,8,15,6],[16,20,15,18],[16,25,15,23,"process"],[16,32,15,30],[16,33,15,31,"env"],[16,36,15,34],[16,37,15,35,"NODE_ENV"],[16,45,15,43],[16,47,15,45],[17,6,16,4],[17,10,16,8],[18,8,17,6,"schema"],[18,14,17,12],[18,16,17,14,"schema"],[18,22,17,20],[19,8,18,6,"migrations"],[19,18,18,16],[19,20,18,18,"migrations"],[20,6,19,4],[20,7,19,5],[20,10,19,8,"adapter"],[20,17,19,15],[21,6,20,4],[21,7,20,5],[21,8,20,6],[21,10,20,8,"_invariant"],[21,20,20,18],[21,21,20,19,"default"],[21,28,20,26],[21,30,20,28,"schema"],[21,36,20,34],[21,38,20,36],[21,69,20,67],[21,70,20,68],[22,6,21,4],[23,6,22,4],[24,6,23,4],[24,10,23,8,"migrations"],[24,20,23,18],[24,22,23,20],[25,8,24,6],[25,9,24,7],[25,10,24,8],[25,12,24,10,"_invariant"],[25,22,24,20],[25,23,24,21,"default"],[25,30,24,28],[25,32,24,30,"migrations"],[25,42,24,40],[25,43,24,41,"validated"],[25,52,24,50],[25,54,24,52],[25,148,24,146],[25,149,24,147],[26,8,25,6],[26,12,25,10],[27,10,26,8,"minVersion"],[27,20,26,18],[27,22,26,20,"minVersion"],[27,32,26,30],[28,10,27,8,"maxVersion"],[28,20,27,18],[28,22,27,20,"maxVersion"],[29,8,28,6],[29,9,28,7],[29,12,28,10,"migrations"],[29,22,28,20],[30,8,29,6],[30,9,29,7],[30,10,29,8],[30,12,29,10,"_invariant"],[30,22,29,20],[30,23,29,21,"default"],[30,30,29,28],[30,32,29,30,"maxVersion"],[30,42,29,40],[30,46,29,44,"schema"],[30,52,29,50],[30,53,29,51,"version"],[30,60,29,58],[30,62,29,60],[30,121,29,119],[30,122,29,120,"concat"],[30,128,29,126],[30,129,29,127,"schema"],[30,135,29,133],[30,136,29,134,"version"],[30,143,29,141],[30,145,29,143],[30,180,29,178],[30,181,29,179],[30,182,29,180,"concat"],[30,188,29,186],[30,189,29,187,"minVersion"],[30,199,29,197],[30,201,29,199],[30,207,29,205],[30,208,29,206],[30,209,29,207,"concat"],[30,215,29,213],[30,216,29,214,"maxVersion"],[30,226,29,224],[30,227,29,225],[30,228,29,226],[31,8,30,6],[31,9,30,7],[31,10,30,8],[31,12,30,10,"_invariant"],[31,22,30,20],[31,23,30,21,"default"],[31,30,30,28],[31,32,30,30,"maxVersion"],[31,42,30,40],[31,47,30,45,"schema"],[31,53,30,51],[31,54,30,52,"version"],[31,61,30,59],[31,63,30,61],[31,124,30,122],[31,125,30,123,"concat"],[31,131,30,129],[31,132,30,130,"schema"],[31,138,30,136],[31,139,30,137,"version"],[31,146,30,144],[31,148,30,146],[31,189,30,187],[31,190,30,188],[31,191,30,189,"concat"],[31,197,30,195],[31,198,30,196,"minVersion"],[31,208,30,206],[31,210,30,208],[31,216,30,214],[31,217,30,215],[31,218,30,216,"concat"],[31,224,30,222],[31,225,30,223,"maxVersion"],[31,235,30,233],[31,236,30,234],[31,237,30,235],[32,6,31,4],[33,4,32,2],[34,2,33,0],[35,2,34,0],[35,11,34,9,"validateTable"],[35,24,34,22,"validateTable"],[35,25,34,23,"tableName"],[35,34,34,32],[35,36,34,34,"schema"],[35,42,34,40],[35,44,34,42],[36,4,35,2],[36,5,35,3],[36,6,35,4],[36,8,35,6,"_invariant"],[36,18,35,16],[36,19,35,17,"default"],[36,26,35,24],[37,4,36,2],[38,4,37,2,"Object"],[38,10,37,8],[38,11,37,9,"prototype"],[38,20,37,18],[38,21,37,19,"hasOwnProperty"],[38,35,37,33],[38,36,37,34,"call"],[38,40,37,38],[38,41,37,39,"schema"],[38,47,37,45],[38,48,37,46,"tables"],[38,54,37,52],[38,56,37,54,"tableName"],[38,65,37,63],[38,66,37,64],[38,68,37,66],[38,122,37,120],[38,123,37,121,"concat"],[38,129,37,127],[38,130,37,128,"tableName"],[38,139,37,137],[38,141,37,139],[38,411,37,409],[38,412,37,410],[38,413,37,411],[39,2,38,0],[40,2,39,0],[40,11,39,9,"sanitizeFindResult"],[40,29,39,27,"sanitizeFindResult"],[40,30,39,28,"dirtyRecord"],[40,41,39,39],[40,43,39,41,"tableSchema"],[40,54,39,52],[40,56,39,54],[41,4,40,2],[41,11,40,9,"dirtyRecord"],[41,22,40,20],[41,26,40,24],[41,34,40,32],[41,39,40,37],[41,46,40,44,"dirtyRecord"],[41,57,40,55],[41,60,40,58],[41,61,40,59],[41,62,40,60],[41,64,40,62,"_RawRecord"],[41,74,40,72],[41,75,40,73,"sanitizedRaw"],[41,87,40,85],[41,89,40,87,"dirtyRecord"],[41,100,40,98],[41,102,40,100,"tableSchema"],[41,113,40,111],[41,114,40,112],[41,117,40,115,"dirtyRecord"],[41,128,40,126],[42,2,41,0],[43,2,42,0],[43,11,42,9,"sanitizeQueryResult"],[43,30,42,28,"sanitizeQueryResult"],[43,31,42,29,"dirtyRecords"],[43,43,42,41],[43,45,42,43,"tableSchema"],[43,56,42,54],[43,58,42,56],[44,4,43,2],[44,11,43,9,"dirtyRecords"],[44,23,43,21],[44,24,43,22,"map"],[44,27,43,25],[44,28,43,26],[44,38,43,36,"dirtyRecord"],[44,49,43,47],[44,51,43,49],[45,6,44,4],[45,13,44,11],[45,21,44,19],[45,26,44,24],[45,33,44,31,"dirtyRecord"],[45,44,44,42],[45,47,44,45,"dirtyRecord"],[45,58,44,56],[45,61,44,59],[45,62,44,60],[45,63,44,61],[45,65,44,63,"_RawRecord"],[45,75,44,73],[45,76,44,74,"sanitizedRaw"],[45,88,44,86],[45,90,44,88,"dirtyRecord"],[45,101,44,99],[45,103,44,101,"tableSchema"],[45,114,44,112],[45,115,44,113],[46,4,45,2],[46,5,45,3],[46,6,45,4],[47,2,46,0],[48,2,47,0],[48,11,47,9,"devSetupCallback"],[48,27,47,25,"devSetupCallback"],[48,28,47,26,"result"],[48,34,47,32],[48,36,47,34,"onSetUpError"],[48,48,47,46],[48,50,47,48],[49,4,48,2],[49,8,48,6,"result"],[49,14,48,12],[49,15,48,13,"error"],[49,20,48,18],[49,22,48,20],[50,6,49,4,"_logger"],[50,13,49,11],[50,14,49,12,"default"],[50,21,49,19],[50,22,49,20,"error"],[50,27,49,25],[50,28,49,26],[50,286,49,284],[50,288,49,286,"result"],[50,294,49,292],[50,295,49,293,"error"],[50,300,49,298],[50,301,49,299],[51,6,50,4,"onSetUpError"],[51,18,50,16],[51,22,50,20,"onSetUpError"],[51,34,50,32],[51,35,50,33,"result"],[51,41,50,39],[51,42,50,40,"error"],[51,47,50,45],[51,48,50,46],[52,4,51,2],[53,2,52,0],[54,0,52,1],[54,3]],"functionMap":{"names":["<global>","validateAdapter","validateTable","sanitizeFindResult","sanitizeQueryResult","dirtyRecords.map$argument_0","devSetupCallback"],"mappings":"AAA;ACa;CDmB;AEC;CFI;AGC;CHE;AIC;0BCC;GDE;CJC;AMC"},"hasCjsExports":true},"type":"js/module"}]}
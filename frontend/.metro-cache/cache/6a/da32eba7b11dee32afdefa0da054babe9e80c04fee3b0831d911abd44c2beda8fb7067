{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  exports.__esModule = true;\n  exports.default = cloneMessage;\n  exports.shallowCloneDeepObjects = shallowCloneDeepObjects;\n  // shallow-clones objects (without checking their contents), but copies arrays\n  function shallowCloneDeepObjects(value) {\n    if (Array.isArray(value)) {\n      var returned = new Array(value.length);\n      for (var i = 0, len = value.length; i < len; i += 1) {\n        returned[i] = shallowCloneDeepObjects(value[i]);\n      }\n      return returned;\n    } else if (value && 'object' === typeof value) {\n      return Object.assign({}, value);\n    }\n    return value;\n  }\n  function cloneMessage(data) {\n    // TODO: Even better, it would be great if we had zero-copy architecture (COW RawRecords?) and we didn't have to clone\n    var method = data.cloneMethod;\n    if ('shallowCloneDeepObjects' === method) {\n      var clonedData = data;\n      clonedData.payload = shallowCloneDeepObjects(clonedData.payload);\n      return clonedData;\n    } else if ('immutable' === method) {\n      // we get a pinky promise that the payload is immutable so we don't need to copy\n      return data;\n    }\n    throw new Error('Unknown data.clone method for cloneMessage');\n  }\n});","lineCount":33,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0,"exports"],[4,9,3,7],[4,10,3,8,"__esModule"],[4,20,3,18],[4,23,3,21],[4,27,3,25],[5,2,4,0,"exports"],[5,9,4,7],[5,10,4,8,"default"],[5,17,4,15],[5,20,4,18,"cloneMessage"],[5,32,4,30],[6,2,5,0,"exports"],[6,9,5,7],[6,10,5,8,"shallowCloneDeepObjects"],[6,33,5,31],[6,36,5,34,"shallowCloneDeepObjects"],[6,59,5,57],[7,2,6,0],[8,2,7,0],[8,11,7,9,"shallowCloneDeepObjects"],[8,34,7,32,"shallowCloneDeepObjects"],[8,35,7,33,"value"],[8,40,7,38],[8,42,7,40],[9,4,8,2],[9,8,8,6,"Array"],[9,13,8,11],[9,14,8,12,"isArray"],[9,21,8,19],[9,22,8,20,"value"],[9,27,8,25],[9,28,8,26],[9,30,8,28],[10,6,9,4],[10,10,9,8,"returned"],[10,18,9,16],[10,21,9,19],[10,25,9,23,"Array"],[10,30,9,28],[10,31,9,29,"value"],[10,36,9,34],[10,37,9,35,"length"],[10,43,9,41],[10,44,9,42],[11,6,10,4],[11,11,10,9],[11,15,10,13,"i"],[11,16,10,14],[11,19,10,17],[11,20,10,18],[11,22,10,20,"len"],[11,25,10,23],[11,28,10,26,"value"],[11,33,10,31],[11,34,10,32,"length"],[11,40,10,38],[11,42,10,40,"i"],[11,43,10,41],[11,46,10,44,"len"],[11,49,10,47],[11,51,10,49,"i"],[11,52,10,50],[11,56,10,54],[11,57,10,55],[11,59,10,57],[12,8,11,6,"returned"],[12,16,11,14],[12,17,11,15,"i"],[12,18,11,16],[12,19,11,17],[12,22,11,20,"shallowCloneDeepObjects"],[12,45,11,43],[12,46,11,44,"value"],[12,51,11,49],[12,52,11,50,"i"],[12,53,11,51],[12,54,11,52],[12,55,11,53],[13,6,12,4],[14,6,13,4],[14,13,13,11,"returned"],[14,21,13,19],[15,4,14,2],[15,5,14,3],[15,11,14,9],[15,15,14,13,"value"],[15,20,14,18],[15,24,14,22],[15,32,14,30],[15,37,14,35],[15,44,14,42,"value"],[15,49,14,47],[15,51,14,49],[16,6,15,4],[16,13,15,11,"Object"],[16,19,15,17],[16,20,15,18,"assign"],[16,26,15,24],[16,27,15,25],[16,28,15,26],[16,29,15,27],[16,31,15,29,"value"],[16,36,15,34],[16,37,15,35],[17,4,16,2],[18,4,17,2],[18,11,17,9,"value"],[18,16,17,14],[19,2,18,0],[20,2,19,0],[20,11,19,9,"cloneMessage"],[20,23,19,21,"cloneMessage"],[20,24,19,22,"data"],[20,28,19,26],[20,30,19,28],[21,4,20,2],[22,4,21,2],[22,8,21,6,"method"],[22,14,21,12],[22,17,21,15,"data"],[22,21,21,19],[22,22,21,20,"cloneMethod"],[22,33,21,31],[23,4,22,2],[23,8,22,6],[23,33,22,31],[23,38,22,36,"method"],[23,44,22,42],[23,46,22,44],[24,6,23,4],[24,10,23,8,"clonedData"],[24,20,23,18],[24,23,23,21,"data"],[24,27,23,25],[25,6,24,4,"clonedData"],[25,16,24,14],[25,17,24,15,"payload"],[25,24,24,22],[25,27,24,25,"shallowCloneDeepObjects"],[25,50,24,48],[25,51,24,49,"clonedData"],[25,61,24,59],[25,62,24,60,"payload"],[25,69,24,67],[25,70,24,68],[26,6,25,4],[26,13,25,11,"clonedData"],[26,23,25,21],[27,4,26,2],[27,5,26,3],[27,11,26,9],[27,15,26,13],[27,26,26,24],[27,31,26,29,"method"],[27,37,26,35],[27,39,26,37],[28,6,27,4],[29,6,28,4],[29,13,28,11,"data"],[29,17,28,15],[30,4,29,2],[31,4,30,2],[31,10,30,8],[31,14,30,12,"Error"],[31,19,30,17],[31,20,30,18],[31,64,30,62],[31,65,30,63],[32,2,31,0],[33,0,31,1],[33,3]],"functionMap":{"names":["<global>","shallowCloneDeepObjects","cloneMessage"],"mappings":"AAA;ACM;CDW;AEC"},"hasCjsExports":true},"type":"js/module"}]}
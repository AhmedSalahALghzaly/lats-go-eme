{"dependencies":[{"name":"../observable/innerFrom","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":18,"index":128},"end":{"line":4,"column":52,"index":162}}],"key":"T4CuDoHB9q4c1mpqb7scn7763KE=","exportNames":["*"],"imports":1}},{"name":"../util/executeSchedule","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":24,"index":188},"end":{"line":5,"column":58,"index":222}}],"key":"Fxw52IEQzCrpMSDADIsV7+EnCEs=","exportNames":["*"],"imports":1}},{"name":"./OperatorSubscriber","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":27,"index":251},"end":{"line":6,"column":58,"index":282}}],"key":"5a4JxA+rxI0MIxewBKZddpWmHrQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.mergeInternals = void 0;\n  var innerFrom_1 = require(_dependencyMap[0], \"../observable/innerFrom\");\n  var executeSchedule_1 = require(_dependencyMap[1], \"../util/executeSchedule\");\n  var OperatorSubscriber_1 = require(_dependencyMap[2], \"./OperatorSubscriber\");\n  function mergeInternals(source, subscriber, project, concurrent, onBeforeNext, expand, innerSubScheduler, additionalFinalizer) {\n    var buffer = [];\n    var active = 0;\n    var index = 0;\n    var isComplete = false;\n    var checkComplete = function () {\n      if (isComplete && !buffer.length && !active) {\n        subscriber.complete();\n      }\n    };\n    var outerNext = function (value) {\n      return active < concurrent ? doInnerSub(value) : buffer.push(value);\n    };\n    var doInnerSub = function (value) {\n      expand && subscriber.next(value);\n      active++;\n      var innerComplete = false;\n      innerFrom_1.innerFrom(project(value, index++)).subscribe(OperatorSubscriber_1.createOperatorSubscriber(subscriber, function (innerValue) {\n        onBeforeNext === null || onBeforeNext === void 0 ? void 0 : onBeforeNext(innerValue);\n        if (expand) {\n          outerNext(innerValue);\n        } else {\n          subscriber.next(innerValue);\n        }\n      }, function () {\n        innerComplete = true;\n      }, undefined, function () {\n        if (innerComplete) {\n          try {\n            active--;\n            var _loop_1 = function () {\n              var bufferedValue = buffer.shift();\n              if (innerSubScheduler) {\n                executeSchedule_1.executeSchedule(subscriber, innerSubScheduler, function () {\n                  return doInnerSub(bufferedValue);\n                });\n              } else {\n                doInnerSub(bufferedValue);\n              }\n            };\n            while (buffer.length && active < concurrent) {\n              _loop_1();\n            }\n            checkComplete();\n          } catch (err) {\n            subscriber.error(err);\n          }\n        }\n      }));\n    };\n    source.subscribe(OperatorSubscriber_1.createOperatorSubscriber(subscriber, outerNext, function () {\n      isComplete = true;\n      checkComplete();\n    }));\n    return function () {\n      additionalFinalizer === null || additionalFinalizer === void 0 ? void 0 : additionalFinalizer();\n    };\n  }\n  exports.mergeInternals = mergeInternals;\n});","lineCount":70,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"mergeInternals"],[7,24,3,22],[7,27,3,25],[7,32,3,30],[7,33,3,31],[8,2,4,0],[8,6,4,4,"innerFrom_1"],[8,17,4,15],[8,20,4,18,"require"],[8,27,4,25],[8,28,4,25,"_dependencyMap"],[8,42,4,25],[8,72,4,51],[8,73,4,52],[9,2,5,0],[9,6,5,4,"executeSchedule_1"],[9,23,5,21],[9,26,5,24,"require"],[9,33,5,31],[9,34,5,31,"_dependencyMap"],[9,48,5,31],[9,78,5,57],[9,79,5,58],[10,2,6,0],[10,6,6,4,"OperatorSubscriber_1"],[10,26,6,24],[10,29,6,27,"require"],[10,36,6,34],[10,37,6,34,"_dependencyMap"],[10,51,6,34],[10,78,6,57],[10,79,6,58],[11,2,7,0],[11,11,7,9,"mergeInternals"],[11,25,7,23,"mergeInternals"],[11,26,7,24,"source"],[11,32,7,30],[11,34,7,32,"subscriber"],[11,44,7,42],[11,46,7,44,"project"],[11,53,7,51],[11,55,7,53,"concurrent"],[11,65,7,63],[11,67,7,65,"onBeforeNext"],[11,79,7,77],[11,81,7,79,"expand"],[11,87,7,85],[11,89,7,87,"innerSubScheduler"],[11,106,7,104],[11,108,7,106,"additionalFinalizer"],[11,127,7,125],[11,129,7,127],[12,4,8,4],[12,8,8,8,"buffer"],[12,14,8,14],[12,17,8,17],[12,19,8,19],[13,4,9,4],[13,8,9,8,"active"],[13,14,9,14],[13,17,9,17],[13,18,9,18],[14,4,10,4],[14,8,10,8,"index"],[14,13,10,13],[14,16,10,16],[14,17,10,17],[15,4,11,4],[15,8,11,8,"isComplete"],[15,18,11,18],[15,21,11,21],[15,26,11,26],[16,4,12,4],[16,8,12,8,"checkComplete"],[16,21,12,21],[16,24,12,24],[16,33,12,24,"checkComplete"],[16,34,12,24],[16,36,12,36],[17,6,13,8],[17,10,13,12,"isComplete"],[17,20,13,22],[17,24,13,26],[17,25,13,27,"buffer"],[17,31,13,33],[17,32,13,34,"length"],[17,38,13,40],[17,42,13,44],[17,43,13,45,"active"],[17,49,13,51],[17,51,13,53],[18,8,14,12,"subscriber"],[18,18,14,22],[18,19,14,23,"complete"],[18,27,14,31],[18,28,14,32],[18,29,14,33],[19,6,15,8],[20,4,16,4],[20,5,16,5],[21,4,17,4],[21,8,17,8,"outerNext"],[21,17,17,17],[21,20,17,20],[21,29,17,20,"outerNext"],[21,30,17,30,"value"],[21,35,17,35],[21,37,17,37],[22,6,17,39],[22,13,17,47,"active"],[22,19,17,53],[22,22,17,56,"concurrent"],[22,32,17,66],[22,35,17,69,"doInnerSub"],[22,45,17,79],[22,46,17,80,"value"],[22,51,17,85],[22,52,17,86],[22,55,17,89,"buffer"],[22,61,17,95],[22,62,17,96,"push"],[22,66,17,100],[22,67,17,101,"value"],[22,72,17,106],[22,73,17,107],[23,4,17,110],[23,5,17,111],[24,4,18,4],[24,8,18,8,"doInnerSub"],[24,18,18,18],[24,21,18,21],[24,30,18,21,"doInnerSub"],[24,31,18,31,"value"],[24,36,18,36],[24,38,18,38],[25,6,19,8,"expand"],[25,12,19,14],[25,16,19,18,"subscriber"],[25,26,19,28],[25,27,19,29,"next"],[25,31,19,33],[25,32,19,34,"value"],[25,37,19,39],[25,38,19,40],[26,6,20,8,"active"],[26,12,20,14],[26,14,20,16],[27,6,21,8],[27,10,21,12,"innerComplete"],[27,23,21,25],[27,26,21,28],[27,31,21,33],[28,6,22,8,"innerFrom_1"],[28,17,22,19],[28,18,22,20,"innerFrom"],[28,27,22,29],[28,28,22,30,"project"],[28,35,22,37],[28,36,22,38,"value"],[28,41,22,43],[28,43,22,45,"index"],[28,48,22,50],[28,50,22,52],[28,51,22,53],[28,52,22,54],[28,53,22,55,"subscribe"],[28,62,22,64],[28,63,22,65,"OperatorSubscriber_1"],[28,83,22,85],[28,84,22,86,"createOperatorSubscriber"],[28,108,22,110],[28,109,22,111,"subscriber"],[28,119,22,121],[28,121,22,123],[28,131,22,133,"innerValue"],[28,141,22,143],[28,143,22,145],[29,8,23,12,"onBeforeNext"],[29,20,23,24],[29,25,23,29],[29,29,23,33],[29,33,23,37,"onBeforeNext"],[29,45,23,49],[29,50,23,54],[29,55,23,59],[29,56,23,60],[29,59,23,63],[29,64,23,68],[29,65,23,69],[29,68,23,72,"onBeforeNext"],[29,80,23,84],[29,81,23,85,"innerValue"],[29,91,23,95],[29,92,23,96],[30,8,24,12],[30,12,24,16,"expand"],[30,18,24,22],[30,20,24,24],[31,10,25,16,"outerNext"],[31,19,25,25],[31,20,25,26,"innerValue"],[31,30,25,36],[31,31,25,37],[32,8,26,12],[32,9,26,13],[32,15,27,17],[33,10,28,16,"subscriber"],[33,20,28,26],[33,21,28,27,"next"],[33,25,28,31],[33,26,28,32,"innerValue"],[33,36,28,42],[33,37,28,43],[34,8,29,12],[35,6,30,8],[35,7,30,9],[35,9,30,11],[35,21,30,23],[36,8,31,12,"innerComplete"],[36,21,31,25],[36,24,31,28],[36,28,31,32],[37,6,32,8],[37,7,32,9],[37,9,32,11,"undefined"],[37,18,32,20],[37,20,32,22],[37,32,32,34],[38,8,33,12],[38,12,33,16,"innerComplete"],[38,25,33,29],[38,27,33,31],[39,10,34,16],[39,14,34,20],[40,12,35,20,"active"],[40,18,35,26],[40,20,35,28],[41,12,36,20],[41,16,36,24,"_loop_1"],[41,23,36,31],[41,26,36,34],[41,35,36,34,"_loop_1"],[41,36,36,34],[41,38,36,46],[42,14,37,24],[42,18,37,28,"bufferedValue"],[42,31,37,41],[42,34,37,44,"buffer"],[42,40,37,50],[42,41,37,51,"shift"],[42,46,37,56],[42,47,37,57],[42,48,37,58],[43,14,38,24],[43,18,38,28,"innerSubScheduler"],[43,35,38,45],[43,37,38,47],[44,16,39,28,"executeSchedule_1"],[44,33,39,45],[44,34,39,46,"executeSchedule"],[44,49,39,61],[44,50,39,62,"subscriber"],[44,60,39,72],[44,62,39,74,"innerSubScheduler"],[44,79,39,91],[44,81,39,93],[44,93,39,105],[45,18,39,107],[45,25,39,114,"doInnerSub"],[45,35,39,124],[45,36,39,125,"bufferedValue"],[45,49,39,138],[45,50,39,139],[46,16,39,141],[46,17,39,142],[46,18,39,143],[47,14,40,24],[47,15,40,25],[47,21,41,29],[48,16,42,28,"doInnerSub"],[48,26,42,38],[48,27,42,39,"bufferedValue"],[48,40,42,52],[48,41,42,53],[49,14,43,24],[50,12,44,20],[50,13,44,21],[51,12,45,20],[51,19,45,27,"buffer"],[51,25,45,33],[51,26,45,34,"length"],[51,32,45,40],[51,36,45,44,"active"],[51,42,45,50],[51,45,45,53,"concurrent"],[51,55,45,63],[51,57,45,65],[52,14,46,24,"_loop_1"],[52,21,46,31],[52,22,46,32],[52,23,46,33],[53,12,47,20],[54,12,48,20,"checkComplete"],[54,25,48,33],[54,26,48,34],[54,27,48,35],[55,10,49,16],[55,11,49,17],[55,12,50,16],[55,19,50,23,"err"],[55,22,50,26],[55,24,50,28],[56,12,51,20,"subscriber"],[56,22,51,30],[56,23,51,31,"error"],[56,28,51,36],[56,29,51,37,"err"],[56,32,51,40],[56,33,51,41],[57,10,52,16],[58,8,53,12],[59,6,54,8],[59,7,54,9],[59,8,54,10],[59,9,54,11],[60,4,55,4],[60,5,55,5],[61,4,56,4,"source"],[61,10,56,10],[61,11,56,11,"subscribe"],[61,20,56,20],[61,21,56,21,"OperatorSubscriber_1"],[61,41,56,41],[61,42,56,42,"createOperatorSubscriber"],[61,66,56,66],[61,67,56,67,"subscriber"],[61,77,56,77],[61,79,56,79,"outerNext"],[61,88,56,88],[61,90,56,90],[61,102,56,102],[62,6,57,8,"isComplete"],[62,16,57,18],[62,19,57,21],[62,23,57,25],[63,6,58,8,"checkComplete"],[63,19,58,21],[63,20,58,22],[63,21,58,23],[64,4,59,4],[64,5,59,5],[64,6,59,6],[64,7,59,7],[65,4,60,4],[65,11,60,11],[65,23,60,23],[66,6,61,8,"additionalFinalizer"],[66,25,61,27],[66,30,61,32],[66,34,61,36],[66,38,61,40,"additionalFinalizer"],[66,57,61,59],[66,62,61,64],[66,67,61,69],[66,68,61,70],[66,71,61,73],[66,76,61,78],[66,77,61,79],[66,80,61,82,"additionalFinalizer"],[66,99,61,101],[66,100,61,102],[66,101,61,103],[67,4,62,4],[67,5,62,5],[68,2,63,0],[69,2,64,0,"exports"],[69,9,64,7],[69,10,64,8,"mergeInternals"],[69,24,64,22],[69,27,64,25,"mergeInternals"],[69,41,64,39],[70,0,64,40],[70,3]],"functionMap":{"names":["<global>","mergeInternals","checkComplete","outerNext","doInnerSub","OperatorSubscriber_1.createOperatorSubscriber$argument_1","OperatorSubscriber_1.createOperatorSubscriber$argument_2","OperatorSubscriber_1.createOperatorSubscriber$argument_4","_loop_1","executeSchedule_1.executeSchedule$argument_2","<anonymous>"],"mappings":"AAA;ACM;wBCK;KDI;oBEC,2FF;qBGC;2HCI;SDQ,EE;SFE,aG;kCCI;6FCG,iDD;qBDK;SHU;KHC;0FKC;KLG;WSC;KTE;CDC"},"hasCjsExports":true},"type":"js/module"}]}
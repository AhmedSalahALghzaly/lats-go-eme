{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":29,"index":44},"end":{"line":3,"column":84,"index":99}}],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":43,"index":197},"end":{"line":6,"column":88,"index":242}}],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"../utils/rx","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":10,"index":255},"end":{"line":7,"column":32,"index":277}}],"key":"2oOBH1aE6YTKEiT6FZF66xklTf0=","exportNames":["*"],"imports":1}},{"name":"../utils/common/invariant","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":40,"index":319},"end":{"line":8,"column":76,"index":355}}],"key":"xXWoRmIvK22fz8BhZzrIVJrZW3I=","exportNames":["*"],"imports":1}},{"name":"../utils/fp","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":10,"index":368},"end":{"line":9,"column":32,"index":390}}],"key":"Os81Ccxalxupyf/VkhR1IpRqztc=","exportNames":["*"],"imports":1}},{"name":"../utils/fp/Result","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":14,"index":406},"end":{"line":10,"column":43,"index":435}}],"key":"fD8F4EwsxZNN2bpE/It6Rlggpw4=","exportNames":["*"],"imports":1}},{"name":"../Query","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":36,"index":473},"end":{"line":11,"column":55,"index":492}}],"key":"x4LHQlMeeITvOEZSDVfCTpUapiU=","exportNames":["*"],"imports":1}},{"name":"./RecordCache","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":42,"index":537},"end":{"line":12,"column":66,"index":561}}],"key":"tYJItHUUEYbhhT5J7wViC3lllCA=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  exports.__esModule = true;\n  exports.default = void 0;\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\"));\n  var _rx = require(_dependencyMap[2], \"../utils/rx\");\n  var _invariant = _interopRequireDefault(require(_dependencyMap[3], \"../utils/common/invariant\"));\n  var _fp = require(_dependencyMap[4], \"../utils/fp\");\n  var _Result = require(_dependencyMap[5], \"../utils/fp/Result\");\n  var _Query = _interopRequireDefault(require(_dependencyMap[6], \"../Query\"));\n  var _RecordCache = _interopRequireDefault(require(_dependencyMap[7], \"./RecordCache\"));\n  var Collection = exports.default = /*#__PURE__*/function () {\n    /**\n     * `Model` subclass associated with this Collection\n     */\n\n    /**\n     * An `Rx.Subject` that emits a signal on every change (record creation/update/deletion) in\n     * this Collection.\n     *\n     * The emissions contain information about which record was changed and what the change was.\n     *\n     * Warning: You can easily introduce performance bugs in your application by using this method\n     * inappropriately. You generally should just use the `Query` API.\n     */\n\n    function Collection(database, ModelClass) {\n      var _this = this;\n      this.changes = new _rx.Subject();\n      this._subscribers = [];\n      this.database = database;\n      this.modelClass = ModelClass;\n      this._cache = new _RecordCache.default(ModelClass.table, function (raw) {\n        return new ModelClass(_this, raw);\n      }, this);\n    }\n\n    /**\n     * `Database` associated with this Collection.\n     */\n    var _proto = Collection.prototype;\n    /**\n     * Fetches the record with the given ID.\n     *\n     * If the record is not found, the Promise will reject.\n     */\n    _proto.find = function (id) {\n      return new Promise(function ($return) {\n        var _this2 = this;\n        return $return((0, _Result.toPromise)(function (callback) {\n          return _this2._fetchRecord(id, callback);\n        }));\n      }.bind(this));\n    }\n\n    /**\n     * Fetches the given record and then starts observing it.\n     *\n     * This is a convenience method that's equivalent to\n     * `collection.find(id)`, followed by `record.observe()`.\n     */;\n    _proto.findAndObserve = function (id) {\n      var _this3 = this;\n      return _rx.Observable.create(function (observer) {\n        var unsubscribe = null;\n        var unsubscribed = false;\n        _this3._fetchRecord(id, function (result) {\n          if (result.value) {\n            var record = result.value;\n            observer.next(record);\n            unsubscribe = record.experimentalSubscribe(function (isDeleted) {\n              if (!unsubscribed) {\n                isDeleted ? observer.complete() : observer.next(record);\n              }\n            });\n          } else {\n            // $FlowFixMe\n            observer.error(result.error);\n          }\n        });\n        return function () {\n          unsubscribed = true;\n          unsubscribe && unsubscribe();\n        };\n      });\n    }\n\n    /*:: query: ArrayOrSpreadFn<Clause, Query<Record>>  */\n    /**\n     * Returns a `Query` with conditions given.\n     *\n     * You can pass conditions as multiple arguments or a single array.\n     *\n     * See docs for details about the Query API.\n     */\n    // $FlowFixMe\n    ;\n    _proto.query = function (...args) {\n      var clauses = (0, _fp.fromArrayOrSpread)(args, 'Collection.query', 'Clause');\n      return new _Query.default(this, clauses);\n    }\n\n    /**\n     * Creates a new record.\n     * Pass a function to set attributes of the new record.\n     *\n     * Note: This method must be called within a Writer {@link Database#write}.\n     *\n     * @example\n     * ```js\n     * db.get(Tables.tasks).create(task => {\n     *   task.name = 'Task name'\n     * })\n     * ```\n     */;\n    _proto.create = function (recordBuilder = _fp.noop) {\n      return new Promise(function ($return, $error) {\n        var record;\n        this.database._ensureInWriter(\"Collection.create()\");\n        record = this.prepareCreate(recordBuilder);\n        return Promise.resolve(this.database.batch(record)).then(function () {\n          try {\n            return $return(record);\n          } catch ($boundEx) {\n            return $error($boundEx);\n          }\n        }, $error);\n      }.bind(this));\n    }\n\n    /**\n     * Prepares a new record to be created\n     *\n     * Use this to batch-execute multiple changes at once.\n     * @see {Collection#create}\n     * @see {Database#batch}\n     */;\n    _proto.prepareCreate = function (recordBuilder = _fp.noop) {\n      // $FlowFixMe\n      return this.modelClass._prepareCreate(this, recordBuilder);\n    }\n\n    /**\n     * Prepares a new record to be created, based on a raw object.\n     *\n     * Don't use this unless you know how RawRecords work in WatermelonDB. See docs for more details.\n     *\n     * This is useful as a performance optimization, when adding online-only features to an otherwise\n     * offline-first app, or if you're implementing your own sync mechanism.\n     */;\n    _proto.prepareCreateFromDirtyRaw = function (dirtyRaw) {\n      // $FlowFixMe\n      return this.modelClass._prepareCreateFromDirtyRaw(this, dirtyRaw);\n    }\n\n    /**\n     * Returns a disposable record, based on a raw object.\n     *\n     * A disposable record is a read-only record that **does not** exist in the actual database. It's\n     * not cached and cannot be saved in the database, updated, deleted, queried, or found by ID. It\n     * only exists for as long as you keep a reference to it.\n     *\n     * Don't use this unless you know how RawRecords work in WatermelonDB. See docs for more details.\n     *\n     * This is useful for adding online-only features to an otherwise offline-first app, or for\n     * temporary objects that are not meant to be persisted (as you can reuse existing Model helpers\n     * and compatible UI components to display a disposable record).\n     */;\n    _proto.disposableFromDirtyRaw = function (dirtyRaw) {\n      // $FlowFixMe\n      return this.modelClass._disposableFromDirtyRaw(this, dirtyRaw);\n    }\n\n    // *** Implementation details ***\n\n    // See: Query.fetch\n    ;\n    _proto._fetchQuery = function (query, callback) {\n      var _this4 = this;\n      this.database.adapter.underlyingAdapter.query(query.serialize(), function (result) {\n        return callback((0, _Result.mapValue)(function (rawRecords) {\n          return _this4._cache.recordsFromQueryResult(rawRecords);\n        }, result));\n      });\n    };\n    _proto._fetchIds = function (query, callback) {\n      this.database.adapter.underlyingAdapter.queryIds(query.serialize(), callback);\n    };\n    _proto._fetchCount = function (query, callback) {\n      this.database.adapter.underlyingAdapter.count(query.serialize(), callback);\n    };\n    _proto._unsafeFetchRaw = function (query, callback) {\n      this.database.adapter.underlyingAdapter.unsafeQueryRaw(query.serialize(), callback);\n    }\n\n    // Fetches exactly one record (See: Collection.find)\n    ;\n    _proto._fetchRecord = function (id, callback) {\n      var _this5 = this;\n      if ('string' !== typeof id) {\n        callback({\n          error: new Error(\"Invalid record ID \".concat(this.table, \"#\").concat(id))\n        });\n        return;\n      }\n      var cachedRecord = this._cache.get(id);\n      if (cachedRecord) {\n        callback({\n          value: cachedRecord\n        });\n        return;\n      }\n      this.database.adapter.underlyingAdapter.find(this.table, id, function (result) {\n        return callback((0, _Result.mapValue)(function (rawRecord) {\n          (0, _invariant.default)(rawRecord, \"Record \".concat(_this5.table, \"#\").concat(id, \" not found\"));\n          return _this5._cache.recordFromQueryResult(rawRecord);\n        }, result));\n      });\n    };\n    _proto._applyChangesToCache = function (operations) {\n      var _this6 = this;\n      operations.forEach(function ({\n        record: record,\n        type: type\n      }) {\n        if ('created' === type) {\n          record._preparedState = null;\n          _this6._cache.add(record);\n        } else if ('destroyed' === type) {\n          _this6._cache.delete(record);\n        }\n      });\n    };\n    _proto._notify = function (operations) {\n      this._subscribers.forEach(function ([subscriber]) {\n        subscriber(operations);\n      });\n      this.changes.next(operations);\n      operations.forEach(function ({\n        record: record,\n        type: type\n      }) {\n        if ('updated' === type) {\n          record._notifyChanged();\n        } else if ('destroyed' === type) {\n          record._notifyDestroyed();\n        }\n      });\n    };\n    /**\n     * Notifies `subscriber` on every change (record creation/update/deletion) in this Collection.\n     *\n     * Notifications contain information about which record was changed and what the change was.\n     * (Currently, subscribers are called before `changes` emissions, but this behavior might change)\n     *\n     * Warning: You can easily introduce performance bugs in your application by using this method\n     * inappropriately. You generally should just use the `Query` API.\n     */\n    _proto.experimentalSubscribe = function (subscriber, debugInfo) {\n      var _this7 = this;\n      var entry = [subscriber, debugInfo];\n      this._subscribers.push(entry);\n      return function () {\n        var idx = _this7._subscribers.indexOf(entry);\n        -1 !== idx && _this7._subscribers.splice(idx, 1);\n      };\n    };\n    return (0, _createClass2.default)(Collection, [{\n      key: \"db\",\n      get: function get() {\n        return this.database;\n      }\n\n      /**\n       * Table name associated with this Collection\n       */\n    }, {\n      key: \"table\",\n      get: function get() {\n        // $FlowFixMe\n        return this.modelClass.table;\n      }\n\n      /**\n       * Table schema associated with this Collection\n       */\n    }, {\n      key: \"schema\",\n      get: function get() {\n        return this.database.schema.tables[this.table];\n      }\n    }]);\n  }();\n});","lineCount":296,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"_interopRequireDefault"],[4,28,3,26],[4,31,3,29,"require"],[4,38,3,36],[4,39,3,36,"_dependencyMap"],[4,53,3,36],[4,104,3,83],[4,105,3,84],[5,2,4,0,"exports"],[5,9,4,7],[5,10,4,8,"__esModule"],[5,20,4,18],[5,23,4,21],[5,27,4,25],[6,2,5,0,"exports"],[6,9,5,7],[6,10,5,8,"default"],[6,17,5,15],[6,20,5,18],[6,25,5,23],[6,26,5,24],[7,2,6,0],[7,6,6,4,"_createClass2"],[7,19,6,17],[7,22,6,20,"_interopRequireDefault"],[7,44,6,42],[7,45,6,43,"require"],[7,52,6,50],[7,53,6,50,"_dependencyMap"],[7,67,6,50],[7,108,6,87],[7,109,6,88],[7,110,6,89],[8,2,7,0],[8,6,7,4,"_rx"],[8,9,7,7],[8,12,7,10,"require"],[8,19,7,17],[8,20,7,17,"_dependencyMap"],[8,34,7,17],[8,52,7,31],[8,53,7,32],[9,2,8,0],[9,6,8,4,"_invariant"],[9,16,8,14],[9,19,8,17,"_interopRequireDefault"],[9,41,8,39],[9,42,8,40,"require"],[9,49,8,47],[9,50,8,47,"_dependencyMap"],[9,64,8,47],[9,96,8,75],[9,97,8,76],[9,98,8,77],[10,2,9,0],[10,6,9,4,"_fp"],[10,9,9,7],[10,12,9,10,"require"],[10,19,9,17],[10,20,9,17,"_dependencyMap"],[10,34,9,17],[10,52,9,31],[10,53,9,32],[11,2,10,0],[11,6,10,4,"_Result"],[11,13,10,11],[11,16,10,14,"require"],[11,23,10,21],[11,24,10,21,"_dependencyMap"],[11,38,10,21],[11,63,10,42],[11,64,10,43],[12,2,11,0],[12,6,11,4,"_Query"],[12,12,11,10],[12,15,11,13,"_interopRequireDefault"],[12,37,11,35],[12,38,11,36,"require"],[12,45,11,43],[12,46,11,43,"_dependencyMap"],[12,60,11,43],[12,75,11,54],[12,76,11,55],[12,77,11,56],[13,2,12,0],[13,6,12,4,"_RecordCache"],[13,18,12,16],[13,21,12,19,"_interopRequireDefault"],[13,43,12,41],[13,44,12,42,"require"],[13,51,12,49],[13,52,12,49,"_dependencyMap"],[13,66,12,49],[13,86,12,65],[13,87,12,66],[13,88,12,67],[14,2,13,0],[14,6,13,4,"Collection"],[14,16,13,14],[14,19,13,17,"exports"],[14,26,13,24],[14,27,13,25,"default"],[14,34,13,32],[14,37,13,35],[14,50,13,48],[14,62,13,60],[15,4,14,2],[16,0,15,0],[17,0,16,0],[19,4,18,2],[20,0,19,0],[21,0,20,0],[22,0,21,0],[23,0,22,0],[24,0,23,0],[25,0,24,0],[26,0,25,0],[27,0,26,0],[29,4,28,2],[29,13,28,11,"Collection"],[29,23,28,21,"Collection"],[29,24,28,22,"database"],[29,32,28,30],[29,34,28,32,"ModelClass"],[29,44,28,42],[29,46,28,44],[30,6,29,4],[30,10,29,8,"_this"],[30,15,29,13],[30,18,29,16],[30,22,29,20],[31,6,30,4],[31,10,30,8],[31,11,30,9,"changes"],[31,18,30,16],[31,21,30,19],[31,25,30,23,"_rx"],[31,28,30,26],[31,29,30,27,"Subject"],[31,36,30,34],[31,37,30,35],[31,38,30,36],[32,6,31,4],[32,10,31,8],[32,11,31,9,"_subscribers"],[32,23,31,21],[32,26,31,24],[32,28,31,26],[33,6,32,4],[33,10,32,8],[33,11,32,9,"database"],[33,19,32,17],[33,22,32,20,"database"],[33,30,32,28],[34,6,33,4],[34,10,33,8],[34,11,33,9,"modelClass"],[34,21,33,19],[34,24,33,22,"ModelClass"],[34,34,33,32],[35,6,34,4],[35,10,34,8],[35,11,34,9,"_cache"],[35,17,34,15],[35,20,34,18],[35,24,34,22,"_RecordCache"],[35,36,34,34],[35,37,34,35,"default"],[35,44,34,42],[35,45,34,43,"ModelClass"],[35,55,34,53],[35,56,34,54,"table"],[35,61,34,59],[35,63,34,61],[35,73,34,71,"raw"],[35,76,34,74],[35,78,34,76],[36,8,35,6],[36,15,35,13],[36,19,35,17,"ModelClass"],[36,29,35,27],[36,30,35,28,"_this"],[36,35,35,33],[36,37,35,35,"raw"],[36,40,35,38],[36,41,35,39],[37,6,36,4],[37,7,36,5],[37,9,36,7],[37,13,36,11],[37,14,36,12],[38,4,37,2],[40,4,39,2],[41,0,40,0],[42,0,41,0],[43,4,42,2],[43,8,42,6,"_proto"],[43,14,42,12],[43,17,42,15,"Collection"],[43,27,42,25],[43,28,42,26,"prototype"],[43,37,42,35],[44,4,43,2],[45,0,44,0],[46,0,45,0],[47,0,46,0],[48,0,47,0],[49,4,48,2,"_proto"],[49,10,48,8],[49,11,48,9,"find"],[49,15,48,13],[49,18,48,16],[49,28,48,26,"id"],[49,30,48,28],[49,32,48,30],[50,6,49,4],[50,13,49,11],[50,17,49,15,"Promise"],[50,24,49,22],[50,25,49,23],[50,35,49,33,"$return"],[50,42,49,40],[50,44,49,42],[51,8,50,6],[51,12,50,10,"_this2"],[51,18,50,16],[51,21,50,19],[51,25,50,23],[52,8,51,6],[52,15,51,13,"$return"],[52,22,51,20],[52,23,51,21],[52,24,51,22],[52,25,51,23],[52,27,51,25,"_Result"],[52,34,51,32],[52,35,51,33,"toPromise"],[52,44,51,42],[52,46,51,44],[52,56,51,54,"callback"],[52,64,51,62],[52,66,51,64],[53,10,52,8],[53,17,52,15,"_this2"],[53,23,52,21],[53,24,52,22,"_fetchRecord"],[53,36,52,34],[53,37,52,35,"id"],[53,39,52,37],[53,41,52,39,"callback"],[53,49,52,47],[53,50,52,48],[54,8,53,6],[54,9,53,7],[54,10,53,8],[54,11,53,9],[55,6,54,4],[55,7,54,5],[55,8,54,6,"bind"],[55,12,54,10],[55,13,54,11],[55,17,54,15],[55,18,54,16],[55,19,54,17],[56,4,55,2],[58,4,57,2],[59,0,58,0],[60,0,59,0],[61,0,60,0],[62,0,61,0],[63,0,62,0],[63,7,57,2],[64,4,63,2,"_proto"],[64,10,63,8],[64,11,63,9,"findAndObserve"],[64,25,63,23],[64,28,63,26],[64,38,63,36,"id"],[64,40,63,38],[64,42,63,40],[65,6,64,4],[65,10,64,8,"_this3"],[65,16,64,14],[65,19,64,17],[65,23,64,21],[66,6,65,4],[66,13,65,11,"_rx"],[66,16,65,14],[66,17,65,15,"Observable"],[66,27,65,25],[66,28,65,26,"create"],[66,34,65,32],[66,35,65,33],[66,45,65,43,"observer"],[66,53,65,51],[66,55,65,53],[67,8,66,6],[67,12,66,10,"unsubscribe"],[67,23,66,21],[67,26,66,24],[67,30,66,28],[68,8,67,6],[68,12,67,10,"unsubscribed"],[68,24,67,22],[68,27,67,25],[68,32,67,30],[69,8,68,6,"_this3"],[69,14,68,12],[69,15,68,13,"_fetchRecord"],[69,27,68,25],[69,28,68,26,"id"],[69,30,68,28],[69,32,68,30],[69,42,68,40,"result"],[69,48,68,46],[69,50,68,48],[70,10,69,8],[70,14,69,12,"result"],[70,20,69,18],[70,21,69,19,"value"],[70,26,69,24],[70,28,69,26],[71,12,70,10],[71,16,70,14,"record"],[71,22,70,20],[71,25,70,23,"result"],[71,31,70,29],[71,32,70,30,"value"],[71,37,70,35],[72,12,71,10,"observer"],[72,20,71,18],[72,21,71,19,"next"],[72,25,71,23],[72,26,71,24,"record"],[72,32,71,30],[72,33,71,31],[73,12,72,10,"unsubscribe"],[73,23,72,21],[73,26,72,24,"record"],[73,32,72,30],[73,33,72,31,"experimentalSubscribe"],[73,54,72,52],[73,55,72,53],[73,65,72,63,"isDeleted"],[73,74,72,72],[73,76,72,74],[74,14,73,12],[74,18,73,16],[74,19,73,17,"unsubscribed"],[74,31,73,29],[74,33,73,31],[75,16,74,14,"isDeleted"],[75,25,74,23],[75,28,74,26,"observer"],[75,36,74,34],[75,37,74,35,"complete"],[75,45,74,43],[75,46,74,44],[75,47,74,45],[75,50,74,48,"observer"],[75,58,74,56],[75,59,74,57,"next"],[75,63,74,61],[75,64,74,62,"record"],[75,70,74,68],[75,71,74,69],[76,14,75,12],[77,12,76,10],[77,13,76,11],[77,14,76,12],[78,10,77,8],[78,11,77,9],[78,17,77,15],[79,12,78,10],[80,12,79,10,"observer"],[80,20,79,18],[80,21,79,19,"error"],[80,26,79,24],[80,27,79,25,"result"],[80,33,79,31],[80,34,79,32,"error"],[80,39,79,37],[80,40,79,38],[81,10,80,8],[82,8,81,6],[82,9,81,7],[82,10,81,8],[83,8,82,6],[83,15,82,13],[83,27,82,25],[84,10,83,8,"unsubscribed"],[84,22,83,20],[84,25,83,23],[84,29,83,27],[85,10,84,8,"unsubscribe"],[85,21,84,19],[85,25,84,23,"unsubscribe"],[85,36,84,34],[85,37,84,35],[85,38,84,36],[86,8,85,6],[86,9,85,7],[87,6,86,4],[87,7,86,5],[87,8,86,6],[88,4,87,2],[90,4,89,2],[91,4,90,2],[92,0,91,0],[93,0,92,0],[94,0,93,0],[95,0,94,0],[96,0,95,0],[97,0,96,0],[98,4,97,2],[99,4,97,2],[100,4,99,2,"_proto"],[100,10,99,8],[100,11,99,9,"query"],[100,16,99,14],[100,19,99,17],[100,29,99,27],[100,32,99,30,"args"],[100,36,99,34],[100,38,99,36],[101,6,100,4],[101,10,100,8,"clauses"],[101,17,100,15],[101,20,100,18],[101,21,100,19],[101,22,100,20],[101,24,100,22,"_fp"],[101,27,100,25],[101,28,100,26,"fromArrayOrSpread"],[101,45,100,43],[101,47,100,45,"args"],[101,51,100,49],[101,53,100,51],[101,71,100,69],[101,73,100,71],[101,81,100,79],[101,82,100,80],[102,6,101,4],[102,13,101,11],[102,17,101,15,"_Query"],[102,23,101,21],[102,24,101,22,"default"],[102,31,101,29],[102,32,101,30],[102,36,101,34],[102,38,101,36,"clauses"],[102,45,101,43],[102,46,101,44],[103,4,102,2],[105,4,104,2],[106,0,105,0],[107,0,106,0],[108,0,107,0],[109,0,108,0],[110,0,109,0],[111,0,110,0],[112,0,111,0],[113,0,112,0],[114,0,113,0],[115,0,114,0],[116,0,115,0],[117,0,116,0],[117,7,104,2],[118,4,117,2,"_proto"],[118,10,117,8],[118,11,117,9,"create"],[118,17,117,15],[118,20,117,18],[118,30,117,28,"recordBuilder"],[118,43,117,41],[118,46,117,44,"_fp"],[118,49,117,47],[118,50,117,48,"noop"],[118,54,117,52],[118,56,117,54],[119,6,118,4],[119,13,118,11],[119,17,118,15,"Promise"],[119,24,118,22],[119,25,118,23],[119,35,118,33,"$return"],[119,42,118,40],[119,44,118,42,"$error"],[119,50,118,48],[119,52,118,50],[120,8,119,6],[120,12,119,10,"record"],[120,18,119,16],[121,8,120,6],[121,12,120,10],[121,13,120,11,"database"],[121,21,120,19],[121,22,120,20,"_ensureInWriter"],[121,37,120,35],[121,38,120,36],[121,59,120,57],[121,60,120,58],[122,8,121,6,"record"],[122,14,121,12],[122,17,121,15],[122,21,121,19],[122,22,121,20,"prepareCreate"],[122,35,121,33],[122,36,121,34,"recordBuilder"],[122,49,121,47],[122,50,121,48],[123,8,122,6],[123,15,122,13,"Promise"],[123,22,122,20],[123,23,122,21,"resolve"],[123,30,122,28],[123,31,122,29],[123,35,122,33],[123,36,122,34,"database"],[123,44,122,42],[123,45,122,43,"batch"],[123,50,122,48],[123,51,122,49,"record"],[123,57,122,55],[123,58,122,56],[123,59,122,57],[123,60,122,58,"then"],[123,64,122,62],[123,65,122,63],[123,77,122,75],[124,10,123,8],[124,14,123,12],[125,12,124,10],[125,19,124,17,"$return"],[125,26,124,24],[125,27,124,25,"record"],[125,33,124,31],[125,34,124,32],[126,10,125,8],[126,11,125,9],[126,12,125,10],[126,19,125,17,"$boundEx"],[126,27,125,25],[126,29,125,27],[127,12,126,10],[127,19,126,17,"$error"],[127,25,126,23],[127,26,126,24,"$boundEx"],[127,34,126,32],[127,35,126,33],[128,10,127,8],[129,8,128,6],[129,9,128,7],[129,11,128,9,"$error"],[129,17,128,15],[129,18,128,16],[130,6,129,4],[130,7,129,5],[130,8,129,6,"bind"],[130,12,129,10],[130,13,129,11],[130,17,129,15],[130,18,129,16],[130,19,129,17],[131,4,130,2],[133,4,132,2],[134,0,133,0],[135,0,134,0],[136,0,135,0],[137,0,136,0],[138,0,137,0],[139,0,138,0],[139,7,132,2],[140,4,139,2,"_proto"],[140,10,139,8],[140,11,139,9,"prepareCreate"],[140,24,139,22],[140,27,139,25],[140,37,139,35,"recordBuilder"],[140,50,139,48],[140,53,139,51,"_fp"],[140,56,139,54],[140,57,139,55,"noop"],[140,61,139,59],[140,63,139,61],[141,6,140,4],[142,6,141,4],[142,13,141,11],[142,17,141,15],[142,18,141,16,"modelClass"],[142,28,141,26],[142,29,141,27,"_prepareCreate"],[142,43,141,41],[142,44,141,42],[142,48,141,46],[142,50,141,48,"recordBuilder"],[142,63,141,61],[142,64,141,62],[143,4,142,2],[145,4,144,2],[146,0,145,0],[147,0,146,0],[148,0,147,0],[149,0,148,0],[150,0,149,0],[151,0,150,0],[152,0,151,0],[152,7,144,2],[153,4,152,2,"_proto"],[153,10,152,8],[153,11,152,9,"prepareCreateFromDirtyRaw"],[153,36,152,34],[153,39,152,37],[153,49,152,47,"dirtyRaw"],[153,57,152,55],[153,59,152,57],[154,6,153,4],[155,6,154,4],[155,13,154,11],[155,17,154,15],[155,18,154,16,"modelClass"],[155,28,154,26],[155,29,154,27,"_prepareCreateFromDirtyRaw"],[155,55,154,53],[155,56,154,54],[155,60,154,58],[155,62,154,60,"dirtyRaw"],[155,70,154,68],[155,71,154,69],[156,4,155,2],[158,4,157,2],[159,0,158,0],[160,0,159,0],[161,0,160,0],[162,0,161,0],[163,0,162,0],[164,0,163,0],[165,0,164,0],[166,0,165,0],[167,0,166,0],[168,0,167,0],[169,0,168,0],[170,0,169,0],[170,7,157,2],[171,4,170,2,"_proto"],[171,10,170,8],[171,11,170,9,"disposableFromDirtyRaw"],[171,33,170,31],[171,36,170,34],[171,46,170,44,"dirtyRaw"],[171,54,170,52],[171,56,170,54],[172,6,171,4],[173,6,172,4],[173,13,172,11],[173,17,172,15],[173,18,172,16,"modelClass"],[173,28,172,26],[173,29,172,27,"_disposableFromDirtyRaw"],[173,52,172,50],[173,53,172,51],[173,57,172,55],[173,59,172,57,"dirtyRaw"],[173,67,172,65],[173,68,172,66],[174,4,173,2],[176,4,175,2],[178,4,177,2],[179,4,177,2],[180,4,179,2,"_proto"],[180,10,179,8],[180,11,179,9,"_fetchQuery"],[180,22,179,20],[180,25,179,23],[180,35,179,33,"query"],[180,40,179,38],[180,42,179,40,"callback"],[180,50,179,48],[180,52,179,50],[181,6,180,4],[181,10,180,8,"_this4"],[181,16,180,14],[181,19,180,17],[181,23,180,21],[182,6,181,4],[182,10,181,8],[182,11,181,9,"database"],[182,19,181,17],[182,20,181,18,"adapter"],[182,27,181,25],[182,28,181,26,"underlyingAdapter"],[182,45,181,43],[182,46,181,44,"query"],[182,51,181,49],[182,52,181,50,"query"],[182,57,181,55],[182,58,181,56,"serialize"],[182,67,181,65],[182,68,181,66],[182,69,181,67],[182,71,181,69],[182,81,181,79,"result"],[182,87,181,85],[182,89,181,87],[183,8,182,6],[183,15,182,13,"callback"],[183,23,182,21],[183,24,182,22],[183,25,182,23],[183,26,182,24],[183,28,182,26,"_Result"],[183,35,182,33],[183,36,182,34,"mapValue"],[183,44,182,42],[183,46,182,44],[183,56,182,54,"rawRecords"],[183,66,182,64],[183,68,182,66],[184,10,183,8],[184,17,183,15,"_this4"],[184,23,183,21],[184,24,183,22,"_cache"],[184,30,183,28],[184,31,183,29,"recordsFromQueryResult"],[184,53,183,51],[184,54,183,52,"rawRecords"],[184,64,183,62],[184,65,183,63],[185,8,184,6],[185,9,184,7],[185,11,184,9,"result"],[185,17,184,15],[185,18,184,16],[185,19,184,17],[186,6,185,4],[186,7,185,5],[186,8,185,6],[187,4,186,2],[187,5,186,3],[188,4,187,2,"_proto"],[188,10,187,8],[188,11,187,9,"_fetchIds"],[188,20,187,18],[188,23,187,21],[188,33,187,31,"query"],[188,38,187,36],[188,40,187,38,"callback"],[188,48,187,46],[188,50,187,48],[189,6,188,4],[189,10,188,8],[189,11,188,9,"database"],[189,19,188,17],[189,20,188,18,"adapter"],[189,27,188,25],[189,28,188,26,"underlyingAdapter"],[189,45,188,43],[189,46,188,44,"queryIds"],[189,54,188,52],[189,55,188,53,"query"],[189,60,188,58],[189,61,188,59,"serialize"],[189,70,188,68],[189,71,188,69],[189,72,188,70],[189,74,188,72,"callback"],[189,82,188,80],[189,83,188,81],[190,4,189,2],[190,5,189,3],[191,4,190,2,"_proto"],[191,10,190,8],[191,11,190,9,"_fetchCount"],[191,22,190,20],[191,25,190,23],[191,35,190,33,"query"],[191,40,190,38],[191,42,190,40,"callback"],[191,50,190,48],[191,52,190,50],[192,6,191,4],[192,10,191,8],[192,11,191,9,"database"],[192,19,191,17],[192,20,191,18,"adapter"],[192,27,191,25],[192,28,191,26,"underlyingAdapter"],[192,45,191,43],[192,46,191,44,"count"],[192,51,191,49],[192,52,191,50,"query"],[192,57,191,55],[192,58,191,56,"serialize"],[192,67,191,65],[192,68,191,66],[192,69,191,67],[192,71,191,69,"callback"],[192,79,191,77],[192,80,191,78],[193,4,192,2],[193,5,192,3],[194,4,193,2,"_proto"],[194,10,193,8],[194,11,193,9,"_unsafeFetchRaw"],[194,26,193,24],[194,29,193,27],[194,39,193,37,"query"],[194,44,193,42],[194,46,193,44,"callback"],[194,54,193,52],[194,56,193,54],[195,6,194,4],[195,10,194,8],[195,11,194,9,"database"],[195,19,194,17],[195,20,194,18,"adapter"],[195,27,194,25],[195,28,194,26,"underlyingAdapter"],[195,45,194,43],[195,46,194,44,"unsafeQueryRaw"],[195,60,194,58],[195,61,194,59,"query"],[195,66,194,64],[195,67,194,65,"serialize"],[195,76,194,74],[195,77,194,75],[195,78,194,76],[195,80,194,78,"callback"],[195,88,194,86],[195,89,194,87],[196,4,195,2],[198,4,197,2],[199,4,197,2],[200,4,199,2,"_proto"],[200,10,199,8],[200,11,199,9,"_fetchRecord"],[200,23,199,21],[200,26,199,24],[200,36,199,34,"id"],[200,38,199,36],[200,40,199,38,"callback"],[200,48,199,46],[200,50,199,48],[201,6,200,4],[201,10,200,8,"_this5"],[201,16,200,14],[201,19,200,17],[201,23,200,21],[202,6,201,4],[202,10,201,8],[202,18,201,16],[202,23,201,21],[202,30,201,28,"id"],[202,32,201,30],[202,34,201,32],[203,8,202,6,"callback"],[203,16,202,14],[203,17,202,15],[204,10,203,8,"error"],[204,15,203,13],[204,17,203,15],[204,21,203,19,"Error"],[204,26,203,24],[204,27,203,25],[204,47,203,45],[204,48,203,46,"concat"],[204,54,203,52],[204,55,203,53],[204,59,203,57],[204,60,203,58,"table"],[204,65,203,63],[204,67,203,65],[204,70,203,68],[204,71,203,69],[204,72,203,70,"concat"],[204,78,203,76],[204,79,203,77,"id"],[204,81,203,79],[204,82,203,80],[205,8,204,6],[205,9,204,7],[205,10,204,8],[206,8,205,6],[207,6,206,4],[208,6,207,4],[208,10,207,8,"cachedRecord"],[208,22,207,20],[208,25,207,23],[208,29,207,27],[208,30,207,28,"_cache"],[208,36,207,34],[208,37,207,35,"get"],[208,40,207,38],[208,41,207,39,"id"],[208,43,207,41],[208,44,207,42],[209,6,208,4],[209,10,208,8,"cachedRecord"],[209,22,208,20],[209,24,208,22],[210,8,209,6,"callback"],[210,16,209,14],[210,17,209,15],[211,10,210,8,"value"],[211,15,210,13],[211,17,210,15,"cachedRecord"],[212,8,211,6],[212,9,211,7],[212,10,211,8],[213,8,212,6],[214,6,213,4],[215,6,214,4],[215,10,214,8],[215,11,214,9,"database"],[215,19,214,17],[215,20,214,18,"adapter"],[215,27,214,25],[215,28,214,26,"underlyingAdapter"],[215,45,214,43],[215,46,214,44,"find"],[215,50,214,48],[215,51,214,49],[215,55,214,53],[215,56,214,54,"table"],[215,61,214,59],[215,63,214,61,"id"],[215,65,214,63],[215,67,214,65],[215,77,214,75,"result"],[215,83,214,81],[215,85,214,83],[216,8,215,6],[216,15,215,13,"callback"],[216,23,215,21],[216,24,215,22],[216,25,215,23],[216,26,215,24],[216,28,215,26,"_Result"],[216,35,215,33],[216,36,215,34,"mapValue"],[216,44,215,42],[216,46,215,44],[216,56,215,54,"rawRecord"],[216,65,215,63],[216,67,215,65],[217,10,216,8],[217,11,216,9],[217,12,216,10],[217,14,216,12,"_invariant"],[217,24,216,22],[217,25,216,23,"default"],[217,32,216,30],[217,34,216,32,"rawRecord"],[217,43,216,41],[217,45,216,43],[217,54,216,52],[217,55,216,53,"concat"],[217,61,216,59],[217,62,216,60,"_this5"],[217,68,216,66],[217,69,216,67,"table"],[217,74,216,72],[217,76,216,74],[217,79,216,77],[217,80,216,78],[217,81,216,79,"concat"],[217,87,216,85],[217,88,216,86,"id"],[217,90,216,88],[217,92,216,90],[217,104,216,102],[217,105,216,103],[217,106,216,104],[218,10,217,8],[218,17,217,15,"_this5"],[218,23,217,21],[218,24,217,22,"_cache"],[218,30,217,28],[218,31,217,29,"recordFromQueryResult"],[218,52,217,50],[218,53,217,51,"rawRecord"],[218,62,217,60],[218,63,217,61],[219,8,218,6],[219,9,218,7],[219,11,218,9,"result"],[219,17,218,15],[219,18,218,16],[219,19,218,17],[220,6,219,4],[220,7,219,5],[220,8,219,6],[221,4,220,2],[221,5,220,3],[222,4,221,2,"_proto"],[222,10,221,8],[222,11,221,9,"_applyChangesToCache"],[222,31,221,29],[222,34,221,32],[222,44,221,42,"operations"],[222,54,221,52],[222,56,221,54],[223,6,222,4],[223,10,222,8,"_this6"],[223,16,222,14],[223,19,222,17],[223,23,222,21],[224,6,223,4,"operations"],[224,16,223,14],[224,17,223,15,"forEach"],[224,24,223,22],[224,25,223,23],[224,35,223,33],[225,8,224,6,"record"],[225,14,224,12],[225,16,224,14,"record"],[225,22,224,20],[226,8,225,6,"type"],[226,12,225,10],[226,14,225,12,"type"],[227,6,226,4],[227,7,226,5],[227,9,226,7],[228,8,227,6],[228,12,227,10],[228,21,227,19],[228,26,227,24,"type"],[228,30,227,28],[228,32,227,30],[229,10,228,8,"record"],[229,16,228,14],[229,17,228,15,"_preparedState"],[229,31,228,29],[229,34,228,32],[229,38,228,36],[230,10,229,8,"_this6"],[230,16,229,14],[230,17,229,15,"_cache"],[230,23,229,21],[230,24,229,22,"add"],[230,27,229,25],[230,28,229,26,"record"],[230,34,229,32],[230,35,229,33],[231,8,230,6],[231,9,230,7],[231,15,230,13],[231,19,230,17],[231,30,230,28],[231,35,230,33,"type"],[231,39,230,37],[231,41,230,39],[232,10,231,8,"_this6"],[232,16,231,14],[232,17,231,15,"_cache"],[232,23,231,21],[232,24,231,22,"delete"],[232,30,231,28],[232,31,231,29,"record"],[232,37,231,35],[232,38,231,36],[233,8,232,6],[234,6,233,4],[234,7,233,5],[234,8,233,6],[235,4,234,2],[235,5,234,3],[236,4,235,2,"_proto"],[236,10,235,8],[236,11,235,9,"_notify"],[236,18,235,16],[236,21,235,19],[236,31,235,29,"operations"],[236,41,235,39],[236,43,235,41],[237,6,236,4],[237,10,236,8],[237,11,236,9,"_subscribers"],[237,23,236,21],[237,24,236,22,"forEach"],[237,31,236,29],[237,32,236,30],[237,42,236,40],[237,43,236,41,"subscriber"],[237,53,236,51],[237,54,236,52],[237,56,236,54],[238,8,237,6,"subscriber"],[238,18,237,16],[238,19,237,17,"operations"],[238,29,237,27],[238,30,237,28],[239,6,238,4],[239,7,238,5],[239,8,238,6],[240,6,239,4],[240,10,239,8],[240,11,239,9,"changes"],[240,18,239,16],[240,19,239,17,"next"],[240,23,239,21],[240,24,239,22,"operations"],[240,34,239,32],[240,35,239,33],[241,6,240,4,"operations"],[241,16,240,14],[241,17,240,15,"forEach"],[241,24,240,22],[241,25,240,23],[241,35,240,33],[242,8,241,6,"record"],[242,14,241,12],[242,16,241,14,"record"],[242,22,241,20],[243,8,242,6,"type"],[243,12,242,10],[243,14,242,12,"type"],[244,6,243,4],[244,7,243,5],[244,9,243,7],[245,8,244,6],[245,12,244,10],[245,21,244,19],[245,26,244,24,"type"],[245,30,244,28],[245,32,244,30],[246,10,245,8,"record"],[246,16,245,14],[246,17,245,15,"_notifyChanged"],[246,31,245,29],[246,32,245,30],[246,33,245,31],[247,8,246,6],[247,9,246,7],[247,15,246,13],[247,19,246,17],[247,30,246,28],[247,35,246,33,"type"],[247,39,246,37],[247,41,246,39],[248,10,247,8,"record"],[248,16,247,14],[248,17,247,15,"_notifyDestroyed"],[248,33,247,31],[248,34,247,32],[248,35,247,33],[249,8,248,6],[250,6,249,4],[250,7,249,5],[250,8,249,6],[251,4,250,2],[251,5,250,3],[252,4,251,2],[253,0,252,0],[254,0,253,0],[255,0,254,0],[256,0,255,0],[257,0,256,0],[258,0,257,0],[259,0,258,0],[260,0,259,0],[261,4,260,2,"_proto"],[261,10,260,8],[261,11,260,9,"experimentalSubscribe"],[261,32,260,30],[261,35,260,33],[261,45,260,43,"subscriber"],[261,55,260,53],[261,57,260,55,"debugInfo"],[261,66,260,64],[261,68,260,66],[262,6,261,4],[262,10,261,8,"_this7"],[262,16,261,14],[262,19,261,17],[262,23,261,21],[263,6,262,4],[263,10,262,8,"entry"],[263,15,262,13],[263,18,262,16],[263,19,262,17,"subscriber"],[263,29,262,27],[263,31,262,29,"debugInfo"],[263,40,262,38],[263,41,262,39],[264,6,263,4],[264,10,263,8],[264,11,263,9,"_subscribers"],[264,23,263,21],[264,24,263,22,"push"],[264,28,263,26],[264,29,263,27,"entry"],[264,34,263,32],[264,35,263,33],[265,6,264,4],[265,13,264,11],[265,25,264,23],[266,8,265,6],[266,12,265,10,"idx"],[266,15,265,13],[266,18,265,16,"_this7"],[266,24,265,22],[266,25,265,23,"_subscribers"],[266,37,265,35],[266,38,265,36,"indexOf"],[266,45,265,43],[266,46,265,44,"entry"],[266,51,265,49],[266,52,265,50],[267,8,266,6],[267,9,266,7],[267,10,266,8],[267,15,266,13,"idx"],[267,18,266,16],[267,22,266,20,"_this7"],[267,28,266,26],[267,29,266,27,"_subscribers"],[267,41,266,39],[267,42,266,40,"splice"],[267,48,266,46],[267,49,266,47,"idx"],[267,52,266,50],[267,54,266,52],[267,55,266,53],[267,56,266,54],[268,6,267,4],[268,7,267,5],[269,4,268,2],[269,5,268,3],[270,4,269,2],[270,11,269,9],[270,12,269,10],[270,13,269,11],[270,15,269,13,"_createClass2"],[270,28,269,26],[270,29,269,27,"default"],[270,36,269,34],[270,38,269,36,"Collection"],[270,48,269,46],[270,50,269,48],[270,51,269,49],[271,6,270,4,"key"],[271,9,270,7],[271,11,270,9],[271,15,270,13],[272,6,271,4,"get"],[272,9,271,7],[272,11,271,9],[272,20,271,18,"get"],[272,23,271,21,"get"],[272,24,271,21],[272,26,271,24],[273,8,272,6],[273,15,272,13],[273,19,272,17],[273,20,272,18,"database"],[273,28,272,26],[274,6,273,4],[276,6,275,4],[277,0,276,0],[278,0,277,0],[279,4,278,2],[279,5,278,3],[279,7,278,5],[280,6,279,4,"key"],[280,9,279,7],[280,11,279,9],[280,18,279,16],[281,6,280,4,"get"],[281,9,280,7],[281,11,280,9],[281,20,280,18,"get"],[281,23,280,21,"get"],[281,24,280,21],[281,26,280,24],[282,8,281,6],[283,8,282,6],[283,15,282,13],[283,19,282,17],[283,20,282,18,"modelClass"],[283,30,282,28],[283,31,282,29,"table"],[283,36,282,34],[284,6,283,4],[286,6,285,4],[287,0,286,0],[288,0,287,0],[289,4,288,2],[289,5,288,3],[289,7,288,5],[290,6,289,4,"key"],[290,9,289,7],[290,11,289,9],[290,19,289,17],[291,6,290,4,"get"],[291,9,290,7],[291,11,290,9],[291,20,290,18,"get"],[291,23,290,21,"get"],[291,24,290,21],[291,26,290,24],[292,8,291,6],[292,15,291,13],[292,19,291,17],[292,20,291,18,"database"],[292,28,291,26],[292,29,291,27,"schema"],[292,35,291,33],[292,36,291,34,"tables"],[292,42,291,40],[292,43,291,41],[292,47,291,45],[292,48,291,46,"table"],[292,53,291,51],[292,54,291,52],[293,6,292,4],[294,4,293,2],[294,5,293,3],[294,6,293,4],[294,7,293,5],[295,2,294,0],[295,3,294,1],[295,4,294,2],[295,5,294,3],[296,0,294,4],[296,3]],"functionMap":{"names":["<global>","<anonymous>","Collection","_RecordCache._default$argument_1","_proto.find","_proto.findAndObserve","_rx.Observable.create$argument_0","_this3._fetchRecord$argument_1","record.experimentalSubscribe$argument_0","_proto.query","_proto.create","Promise.resolve.then$argument_0","_proto.prepareCreate","_proto.prepareCreateFromDirtyRaw","_proto.disposableFromDirtyRaw","_proto._fetchQuery","database.adapter.underlyingAdapter.query$argument_1","_proto._fetchIds","_proto._fetchCount","_proto._unsafeFetchRaw","_proto._fetchRecord","database.adapter.underlyingAdapter.find$argument_2","_proto._applyChangesToCache","operations.forEach$argument_0","_proto._notify","_subscribers.forEach$argument_0","_proto.experimentalSubscribe","get"],"mappings":"AAA;gDCY;ECe;6DCM;KDE;GDC;gBGW;uBHC;KGK;GHC;0BIQ;iCCE;8BCG;qDCI;WDI;ODK;aLC;OKG;KDC;GJC;iBQY;GRG;kBSe;uBTC;+DUI;OVM;KSC;GTC;yBWS;GXG;qCYU;GZG;kCae;GbG;uBcM;qECE;4CfC;OeE;KDC;GdC;qBgBC;GhBE;uBiBC;GjBE;2BkBC;GlBE;wBmBI;iECe;4CpBC;OoBG;KDC;GnBC;gCqBC;uBCE;KDU;GrBC;mBuBC;8BCC;KDE;uBDE;KCS;GvBC;iCyBU;WzBI;KyBG;GzBC;S0BG;K1BE;S0BO;K1BG;S0BO;K1BE;CDE"},"hasCjsExports":true},"type":"js/module"}]}
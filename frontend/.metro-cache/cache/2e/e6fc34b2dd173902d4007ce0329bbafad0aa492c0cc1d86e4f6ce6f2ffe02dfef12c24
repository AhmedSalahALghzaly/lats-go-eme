{"dependencies":[{"name":"../Subject","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":16,"index":123},"end":{"line":4,"column":37,"index":144}}],"key":"rCTmTYO6TJ25UVDxGzxJlC7LYfM=","exportNames":["*"],"imports":1}},{"name":"../Observable","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":19,"index":165},"end":{"line":5,"column":43,"index":189}}],"key":"aLqSh2nqZQ/SY46BefsTfEUSJoQ=","exportNames":["*"],"imports":1}},{"name":"./defer","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":14,"index":205},"end":{"line":6,"column":32,"index":223}}],"key":"PoBxal3k1mlKLr2w9C+kJ/Um94k=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.connectable = void 0;\n  var Subject_1 = require(_dependencyMap[0], \"../Subject\");\n  var Observable_1 = require(_dependencyMap[1], \"../Observable\");\n  var defer_1 = require(_dependencyMap[2], \"./defer\");\n  var DEFAULT_CONFIG = {\n    connector: function () {\n      return new Subject_1.Subject();\n    },\n    resetOnDisconnect: true\n  };\n  function connectable(source, config) {\n    if (config === void 0) {\n      config = DEFAULT_CONFIG;\n    }\n    var connection = null;\n    var connector = config.connector,\n      _a = config.resetOnDisconnect,\n      resetOnDisconnect = _a === void 0 ? true : _a;\n    var subject = connector();\n    var result = new Observable_1.Observable(function (subscriber) {\n      return subject.subscribe(subscriber);\n    });\n    result.connect = function () {\n      if (!connection || connection.closed) {\n        connection = defer_1.defer(function () {\n          return source;\n        }).subscribe(subject);\n        if (resetOnDisconnect) {\n          connection.add(function () {\n            return subject = connector();\n          });\n        }\n      }\n      return connection;\n    };\n    return result;\n  }\n  exports.connectable = connectable;\n});","lineCount":45,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"connectable"],[7,21,3,19],[7,24,3,22],[7,29,3,27],[7,30,3,28],[8,2,4,0],[8,6,4,4,"Subject_1"],[8,15,4,13],[8,18,4,16,"require"],[8,25,4,23],[8,26,4,23,"_dependencyMap"],[8,40,4,23],[8,57,4,36],[8,58,4,37],[9,2,5,0],[9,6,5,4,"Observable_1"],[9,18,5,16],[9,21,5,19,"require"],[9,28,5,26],[9,29,5,26,"_dependencyMap"],[9,43,5,26],[9,63,5,42],[9,64,5,43],[10,2,6,0],[10,6,6,4,"defer_1"],[10,13,6,11],[10,16,6,14,"require"],[10,23,6,21],[10,24,6,21,"_dependencyMap"],[10,38,6,21],[10,52,6,31],[10,53,6,32],[11,2,7,0],[11,6,7,4,"DEFAULT_CONFIG"],[11,20,7,18],[11,23,7,21],[12,4,8,4,"connector"],[12,13,8,13],[12,15,8,15],[12,24,8,15,"connector"],[12,25,8,15],[12,27,8,27],[13,6,8,29],[13,13,8,36],[13,17,8,40,"Subject_1"],[13,26,8,49],[13,27,8,50,"Subject"],[13,34,8,57],[13,35,8,58],[13,36,8,59],[14,4,8,61],[14,5,8,62],[15,4,9,4,"resetOnDisconnect"],[15,21,9,21],[15,23,9,23],[16,2,10,0],[16,3,10,1],[17,2,11,0],[17,11,11,9,"connectable"],[17,22,11,20,"connectable"],[17,23,11,21,"source"],[17,29,11,27],[17,31,11,29,"config"],[17,37,11,35],[17,39,11,37],[18,4,12,4],[18,8,12,8,"config"],[18,14,12,14],[18,19,12,19],[18,24,12,24],[18,25,12,25],[18,27,12,27],[19,6,12,29,"config"],[19,12,12,35],[19,15,12,38,"DEFAULT_CONFIG"],[19,29,12,52],[20,4,12,54],[21,4,13,4],[21,8,13,8,"connection"],[21,18,13,18],[21,21,13,21],[21,25,13,25],[22,4,14,4],[22,8,14,8,"connector"],[22,17,14,17],[22,20,14,20,"config"],[22,26,14,26],[22,27,14,27,"connector"],[22,36,14,36],[23,6,14,38,"_a"],[23,8,14,40],[23,11,14,43,"config"],[23,17,14,49],[23,18,14,50,"resetOnDisconnect"],[23,35,14,67],[24,6,14,69,"resetOnDisconnect"],[24,23,14,86],[24,26,14,89,"_a"],[24,28,14,91],[24,33,14,96],[24,38,14,101],[24,39,14,102],[24,42,14,105],[24,46,14,109],[24,49,14,112,"_a"],[24,51,14,114],[25,4,15,4],[25,8,15,8,"subject"],[25,15,15,15],[25,18,15,18,"connector"],[25,27,15,27],[25,28,15,28],[25,29,15,29],[26,4,16,4],[26,8,16,8,"result"],[26,14,16,14],[26,17,16,17],[26,21,16,21,"Observable_1"],[26,33,16,33],[26,34,16,34,"Observable"],[26,44,16,44],[26,45,16,45],[26,55,16,55,"subscriber"],[26,65,16,65],[26,67,16,67],[27,6,17,8],[27,13,17,15,"subject"],[27,20,17,22],[27,21,17,23,"subscribe"],[27,30,17,32],[27,31,17,33,"subscriber"],[27,41,17,43],[27,42,17,44],[28,4,18,4],[28,5,18,5],[28,6,18,6],[29,4,19,4,"result"],[29,10,19,10],[29,11,19,11,"connect"],[29,18,19,18],[29,21,19,21],[29,33,19,33],[30,6,20,8],[30,10,20,12],[30,11,20,13,"connection"],[30,21,20,23],[30,25,20,27,"connection"],[30,35,20,37],[30,36,20,38,"closed"],[30,42,20,44],[30,44,20,46],[31,8,21,12,"connection"],[31,18,21,22],[31,21,21,25,"defer_1"],[31,28,21,32],[31,29,21,33,"defer"],[31,34,21,38],[31,35,21,39],[31,47,21,51],[32,10,21,53],[32,17,21,60,"source"],[32,23,21,66],[33,8,21,68],[33,9,21,69],[33,10,21,70],[33,11,21,71,"subscribe"],[33,20,21,80],[33,21,21,81,"subject"],[33,28,21,88],[33,29,21,89],[34,8,22,12],[34,12,22,16,"resetOnDisconnect"],[34,29,22,33],[34,31,22,35],[35,10,23,16,"connection"],[35,20,23,26],[35,21,23,27,"add"],[35,24,23,30],[35,25,23,31],[35,37,23,43],[36,12,23,45],[36,19,23,53,"subject"],[36,26,23,60],[36,29,23,63,"connector"],[36,38,23,72],[36,39,23,73],[36,40,23,74],[37,10,23,77],[37,11,23,78],[37,12,23,79],[38,8,24,12],[39,6,25,8],[40,6,26,8],[40,13,26,15,"connection"],[40,23,26,25],[41,4,27,4],[41,5,27,5],[42,4,28,4],[42,11,28,11,"result"],[42,17,28,17],[43,2,29,0],[44,2,30,0,"exports"],[44,9,30,7],[44,10,30,8,"connectable"],[44,21,30,19],[44,24,30,22,"connectable"],[44,35,30,33],[45,0,30,34],[45,3]],"functionMap":{"names":["<global>","DEFAULT_CONFIG.connector","connectable","Observable_1.Observable$argument_0","result.connect","defer_1.defer$argument_0","connection.add$argument_0"],"mappings":"AAA;eCO,+CD;AEG;6CCK;KDE;qBEC;uCCE,8BD;+BEE,+CF;KFI;CFE"},"hasCjsExports":true},"type":"js/module"}]}
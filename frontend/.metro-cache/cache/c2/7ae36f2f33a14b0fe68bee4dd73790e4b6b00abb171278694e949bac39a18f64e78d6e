{"dependencies":[{"name":"../Observable","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":19,"index":122},"end":{"line":4,"column":43,"index":146}}],"key":"aLqSh2nqZQ/SY46BefsTfEUSJoQ=","exportNames":["*"],"imports":1}},{"name":"../observable/innerFrom","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":18,"index":166},"end":{"line":5,"column":52,"index":200}}],"key":"T4CuDoHB9q4c1mpqb7scn7763KE=","exportNames":["*"],"imports":1}},{"name":"../Subject","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":16,"index":218},"end":{"line":6,"column":37,"index":239}}],"key":"rCTmTYO6TJ25UVDxGzxJlC7LYfM=","exportNames":["*"],"imports":1}},{"name":"../util/lift","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":13,"index":254},"end":{"line":7,"column":36,"index":277}}],"key":"QCxE0PdfaUm4cT9qPVYaaaoo46A=","exportNames":["*"],"imports":1}},{"name":"./OperatorSubscriber","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":27,"index":306},"end":{"line":8,"column":58,"index":337}}],"key":"5a4JxA+rxI0MIxewBKZddpWmHrQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.groupBy = void 0;\n  var Observable_1 = require(_dependencyMap[0], \"../Observable\");\n  var innerFrom_1 = require(_dependencyMap[1], \"../observable/innerFrom\");\n  var Subject_1 = require(_dependencyMap[2], \"../Subject\");\n  var lift_1 = require(_dependencyMap[3], \"../util/lift\");\n  var OperatorSubscriber_1 = require(_dependencyMap[4], \"./OperatorSubscriber\");\n  function groupBy(keySelector, elementOrOptions, duration, connector) {\n    return lift_1.operate(function (source, subscriber) {\n      var element;\n      if (!elementOrOptions || typeof elementOrOptions === 'function') {\n        element = elementOrOptions;\n      } else {\n        duration = elementOrOptions.duration, element = elementOrOptions.element, connector = elementOrOptions.connector;\n      }\n      var groups = new Map();\n      var notify = function (cb) {\n        groups.forEach(cb);\n        cb(subscriber);\n      };\n      var handleError = function (err) {\n        return notify(function (consumer) {\n          return consumer.error(err);\n        });\n      };\n      var activeGroups = 0;\n      var teardownAttempted = false;\n      var groupBySourceSubscriber = new OperatorSubscriber_1.OperatorSubscriber(subscriber, function (value) {\n        try {\n          var key_1 = keySelector(value);\n          var group_1 = groups.get(key_1);\n          if (!group_1) {\n            groups.set(key_1, group_1 = connector ? connector() : new Subject_1.Subject());\n            var grouped = createGroupedObservable(key_1, group_1);\n            subscriber.next(grouped);\n            if (duration) {\n              var durationSubscriber_1 = OperatorSubscriber_1.createOperatorSubscriber(group_1, function () {\n                group_1.complete();\n                durationSubscriber_1 === null || durationSubscriber_1 === void 0 ? void 0 : durationSubscriber_1.unsubscribe();\n              }, undefined, undefined, function () {\n                return groups.delete(key_1);\n              });\n              groupBySourceSubscriber.add(innerFrom_1.innerFrom(duration(grouped)).subscribe(durationSubscriber_1));\n            }\n          }\n          group_1.next(element ? element(value) : value);\n        } catch (err) {\n          handleError(err);\n        }\n      }, function () {\n        return notify(function (consumer) {\n          return consumer.complete();\n        });\n      }, handleError, function () {\n        return groups.clear();\n      }, function () {\n        teardownAttempted = true;\n        return activeGroups === 0;\n      });\n      source.subscribe(groupBySourceSubscriber);\n      function createGroupedObservable(key, groupSubject) {\n        var result = new Observable_1.Observable(function (groupSubscriber) {\n          activeGroups++;\n          var innerSub = groupSubject.subscribe(groupSubscriber);\n          return function () {\n            innerSub.unsubscribe();\n            --activeGroups === 0 && teardownAttempted && groupBySourceSubscriber.unsubscribe();\n          };\n        });\n        result.key = key;\n        return result;\n      }\n    });\n  }\n  exports.groupBy = groupBy;\n});","lineCount":81,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"groupBy"],[7,17,3,15],[7,20,3,18],[7,25,3,23],[7,26,3,24],[8,2,4,0],[8,6,4,4,"Observable_1"],[8,18,4,16],[8,21,4,19,"require"],[8,28,4,26],[8,29,4,26,"_dependencyMap"],[8,43,4,26],[8,63,4,42],[8,64,4,43],[9,2,5,0],[9,6,5,4,"innerFrom_1"],[9,17,5,15],[9,20,5,18,"require"],[9,27,5,25],[9,28,5,25,"_dependencyMap"],[9,42,5,25],[9,72,5,51],[9,73,5,52],[10,2,6,0],[10,6,6,4,"Subject_1"],[10,15,6,13],[10,18,6,16,"require"],[10,25,6,23],[10,26,6,23,"_dependencyMap"],[10,40,6,23],[10,57,6,36],[10,58,6,37],[11,2,7,0],[11,6,7,4,"lift_1"],[11,12,7,10],[11,15,7,13,"require"],[11,22,7,20],[11,23,7,20,"_dependencyMap"],[11,37,7,20],[11,56,7,35],[11,57,7,36],[12,2,8,0],[12,6,8,4,"OperatorSubscriber_1"],[12,26,8,24],[12,29,8,27,"require"],[12,36,8,34],[12,37,8,34,"_dependencyMap"],[12,51,8,34],[12,78,8,57],[12,79,8,58],[13,2,9,0],[13,11,9,9,"groupBy"],[13,18,9,16,"groupBy"],[13,19,9,17,"keySelector"],[13,30,9,28],[13,32,9,30,"elementOrOptions"],[13,48,9,46],[13,50,9,48,"duration"],[13,58,9,56],[13,60,9,58,"connector"],[13,69,9,67],[13,71,9,69],[14,4,10,4],[14,11,10,11,"lift_1"],[14,17,10,17],[14,18,10,18,"operate"],[14,25,10,25],[14,26,10,26],[14,36,10,36,"source"],[14,42,10,42],[14,44,10,44,"subscriber"],[14,54,10,54],[14,56,10,56],[15,6,11,8],[15,10,11,12,"element"],[15,17,11,19],[16,6,12,8],[16,10,12,12],[16,11,12,13,"elementOrOptions"],[16,27,12,29],[16,31,12,33],[16,38,12,40,"elementOrOptions"],[16,54,12,56],[16,59,12,61],[16,69,12,71],[16,71,12,73],[17,8,13,12,"element"],[17,15,13,19],[17,18,13,22,"elementOrOptions"],[17,34,13,38],[18,6,14,8],[18,7,14,9],[18,13,15,13],[19,8,16,13,"duration"],[19,16,16,21],[19,19,16,24,"elementOrOptions"],[19,35,16,40],[19,36,16,41,"duration"],[19,44,16,49],[19,46,16,51,"element"],[19,53,16,58],[19,56,16,61,"elementOrOptions"],[19,72,16,77],[19,73,16,78,"element"],[19,80,16,85],[19,82,16,87,"connector"],[19,91,16,96],[19,94,16,99,"elementOrOptions"],[19,110,16,115],[19,111,16,116,"connector"],[19,120,16,125],[20,6,17,8],[21,6,18,8],[21,10,18,12,"groups"],[21,16,18,18],[21,19,18,21],[21,23,18,25,"Map"],[21,26,18,28],[21,27,18,29],[21,28,18,30],[22,6,19,8],[22,10,19,12,"notify"],[22,16,19,18],[22,19,19,21],[22,28,19,21,"notify"],[22,29,19,31,"cb"],[22,31,19,33],[22,33,19,35],[23,8,20,12,"groups"],[23,14,20,18],[23,15,20,19,"forEach"],[23,22,20,26],[23,23,20,27,"cb"],[23,25,20,29],[23,26,20,30],[24,8,21,12,"cb"],[24,10,21,14],[24,11,21,15,"subscriber"],[24,21,21,25],[24,22,21,26],[25,6,22,8],[25,7,22,9],[26,6,23,8],[26,10,23,12,"handleError"],[26,21,23,23],[26,24,23,26],[26,33,23,26,"handleError"],[26,34,23,36,"err"],[26,37,23,39],[26,39,23,41],[27,8,23,43],[27,15,23,50,"notify"],[27,21,23,56],[27,22,23,57],[27,32,23,67,"consumer"],[27,40,23,75],[27,42,23,77],[28,10,23,79],[28,17,23,86,"consumer"],[28,25,23,94],[28,26,23,95,"error"],[28,31,23,100],[28,32,23,101,"err"],[28,35,23,104],[28,36,23,105],[29,8,23,107],[29,9,23,108],[29,10,23,109],[30,6,23,111],[30,7,23,112],[31,6,24,8],[31,10,24,12,"activeGroups"],[31,22,24,24],[31,25,24,27],[31,26,24,28],[32,6,25,8],[32,10,25,12,"teardownAttempted"],[32,27,25,29],[32,30,25,32],[32,35,25,37],[33,6,26,8],[33,10,26,12,"groupBySourceSubscriber"],[33,33,26,35],[33,36,26,38],[33,40,26,42,"OperatorSubscriber_1"],[33,60,26,62],[33,61,26,63,"OperatorSubscriber"],[33,79,26,81],[33,80,26,82,"subscriber"],[33,90,26,92],[33,92,26,94],[33,102,26,104,"value"],[33,107,26,109],[33,109,26,111],[34,8,27,12],[34,12,27,16],[35,10,28,16],[35,14,28,20,"key_1"],[35,19,28,25],[35,22,28,28,"keySelector"],[35,33,28,39],[35,34,28,40,"value"],[35,39,28,45],[35,40,28,46],[36,10,29,16],[36,14,29,20,"group_1"],[36,21,29,27],[36,24,29,30,"groups"],[36,30,29,36],[36,31,29,37,"get"],[36,34,29,40],[36,35,29,41,"key_1"],[36,40,29,46],[36,41,29,47],[37,10,30,16],[37,14,30,20],[37,15,30,21,"group_1"],[37,22,30,28],[37,24,30,30],[38,12,31,20,"groups"],[38,18,31,26],[38,19,31,27,"set"],[38,22,31,30],[38,23,31,31,"key_1"],[38,28,31,36],[38,30,31,39,"group_1"],[38,37,31,46],[38,40,31,49,"connector"],[38,49,31,58],[38,52,31,61,"connector"],[38,61,31,70],[38,62,31,71],[38,63,31,72],[38,66,31,75],[38,70,31,79,"Subject_1"],[38,79,31,88],[38,80,31,89,"Subject"],[38,87,31,96],[38,88,31,97],[38,89,31,99],[38,90,31,100],[39,12,32,20],[39,16,32,24,"grouped"],[39,23,32,31],[39,26,32,34,"createGroupedObservable"],[39,49,32,57],[39,50,32,58,"key_1"],[39,55,32,63],[39,57,32,65,"group_1"],[39,64,32,72],[39,65,32,73],[40,12,33,20,"subscriber"],[40,22,33,30],[40,23,33,31,"next"],[40,27,33,35],[40,28,33,36,"grouped"],[40,35,33,43],[40,36,33,44],[41,12,34,20],[41,16,34,24,"duration"],[41,24,34,32],[41,26,34,34],[42,14,35,24],[42,18,35,28,"durationSubscriber_1"],[42,38,35,48],[42,41,35,51,"OperatorSubscriber_1"],[42,61,35,71],[42,62,35,72,"createOperatorSubscriber"],[42,86,35,96],[42,87,35,97,"group_1"],[42,94,35,104],[42,96,35,106],[42,108,35,118],[43,16,36,28,"group_1"],[43,23,36,35],[43,24,36,36,"complete"],[43,32,36,44],[43,33,36,45],[43,34,36,46],[44,16,37,28,"durationSubscriber_1"],[44,36,37,48],[44,41,37,53],[44,45,37,57],[44,49,37,61,"durationSubscriber_1"],[44,69,37,81],[44,74,37,86],[44,79,37,91],[44,80,37,92],[44,83,37,95],[44,88,37,100],[44,89,37,101],[44,92,37,104,"durationSubscriber_1"],[44,112,37,124],[44,113,37,125,"unsubscribe"],[44,124,37,136],[44,125,37,137],[44,126,37,138],[45,14,38,24],[45,15,38,25],[45,17,38,27,"undefined"],[45,26,38,36],[45,28,38,38,"undefined"],[45,37,38,47],[45,39,38,49],[45,51,38,61],[46,16,38,63],[46,23,38,70,"groups"],[46,29,38,76],[46,30,38,77,"delete"],[46,36,38,83],[46,37,38,84,"key_1"],[46,42,38,89],[46,43,38,90],[47,14,38,92],[47,15,38,93],[47,16,38,94],[48,14,39,24,"groupBySourceSubscriber"],[48,37,39,47],[48,38,39,48,"add"],[48,41,39,51],[48,42,39,52,"innerFrom_1"],[48,53,39,63],[48,54,39,64,"innerFrom"],[48,63,39,73],[48,64,39,74,"duration"],[48,72,39,82],[48,73,39,83,"grouped"],[48,80,39,90],[48,81,39,91],[48,82,39,92],[48,83,39,93,"subscribe"],[48,92,39,102],[48,93,39,103,"durationSubscriber_1"],[48,113,39,123],[48,114,39,124],[48,115,39,125],[49,12,40,20],[50,10,41,16],[51,10,42,16,"group_1"],[51,17,42,23],[51,18,42,24,"next"],[51,22,42,28],[51,23,42,29,"element"],[51,30,42,36],[51,33,42,39,"element"],[51,40,42,46],[51,41,42,47,"value"],[51,46,42,52],[51,47,42,53],[51,50,42,56,"value"],[51,55,42,61],[51,56,42,62],[52,8,43,12],[52,9,43,13],[52,10,44,12],[52,17,44,19,"err"],[52,20,44,22],[52,22,44,24],[53,10,45,16,"handleError"],[53,21,45,27],[53,22,45,28,"err"],[53,25,45,31],[53,26,45,32],[54,8,46,12],[55,6,47,8],[55,7,47,9],[55,9,47,11],[55,21,47,23],[56,8,47,25],[56,15,47,32,"notify"],[56,21,47,38],[56,22,47,39],[56,32,47,49,"consumer"],[56,40,47,57],[56,42,47,59],[57,10,47,61],[57,17,47,68,"consumer"],[57,25,47,76],[57,26,47,77,"complete"],[57,34,47,85],[57,35,47,86],[57,36,47,87],[58,8,47,89],[58,9,47,90],[58,10,47,91],[59,6,47,93],[59,7,47,94],[59,9,47,96,"handleError"],[59,20,47,107],[59,22,47,109],[59,34,47,121],[60,8,47,123],[60,15,47,130,"groups"],[60,21,47,136],[60,22,47,137,"clear"],[60,27,47,142],[60,28,47,143],[60,29,47,144],[61,6,47,146],[61,7,47,147],[61,9,47,149],[61,21,47,161],[62,8,48,12,"teardownAttempted"],[62,25,48,29],[62,28,48,32],[62,32,48,36],[63,8,49,12],[63,15,49,19,"activeGroups"],[63,27,49,31],[63,32,49,36],[63,33,49,37],[64,6,50,8],[64,7,50,9],[64,8,50,10],[65,6,51,8,"source"],[65,12,51,14],[65,13,51,15,"subscribe"],[65,22,51,24],[65,23,51,25,"groupBySourceSubscriber"],[65,46,51,48],[65,47,51,49],[66,6,52,8],[66,15,52,17,"createGroupedObservable"],[66,38,52,40,"createGroupedObservable"],[66,39,52,41,"key"],[66,42,52,44],[66,44,52,46,"groupSubject"],[66,56,52,58],[66,58,52,60],[67,8,53,12],[67,12,53,16,"result"],[67,18,53,22],[67,21,53,25],[67,25,53,29,"Observable_1"],[67,37,53,41],[67,38,53,42,"Observable"],[67,48,53,52],[67,49,53,53],[67,59,53,63,"groupSubscriber"],[67,74,53,78],[67,76,53,80],[68,10,54,16,"activeGroups"],[68,22,54,28],[68,24,54,30],[69,10,55,16],[69,14,55,20,"innerSub"],[69,22,55,28],[69,25,55,31,"groupSubject"],[69,37,55,43],[69,38,55,44,"subscribe"],[69,47,55,53],[69,48,55,54,"groupSubscriber"],[69,63,55,69],[69,64,55,70],[70,10,56,16],[70,17,56,23],[70,29,56,35],[71,12,57,20,"innerSub"],[71,20,57,28],[71,21,57,29,"unsubscribe"],[71,32,57,40],[71,33,57,41],[71,34,57,42],[72,12,58,20],[72,14,58,22,"activeGroups"],[72,26,58,34],[72,31,58,39],[72,32,58,40],[72,36,58,44,"teardownAttempted"],[72,53,58,61],[72,57,58,65,"groupBySourceSubscriber"],[72,80,58,88],[72,81,58,89,"unsubscribe"],[72,92,58,100],[72,93,58,101],[72,94,58,102],[73,10,59,16],[73,11,59,17],[74,8,60,12],[74,9,60,13],[74,10,60,14],[75,8,61,12,"result"],[75,14,61,18],[75,15,61,19,"key"],[75,18,61,22],[75,21,61,25,"key"],[75,24,61,28],[76,8,62,12],[76,15,62,19,"result"],[76,21,62,25],[77,6,63,8],[78,4,64,4],[78,5,64,5],[78,6,64,6],[79,2,65,0],[80,2,66,0,"exports"],[80,9,66,7],[80,10,66,8,"groupBy"],[80,17,66,15],[80,20,66,18,"groupBy"],[80,27,66,25],[81,0,66,26],[81,3]],"functionMap":{"names":["<global>","groupBy","lift_1.operate$argument_0","notify","handleError","notify$argument_0","OperatorSubscriber_1.OperatorSubscriber$argument_1","OperatorSubscriber_1.createOperatorSubscriber$argument_1","OperatorSubscriber_1.createOperatorSubscriber$argument_4","OperatorSubscriber_1.OperatorSubscriber$argument_2","OperatorSubscriber_1.OperatorSubscriber$argument_4","OperatorSubscriber_1.OperatorSubscriber$argument_5","createGroupedObservable","Observable_1.Observable$argument_0","<anonymous>"],"mappings":"AAA;ACQ;0BCC;qBCS;SDG;0BEC,+BC,mDD,IF;8FIG;0GCS;yBDG,wBE,4CF;SJS,EO,4BJ,mDI,IP,eQ,sCR,ES;STG;QUE;qDCC;uBCG;iBDG;aDC;SVG;KDC;CDC"},"hasCjsExports":true},"type":"js/module"}]}
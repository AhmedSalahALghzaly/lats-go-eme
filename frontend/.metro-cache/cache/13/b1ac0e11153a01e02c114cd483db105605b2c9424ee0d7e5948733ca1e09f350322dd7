{"dependencies":[{"name":"expo-image-manipulator","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":156},"end":{"line":6,"column":59,"index":215}}],"key":"jSCgza62Lmd+veZCOu0xCYv/BW8=","exportNames":["*"],"imports":1}},{"name":"expo-file-system","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":216},"end":{"line":7,"column":47,"index":263}}],"key":"6GyvFG3BsQPSqqu9QRKJ8hfZxPw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  Object.defineProperty(exports, \"imageCompressionService\", {\n    enumerable: true,\n    get: function () {\n      return imageCompressionService;\n    }\n  });\n  var _expoImageManipulator = require(_dependencyMap[0], \"expo-image-manipulator\");\n  var ImageManipulator = _interopNamespace(_expoImageManipulator);\n  var _expoFileSystem = require(_dependencyMap[1], \"expo-file-system\");\n  var FileSystem = _interopNamespace(_expoFileSystem);\n  /**\n   * Image Compression Service\n   * Compresses images >1MB by 50% while preserving PNG format\n   * Uses expo-image-manipulator for client-side processing\n   */\n\n  // 1MB threshold in bytes\n  const SIZE_THRESHOLD_BYTES = 1 * 1024 * 1024;\n\n  // Compression quality (50% = 0.5)\n  const COMPRESSION_QUALITY = 0.5;\n  class ImageCompressionService {\n    /**\n     * Get the file size of an image from its URI\n     */\n    async getImageSize(uri) {\n      try {\n        // Handle base64 images\n        if (uri.startsWith('data:image')) {\n          const base64Data = uri.split(',')[1];\n          // Each base64 character represents 6 bits, so multiply by 3/4 to get bytes\n          return Math.ceil(base64Data.length * 3 / 4);\n        }\n\n        // Handle file URIs\n        const info = await FileSystem.getInfoAsync(uri);\n        return info.exists ? info.size || 0 : 0;\n      } catch (error) {\n        console.error('[ImageCompression] Error getting image size:', error);\n        return 0;\n      }\n    }\n\n    /**\n     * Detect if image is PNG based on URI or base64 data\n     */\n    isPngImage(uri) {\n      // Check URI extension\n      if (uri.toLowerCase().endsWith('.png')) return true;\n\n      // Check base64 header\n      if (uri.startsWith('data:image/png')) return true;\n      return false;\n    }\n\n    /**\n     * Compress an image if it exceeds 1MB\n     * CRITICAL FIX: Always preserves PNG format with transparency (alpha channel)\n     * For PNG images, we use resize-based compression to maintain lossless quality\n     */\n    async compressImage(uri, preserveFormat = true) {\n      try {\n        const originalSize = await this.getImageSize(uri);\n        const isPng = this.isPngImage(uri);\n\n        // CRITICAL: Always use PNG format for PNG images to preserve transparency\n        // JPEG format loses alpha channel causing black backgrounds\n        const outputFormat = isPng ? ImageManipulator.SaveFormat.PNG : ImageManipulator.SaveFormat.JPEG;\n        console.log(`[ImageCompression] Processing image: ${originalSize} bytes, format: ${isPng ? 'PNG (preserving alpha)' : 'JPEG'}`);\n\n        // If image is under threshold, return original with preserved format\n        if (originalSize < SIZE_THRESHOLD_BYTES) {\n          console.log('[ImageCompression] Image under 1MB, skipping compression (format preserved)');\n\n          // Get image dimensions - use PNG format for PNG images to preserve transparency\n          const info = await ImageManipulator.manipulateAsync(uri, [], {\n            base64: true,\n            format: outputFormat\n          });\n          return {\n            uri: info.uri,\n            base64: info.base64,\n            width: info.width,\n            height: info.height,\n            originalSize,\n            compressedSize: originalSize,\n            compressionRatio: 1,\n            format: isPng ? 'png' : 'jpeg',\n            wasCompressed: false\n          };\n        }\n\n        // Compress the image by 50%\n        console.log('[ImageCompression] Compressing image by 50%...');\n\n        // For PNG: We use resize to reduce file size while preserving transparency\n        // PNG is lossless, so quality/compress doesn't apply - we reduce dimensions\n        // For JPEG: We use compress quality parameter\n        let manipulatedImage;\n        if (isPng) {\n          // PNG COMPRESSION: Reduce dimensions to achieve ~50% file size reduction\n          // This preserves the alpha channel (transparency) unlike JPEG conversion\n          const scaleFactor = Math.sqrt(COMPRESSION_QUALITY); // ~0.707 for 50% reduction\n\n          // First get current dimensions\n          const dimensionInfo = await ImageManipulator.manipulateAsync(uri, [], {\n            format: ImageManipulator.SaveFormat.PNG\n          });\n\n          // Calculate new dimensions\n          const newWidth = Math.max(Math.floor(dimensionInfo.width * scaleFactor), 100);\n          const newHeight = Math.max(Math.floor(dimensionInfo.height * scaleFactor), 100);\n          console.log(`[ImageCompression] PNG resize: ${dimensionInfo.width}x${dimensionInfo.height} -> ${newWidth}x${newHeight}`);\n\n          // Resize with PNG format to preserve transparency\n          manipulatedImage = await ImageManipulator.manipulateAsync(uri, [{\n            resize: {\n              width: newWidth,\n              height: newHeight\n            }\n          }], {\n            format: ImageManipulator.SaveFormat.PNG,\n            base64: true\n          });\n        } else {\n          // JPEG COMPRESSION: Use compress quality parameter\n          manipulatedImage = await ImageManipulator.manipulateAsync(uri, [], {\n            compress: COMPRESSION_QUALITY,\n            format: ImageManipulator.SaveFormat.JPEG,\n            base64: true\n          });\n        }\n\n        // Calculate compressed size from base64\n        const compressedSize = manipulatedImage.base64 ? Math.ceil(manipulatedImage.base64.length * 3 / 4) : await this.getImageSize(manipulatedImage.uri);\n        const compressionRatio = originalSize > 0 ? compressedSize / originalSize : 1;\n        console.log(`[ImageCompression] Compressed: ${originalSize} -> ${compressedSize} bytes (${(compressionRatio * 100).toFixed(1)}%)`);\n        console.log(`[ImageCompression] Output format: ${isPng ? 'PNG (alpha preserved)' : 'JPEG'}`);\n        return {\n          uri: manipulatedImage.uri,\n          base64: manipulatedImage.base64,\n          width: manipulatedImage.width,\n          height: manipulatedImage.height,\n          originalSize,\n          compressedSize,\n          compressionRatio,\n          format: isPng ? 'png' : 'jpeg',\n          wasCompressed: true\n        };\n      } catch (error) {\n        console.error('[ImageCompression] Compression failed:', error);\n        throw error;\n      }\n    }\n\n    /**\n     * Compress multiple images\n     */\n    async compressImages(uris) {\n      const results = [];\n      for (const uri of uris) {\n        try {\n          const result = await this.compressImage(uri);\n          results.push(result);\n        } catch (error) {\n          console.error(`[ImageCompression] Failed to compress image: ${uri}`, error);\n        }\n      }\n      return results;\n    }\n\n    /**\n     * Convert image to base64 with optional compression\n     */\n    async toBase64WithCompression(uri) {\n      try {\n        const result = await this.compressImage(uri);\n        if (result.base64) {\n          const mimeType = result.format === 'png' ? 'image/png' : 'image/jpeg';\n          return `data:${mimeType};base64,${result.base64}`;\n        }\n        return null;\n      } catch (error) {\n        console.error('[ImageCompression] Failed to convert to base64:', error);\n        return null;\n      }\n    }\n\n    /**\n     * Resize image to specific dimensions while maintaining aspect ratio\n     */\n    async resizeImage(uri, maxWidth, maxHeight, preserveFormat = true) {\n      try {\n        const isPng = this.isPngImage(uri);\n        const outputFormat = preserveFormat && isPng ? ImageManipulator.SaveFormat.PNG : ImageManipulator.SaveFormat.JPEG;\n        const originalSize = await this.getImageSize(uri);\n\n        // Get original dimensions\n        const originalImage = await ImageManipulator.manipulateAsync(uri, [], {});\n        const {\n          width: origWidth,\n          height: origHeight\n        } = originalImage;\n\n        // Calculate new dimensions maintaining aspect ratio\n        let newWidth = origWidth;\n        let newHeight = origHeight;\n        if (origWidth > maxWidth || origHeight > maxHeight) {\n          const widthRatio = maxWidth / origWidth;\n          const heightRatio = maxHeight / origHeight;\n          const ratio = Math.min(widthRatio, heightRatio);\n          newWidth = Math.floor(origWidth * ratio);\n          newHeight = Math.floor(origHeight * ratio);\n        }\n\n        // Resize\n        const resizedImage = await ImageManipulator.manipulateAsync(uri, [{\n          resize: {\n            width: newWidth,\n            height: newHeight\n          }\n        }], {\n          format: outputFormat,\n          compress: isPng ? 1 : COMPRESSION_QUALITY,\n          base64: true\n        });\n        const compressedSize = resizedImage.base64 ? Math.ceil(resizedImage.base64.length * 3 / 4) : await this.getImageSize(resizedImage.uri);\n        return {\n          uri: resizedImage.uri,\n          base64: resizedImage.base64,\n          width: resizedImage.width,\n          height: resizedImage.height,\n          originalSize,\n          compressedSize,\n          compressionRatio: originalSize > 0 ? compressedSize / originalSize : 1,\n          format: isPng && preserveFormat ? 'png' : 'jpeg',\n          wasCompressed: newWidth !== origWidth || newHeight !== origHeight\n        };\n      } catch (error) {\n        console.error('[ImageCompression] Resize failed:', error);\n        throw error;\n      }\n    }\n\n    /**\n     * Compress for upload - combines resize and quality compression\n     */\n    async compressForUpload(uri, options = {}) {\n      const {\n        maxWidth = 1920,\n        maxHeight = 1080,\n        preserveFormat = true\n      } = options;\n      try {\n        const originalSize = await this.getImageSize(uri);\n        const isPng = this.isPngImage(uri);\n\n        // First resize if needed\n        const resized = await this.resizeImage(uri, maxWidth, maxHeight, preserveFormat);\n\n        // Then compress if still over threshold\n        if (resized.compressedSize > SIZE_THRESHOLD_BYTES) {\n          return await this.compressImage(resized.uri, preserveFormat);\n        }\n        return resized;\n      } catch (error) {\n        console.error('[ImageCompression] CompressForUpload failed:', error);\n        throw error;\n      }\n    }\n  }\n  const imageCompressionService = new ImageCompressionService();\n  var _default = imageCompressionService;\n});","lineCount":301,"map":[[22,2,307,0,"Object"],[22,8,307,0],[22,9,307,0,"defineProperty"],[22,23,307,0],[22,24,307,0,"exports"],[22,31,307,0],[23,4,307,0,"enumerable"],[23,14,307,0],[24,4,307,0,"get"],[24,7,307,0],[24,18,307,0,"get"],[24,19,307,0],[25,6,307,0],[25,13,307,0,"_default"],[25,21,307,0],[26,4,307,0],[27,2,307,0],[28,2,306,0,"Object"],[28,8,306,0],[28,9,306,0,"defineProperty"],[28,23,306,0],[28,24,306,0,"exports"],[28,31,306,0],[29,4,306,0,"enumerable"],[29,14,306,0],[30,4,306,0,"get"],[30,7,306,0],[30,18,306,0,"get"],[30,19,306,0],[31,6,306,0],[31,13,306,0,"imageCompressionService"],[31,36,306,0],[32,4,306,0],[33,2,306,0],[34,2,6,0],[34,6,6,0,"_expoImageManipulator"],[34,27,6,0],[34,30,6,0,"require"],[34,37,6,0],[34,38,6,0,"_dependencyMap"],[34,52,6,0],[35,2,6,0],[35,6,6,0,"ImageManipulator"],[35,22,6,0],[35,25,6,0,"_interopNamespace"],[35,42,6,0],[35,43,6,0,"_expoImageManipulator"],[35,64,6,0],[36,2,7,0],[36,6,7,0,"_expoFileSystem"],[36,21,7,0],[36,24,7,0,"require"],[36,31,7,0],[36,32,7,0,"_dependencyMap"],[36,46,7,0],[37,2,7,0],[37,6,7,0,"FileSystem"],[37,16,7,0],[37,19,7,0,"_interopNamespace"],[37,36,7,0],[37,37,7,0,"_expoFileSystem"],[37,52,7,0],[38,2,1,0],[39,0,2,0],[40,0,3,0],[41,0,4,0],[42,0,5,0],[44,2,21,0],[45,2,22,0],[45,8,22,6,"SIZE_THRESHOLD_BYTES"],[45,28,22,26],[45,31,22,29],[45,32,22,30],[45,35,22,33],[45,39,22,37],[45,42,22,40],[45,46,22,44],[47,2,24,0],[48,2,25,0],[48,8,25,6,"COMPRESSION_QUALITY"],[48,27,25,25],[48,30,25,28],[48,33,25,31],[49,2,27,0],[49,8,27,6,"ImageCompressionService"],[49,31,27,29],[49,32,27,30],[50,4,28,2],[51,0,29,0],[52,0,30,0],[53,4,31,2],[53,10,31,8,"getImageSize"],[53,22,31,20,"getImageSize"],[53,23,31,21,"uri"],[53,26,31,32],[53,28,31,51],[54,6,32,4],[54,10,32,8],[55,8,33,6],[56,8,34,6],[56,12,34,10,"uri"],[56,15,34,13],[56,16,34,14,"startsWith"],[56,26,34,24],[56,27,34,25],[56,39,34,37],[56,40,34,38],[56,42,34,40],[57,10,35,8],[57,16,35,14,"base64Data"],[57,26,35,24],[57,29,35,27,"uri"],[57,32,35,30],[57,33,35,31,"split"],[57,38,35,36],[57,39,35,37],[57,42,35,40],[57,43,35,41],[57,44,35,42],[57,45,35,43],[57,46,35,44],[58,10,36,8],[59,10,37,8],[59,17,37,15,"Math"],[59,21,37,19],[59,22,37,20,"ceil"],[59,26,37,24],[59,27,37,26,"base64Data"],[59,37,37,36],[59,38,37,37,"length"],[59,44,37,43],[59,47,37,46],[59,48,37,47],[59,51,37,51],[59,52,37,52],[59,53,37,53],[60,8,38,6],[62,8,40,6],[63,8,41,6],[63,14,41,12,"info"],[63,18,41,16],[63,21,41,19],[63,27,41,25,"FileSystem"],[63,37,41,35],[63,38,41,36,"getInfoAsync"],[63,50,41,48],[63,51,41,49,"uri"],[63,54,41,52],[63,55,41,53],[64,8,42,6],[64,15,42,13,"info"],[64,19,42,17],[64,20,42,18,"exists"],[64,26,42,24],[64,29,42,28,"info"],[64,33,42,32],[64,34,42,33,"size"],[64,38,42,37],[64,42,42,41],[64,43,42,42],[64,46,42,46],[64,47,42,47],[65,6,43,4],[65,7,43,5],[65,8,43,6],[65,15,43,13,"error"],[65,20,43,18],[65,22,43,20],[66,8,44,6,"console"],[66,15,44,13],[66,16,44,14,"error"],[66,21,44,19],[66,22,44,20],[66,68,44,66],[66,70,44,68,"error"],[66,75,44,73],[66,76,44,74],[67,8,45,6],[67,15,45,13],[67,16,45,14],[68,6,46,4],[69,4,47,2],[71,4,49,2],[72,0,50,0],[73,0,51,0],[74,4,52,2,"isPngImage"],[74,14,52,12,"isPngImage"],[74,15,52,13,"uri"],[74,18,52,24],[74,20,52,35],[75,6,53,4],[76,6,54,4],[76,10,54,8,"uri"],[76,13,54,11],[76,14,54,12,"toLowerCase"],[76,25,54,23],[76,26,54,24],[76,27,54,25],[76,28,54,26,"endsWith"],[76,36,54,34],[76,37,54,35],[76,43,54,41],[76,44,54,42],[76,46,54,44],[76,53,54,51],[76,57,54,55],[78,6,56,4],[79,6,57,4],[79,10,57,8,"uri"],[79,13,57,11],[79,14,57,12,"startsWith"],[79,24,57,22],[79,25,57,23],[79,41,57,39],[79,42,57,40],[79,44,57,42],[79,51,57,49],[79,55,57,53],[80,6,59,4],[80,13,59,11],[80,18,59,16],[81,4,60,2],[83,4,62,2],[84,0,63,0],[85,0,64,0],[86,0,65,0],[87,0,66,0],[88,4,67,2],[88,10,67,8,"compressImage"],[88,23,67,21,"compressImage"],[88,24,67,22,"uri"],[88,27,67,33],[88,29,67,35,"preserveFormat"],[88,43,67,58],[88,46,67,61],[88,50,67,65],[88,52,67,95],[89,6,68,4],[89,10,68,8],[90,8,69,6],[90,14,69,12,"originalSize"],[90,26,69,24],[90,29,69,27],[90,35,69,33],[90,39,69,37],[90,40,69,38,"getImageSize"],[90,52,69,50],[90,53,69,51,"uri"],[90,56,69,54],[90,57,69,55],[91,8,70,6],[91,14,70,12,"isPng"],[91,19,70,17],[91,22,70,20],[91,26,70,24],[91,27,70,25,"isPngImage"],[91,37,70,35],[91,38,70,36,"uri"],[91,41,70,39],[91,42,70,40],[93,8,72,6],[94,8,73,6],[95,8,74,6],[95,14,74,12,"outputFormat"],[95,26,74,24],[95,29,74,27,"isPng"],[95,34,74,32],[95,37,74,35,"ImageManipulator"],[95,53,74,51],[95,54,74,52,"SaveFormat"],[95,64,74,62],[95,65,74,63,"PNG"],[95,68,74,66],[95,71,74,69,"ImageManipulator"],[95,87,74,85],[95,88,74,86,"SaveFormat"],[95,98,74,96],[95,99,74,97,"JPEG"],[95,103,74,101],[96,8,76,6,"console"],[96,15,76,13],[96,16,76,14,"log"],[96,19,76,17],[96,20,76,18],[96,60,76,58,"originalSize"],[96,72,76,70],[96,91,76,89,"isPng"],[96,96,76,94],[96,99,76,97],[96,123,76,121],[96,126,76,124],[96,132,76,130],[96,134,76,132],[96,135,76,133],[98,8,78,6],[99,8,79,6],[99,12,79,10,"originalSize"],[99,24,79,22],[99,27,79,25,"SIZE_THRESHOLD_BYTES"],[99,47,79,45],[99,49,79,47],[100,10,80,8,"console"],[100,17,80,15],[100,18,80,16,"log"],[100,21,80,19],[100,22,80,20],[100,99,80,97],[100,100,80,98],[102,10,82,8],[103,10,83,8],[103,16,83,14,"info"],[103,20,83,18],[103,23,83,21],[103,29,83,27,"ImageManipulator"],[103,45,83,43],[103,46,83,44,"manipulateAsync"],[103,61,83,59],[103,62,84,10,"uri"],[103,65,84,13],[103,67,85,10],[103,69,85,12],[103,71,86,10],[104,12,87,12,"base64"],[104,18,87,18],[104,20,87,20],[104,24,87,24],[105,12,88,12,"format"],[105,18,88,18],[105,20,88,20,"outputFormat"],[106,10,89,10],[106,11,90,8],[106,12,90,9],[107,10,92,8],[107,17,92,15],[108,12,93,10,"uri"],[108,15,93,13],[108,17,93,15,"info"],[108,21,93,19],[108,22,93,20,"uri"],[108,25,93,23],[109,12,94,10,"base64"],[109,18,94,16],[109,20,94,18,"info"],[109,24,94,22],[109,25,94,23,"base64"],[109,31,94,29],[110,12,95,10,"width"],[110,17,95,15],[110,19,95,17,"info"],[110,23,95,21],[110,24,95,22,"width"],[110,29,95,27],[111,12,96,10,"height"],[111,18,96,16],[111,20,96,18,"info"],[111,24,96,22],[111,25,96,23,"height"],[111,31,96,29],[112,12,97,10,"originalSize"],[112,24,97,22],[113,12,98,10,"compressedSize"],[113,26,98,24],[113,28,98,26,"originalSize"],[113,40,98,38],[114,12,99,10,"compressionRatio"],[114,28,99,26],[114,30,99,28],[114,31,99,29],[115,12,100,10,"format"],[115,18,100,16],[115,20,100,18,"isPng"],[115,25,100,23],[115,28,100,26],[115,33,100,31],[115,36,100,34],[115,42,100,40],[116,12,101,10,"wasCompressed"],[116,25,101,23],[116,27,101,25],[117,10,102,8],[117,11,102,9],[118,8,103,6],[120,8,105,6],[121,8,106,6,"console"],[121,15,106,13],[121,16,106,14,"log"],[121,19,106,17],[121,20,106,18],[121,68,106,66],[121,69,106,67],[123,8,108,6],[124,8,109,6],[125,8,110,6],[126,8,111,6],[126,12,111,10,"manipulatedImage"],[126,28,111,26],[127,8,113,6],[127,12,113,10,"isPng"],[127,17,113,15],[127,19,113,17],[128,10,114,8],[129,10,115,8],[130,10,116,8],[130,16,116,14,"scaleFactor"],[130,27,116,25],[130,30,116,28,"Math"],[130,34,116,32],[130,35,116,33,"sqrt"],[130,39,116,37],[130,40,116,38,"COMPRESSION_QUALITY"],[130,59,116,57],[130,60,116,58],[130,61,116,59],[130,62,116,60],[132,10,118,8],[133,10,119,8],[133,16,119,14,"dimensionInfo"],[133,29,119,27],[133,32,119,30],[133,38,119,36,"ImageManipulator"],[133,54,119,52],[133,55,119,53,"manipulateAsync"],[133,70,119,68],[133,71,120,10,"uri"],[133,74,120,13],[133,76,121,10],[133,78,121,12],[133,80,122,10],[134,12,122,12,"format"],[134,18,122,18],[134,20,122,20,"ImageManipulator"],[134,36,122,36],[134,37,122,37,"SaveFormat"],[134,47,122,47],[134,48,122,48,"PNG"],[135,10,122,52],[135,11,123,8],[135,12,123,9],[137,10,125,8],[138,10,126,8],[138,16,126,14,"newWidth"],[138,24,126,22],[138,27,126,25,"Math"],[138,31,126,29],[138,32,126,30,"max"],[138,35,126,33],[138,36,126,34,"Math"],[138,40,126,38],[138,41,126,39,"floor"],[138,46,126,44],[138,47,126,45,"dimensionInfo"],[138,60,126,58],[138,61,126,59,"width"],[138,66,126,64],[138,69,126,67,"scaleFactor"],[138,80,126,78],[138,81,126,79],[138,83,126,81],[138,86,126,84],[138,87,126,85],[139,10,127,8],[139,16,127,14,"newHeight"],[139,25,127,23],[139,28,127,26,"Math"],[139,32,127,30],[139,33,127,31,"max"],[139,36,127,34],[139,37,127,35,"Math"],[139,41,127,39],[139,42,127,40,"floor"],[139,47,127,45],[139,48,127,46,"dimensionInfo"],[139,61,127,59],[139,62,127,60,"height"],[139,68,127,66],[139,71,127,69,"scaleFactor"],[139,82,127,80],[139,83,127,81],[139,85,127,83],[139,88,127,86],[139,89,127,87],[140,10,129,8,"console"],[140,17,129,15],[140,18,129,16,"log"],[140,21,129,19],[140,22,129,20],[140,56,129,54,"dimensionInfo"],[140,69,129,67],[140,70,129,68,"width"],[140,75,129,73],[140,79,129,77,"dimensionInfo"],[140,92,129,90],[140,93,129,91,"height"],[140,99,129,97],[140,106,129,104,"newWidth"],[140,114,129,112],[140,118,129,116,"newHeight"],[140,127,129,125],[140,129,129,127],[140,130,129,128],[142,10,131,8],[143,10,132,8,"manipulatedImage"],[143,26,132,24],[143,29,132,27],[143,35,132,33,"ImageManipulator"],[143,51,132,49],[143,52,132,50,"manipulateAsync"],[143,67,132,65],[143,68,133,10,"uri"],[143,71,133,13],[143,73,134,10],[143,74,134,11],[144,12,134,13,"resize"],[144,18,134,19],[144,20,134,21],[145,14,134,23,"width"],[145,19,134,28],[145,21,134,30,"newWidth"],[145,29,134,38],[146,14,134,40,"height"],[146,20,134,46],[146,22,134,48,"newHeight"],[147,12,134,58],[148,10,134,60],[148,11,134,61],[148,12,134,62],[148,14,135,10],[149,12,135,12,"format"],[149,18,135,18],[149,20,135,20,"ImageManipulator"],[149,36,135,36],[149,37,135,37,"SaveFormat"],[149,47,135,47],[149,48,135,48,"PNG"],[149,51,135,51],[150,12,135,53,"base64"],[150,18,135,59],[150,20,135,61],[151,10,135,66],[151,11,136,8],[151,12,136,9],[152,8,137,6],[152,9,137,7],[152,15,137,13],[153,10,138,8],[154,10,139,8,"manipulatedImage"],[154,26,139,24],[154,29,139,27],[154,35,139,33,"ImageManipulator"],[154,51,139,49],[154,52,139,50,"manipulateAsync"],[154,67,139,65],[154,68,140,10,"uri"],[154,71,140,13],[154,73,141,10],[154,75,141,12],[154,77,142,10],[155,12,142,12,"compress"],[155,20,142,20],[155,22,142,22,"COMPRESSION_QUALITY"],[155,41,142,41],[156,12,142,43,"format"],[156,18,142,49],[156,20,142,51,"ImageManipulator"],[156,36,142,67],[156,37,142,68,"SaveFormat"],[156,47,142,78],[156,48,142,79,"JPEG"],[156,52,142,83],[157,12,142,85,"base64"],[157,18,142,91],[157,20,142,93],[158,10,142,98],[158,11,143,8],[158,12,143,9],[159,8,144,6],[161,8,146,6],[162,8,147,6],[162,14,147,12,"compressedSize"],[162,28,147,26],[162,31,147,29,"manipulatedImage"],[162,47,147,45],[162,48,147,46,"base64"],[162,54,147,52],[162,57,148,10,"Math"],[162,61,148,14],[162,62,148,15,"ceil"],[162,66,148,19],[162,67,148,21,"manipulatedImage"],[162,83,148,37],[162,84,148,38,"base64"],[162,90,148,44],[162,91,148,45,"length"],[162,97,148,51],[162,100,148,54],[162,101,148,55],[162,104,148,59],[162,105,148,60],[162,106,148,61],[162,109,149,10],[162,115,149,16],[162,119,149,20],[162,120,149,21,"getImageSize"],[162,132,149,33],[162,133,149,34,"manipulatedImage"],[162,149,149,50],[162,150,149,51,"uri"],[162,153,149,54],[162,154,149,55],[163,8,151,6],[163,14,151,12,"compressionRatio"],[163,30,151,28],[163,33,151,31,"originalSize"],[163,45,151,43],[163,48,151,46],[163,49,151,47],[163,52,151,50,"compressedSize"],[163,66,151,64],[163,69,151,67,"originalSize"],[163,81,151,79],[163,84,151,82],[163,85,151,83],[164,8,153,6,"console"],[164,15,153,13],[164,16,153,14,"log"],[164,19,153,17],[164,20,153,18],[164,54,153,52,"originalSize"],[164,66,153,64],[164,73,153,71,"compressedSize"],[164,87,153,85],[164,98,153,96],[164,99,153,97,"compressionRatio"],[164,115,153,113],[164,118,153,116],[164,121,153,119],[164,123,153,121,"toFixed"],[164,130,153,128],[164,131,153,129],[164,132,153,130],[164,133,153,131],[164,137,153,135],[164,138,153,136],[165,8,154,6,"console"],[165,15,154,13],[165,16,154,14,"log"],[165,19,154,17],[165,20,154,18],[165,57,154,55,"isPng"],[165,62,154,60],[165,65,154,63],[165,88,154,86],[165,91,154,89],[165,97,154,95],[165,99,154,97],[165,100,154,98],[166,8,156,6],[166,15,156,13],[167,10,157,8,"uri"],[167,13,157,11],[167,15,157,13,"manipulatedImage"],[167,31,157,29],[167,32,157,30,"uri"],[167,35,157,33],[168,10,158,8,"base64"],[168,16,158,14],[168,18,158,16,"manipulatedImage"],[168,34,158,32],[168,35,158,33,"base64"],[168,41,158,39],[169,10,159,8,"width"],[169,15,159,13],[169,17,159,15,"manipulatedImage"],[169,33,159,31],[169,34,159,32,"width"],[169,39,159,37],[170,10,160,8,"height"],[170,16,160,14],[170,18,160,16,"manipulatedImage"],[170,34,160,32],[170,35,160,33,"height"],[170,41,160,39],[171,10,161,8,"originalSize"],[171,22,161,20],[172,10,162,8,"compressedSize"],[172,24,162,22],[173,10,163,8,"compressionRatio"],[173,26,163,24],[174,10,164,8,"format"],[174,16,164,14],[174,18,164,16,"isPng"],[174,23,164,21],[174,26,164,24],[174,31,164,29],[174,34,164,32],[174,40,164,38],[175,10,165,8,"wasCompressed"],[175,23,165,21],[175,25,165,23],[176,8,166,6],[176,9,166,7],[177,6,167,4],[177,7,167,5],[177,8,167,6],[177,15,167,13,"error"],[177,20,167,18],[177,22,167,20],[178,8,168,6,"console"],[178,15,168,13],[178,16,168,14,"error"],[178,21,168,19],[178,22,168,20],[178,62,168,60],[178,64,168,62,"error"],[178,69,168,67],[178,70,168,68],[179,8,169,6],[179,14,169,12,"error"],[179,19,169,17],[180,6,170,4],[181,4,171,2],[183,4,173,2],[184,0,174,0],[185,0,175,0],[186,4,176,2],[186,10,176,8,"compressImages"],[186,24,176,22,"compressImages"],[186,25,176,23,"uris"],[186,29,176,37],[186,31,176,69],[187,6,177,4],[187,12,177,10,"results"],[187,19,177,38],[187,22,177,41],[187,24,177,43],[188,6,179,4],[188,11,179,9],[188,17,179,15,"uri"],[188,20,179,18],[188,24,179,22,"uris"],[188,28,179,26],[188,30,179,28],[189,8,180,6],[189,12,180,10],[190,10,181,8],[190,16,181,14,"result"],[190,22,181,20],[190,25,181,23],[190,31,181,29],[190,35,181,33],[190,36,181,34,"compressImage"],[190,49,181,47],[190,50,181,48,"uri"],[190,53,181,51],[190,54,181,52],[191,10,182,8,"results"],[191,17,182,15],[191,18,182,16,"push"],[191,22,182,20],[191,23,182,21,"result"],[191,29,182,27],[191,30,182,28],[192,8,183,6],[192,9,183,7],[192,10,183,8],[192,17,183,15,"error"],[192,22,183,20],[192,24,183,22],[193,10,184,8,"console"],[193,17,184,15],[193,18,184,16,"error"],[193,23,184,21],[193,24,184,22],[193,72,184,70,"uri"],[193,75,184,73],[193,77,184,75],[193,79,184,77,"error"],[193,84,184,82],[193,85,184,83],[194,8,185,6],[195,6,186,4],[196,6,188,4],[196,13,188,11,"results"],[196,20,188,18],[197,4,189,2],[199,4,191,2],[200,0,192,0],[201,0,193,0],[202,4,194,2],[202,10,194,8,"toBase64WithCompression"],[202,33,194,31,"toBase64WithCompression"],[202,34,194,32,"uri"],[202,37,194,43],[202,39,194,69],[203,6,195,4],[203,10,195,8],[204,8,196,6],[204,14,196,12,"result"],[204,20,196,18],[204,23,196,21],[204,29,196,27],[204,33,196,31],[204,34,196,32,"compressImage"],[204,47,196,45],[204,48,196,46,"uri"],[204,51,196,49],[204,52,196,50],[205,8,198,6],[205,12,198,10,"result"],[205,18,198,16],[205,19,198,17,"base64"],[205,25,198,23],[205,27,198,25],[206,10,199,8],[206,16,199,14,"mimeType"],[206,24,199,22],[206,27,199,25,"result"],[206,33,199,31],[206,34,199,32,"format"],[206,40,199,38],[206,45,199,43],[206,50,199,48],[206,53,199,51],[206,64,199,62],[206,67,199,65],[206,79,199,77],[207,10,200,8],[207,17,200,15],[207,25,200,23,"mimeType"],[207,33,200,31],[207,44,200,42,"result"],[207,50,200,48],[207,51,200,49,"base64"],[207,57,200,55],[207,59,200,57],[208,8,201,6],[209,8,203,6],[209,15,203,13],[209,19,203,17],[210,6,204,4],[210,7,204,5],[210,8,204,6],[210,15,204,13,"error"],[210,20,204,18],[210,22,204,20],[211,8,205,6,"console"],[211,15,205,13],[211,16,205,14,"error"],[211,21,205,19],[211,22,205,20],[211,71,205,69],[211,73,205,71,"error"],[211,78,205,76],[211,79,205,77],[212,8,206,6],[212,15,206,13],[212,19,206,17],[213,6,207,4],[214,4,208,2],[216,4,210,2],[217,0,211,0],[218,0,212,0],[219,4,213,2],[219,10,213,8,"resizeImage"],[219,21,213,19,"resizeImage"],[219,22,214,4,"uri"],[219,25,214,15],[219,27,215,4,"maxWidth"],[219,35,215,20],[219,37,216,4,"maxHeight"],[219,46,216,21],[219,48,217,4,"preserveFormat"],[219,62,217,27],[219,65,217,30],[219,69,217,34],[219,71,218,32],[220,6,219,4],[220,10,219,8],[221,8,220,6],[221,14,220,12,"isPng"],[221,19,220,17],[221,22,220,20],[221,26,220,24],[221,27,220,25,"isPngImage"],[221,37,220,35],[221,38,220,36,"uri"],[221,41,220,39],[221,42,220,40],[222,8,221,6],[222,14,221,12,"outputFormat"],[222,26,221,24],[222,29,221,27,"preserveFormat"],[222,43,221,41],[222,47,221,45,"isPng"],[222,52,221,50],[222,55,221,53,"ImageManipulator"],[222,71,221,69],[222,72,221,70,"SaveFormat"],[222,82,221,80],[222,83,221,81,"PNG"],[222,86,221,84],[222,89,221,87,"ImageManipulator"],[222,105,221,103],[222,106,221,104,"SaveFormat"],[222,116,221,114],[222,117,221,115,"JPEG"],[222,121,221,119],[223,8,222,6],[223,14,222,12,"originalSize"],[223,26,222,24],[223,29,222,27],[223,35,222,33],[223,39,222,37],[223,40,222,38,"getImageSize"],[223,52,222,50],[223,53,222,51,"uri"],[223,56,222,54],[223,57,222,55],[225,8,224,6],[226,8,225,6],[226,14,225,12,"originalImage"],[226,27,225,25],[226,30,225,28],[226,36,225,34,"ImageManipulator"],[226,52,225,50],[226,53,225,51,"manipulateAsync"],[226,68,225,66],[226,69,225,67,"uri"],[226,72,225,70],[226,74,225,72],[226,76,225,74],[226,78,225,76],[226,79,225,77],[226,80,225,78],[226,81,225,79],[227,8,226,6],[227,14,226,12],[228,10,226,14,"width"],[228,15,226,19],[228,17,226,21,"origWidth"],[228,26,226,30],[229,10,226,32,"height"],[229,16,226,38],[229,18,226,40,"origHeight"],[230,8,226,51],[230,9,226,52],[230,12,226,55,"originalImage"],[230,25,226,68],[232,8,228,6],[233,8,229,6],[233,12,229,10,"newWidth"],[233,20,229,18],[233,23,229,21,"origWidth"],[233,32,229,30],[234,8,230,6],[234,12,230,10,"newHeight"],[234,21,230,19],[234,24,230,22,"origHeight"],[234,34,230,32],[235,8,232,6],[235,12,232,10,"origWidth"],[235,21,232,19],[235,24,232,22,"maxWidth"],[235,32,232,30],[235,36,232,34,"origHeight"],[235,46,232,44],[235,49,232,47,"maxHeight"],[235,58,232,56],[235,60,232,58],[236,10,233,8],[236,16,233,14,"widthRatio"],[236,26,233,24],[236,29,233,27,"maxWidth"],[236,37,233,35],[236,40,233,38,"origWidth"],[236,49,233,47],[237,10,234,8],[237,16,234,14,"heightRatio"],[237,27,234,25],[237,30,234,28,"maxHeight"],[237,39,234,37],[237,42,234,40,"origHeight"],[237,52,234,50],[238,10,235,8],[238,16,235,14,"ratio"],[238,21,235,19],[238,24,235,22,"Math"],[238,28,235,26],[238,29,235,27,"min"],[238,32,235,30],[238,33,235,31,"widthRatio"],[238,43,235,41],[238,45,235,43,"heightRatio"],[238,56,235,54],[238,57,235,55],[239,10,237,8,"newWidth"],[239,18,237,16],[239,21,237,19,"Math"],[239,25,237,23],[239,26,237,24,"floor"],[239,31,237,29],[239,32,237,30,"origWidth"],[239,41,237,39],[239,44,237,42,"ratio"],[239,49,237,47],[239,50,237,48],[240,10,238,8,"newHeight"],[240,19,238,17],[240,22,238,20,"Math"],[240,26,238,24],[240,27,238,25,"floor"],[240,32,238,30],[240,33,238,31,"origHeight"],[240,43,238,41],[240,46,238,44,"ratio"],[240,51,238,49],[240,52,238,50],[241,8,239,6],[243,8,241,6],[244,8,242,6],[244,14,242,12,"resizedImage"],[244,26,242,24],[244,29,242,27],[244,35,242,33,"ImageManipulator"],[244,51,242,49],[244,52,242,50,"manipulateAsync"],[244,67,242,65],[244,68,243,8,"uri"],[244,71,243,11],[244,73,244,8],[244,74,244,9],[245,10,244,11,"resize"],[245,16,244,17],[245,18,244,19],[246,12,244,21,"width"],[246,17,244,26],[246,19,244,28,"newWidth"],[246,27,244,36],[247,12,244,38,"height"],[247,18,244,44],[247,20,244,46,"newHeight"],[248,10,244,56],[249,8,244,58],[249,9,244,59],[249,10,244,60],[249,12,245,8],[250,10,246,10,"format"],[250,16,246,16],[250,18,246,18,"outputFormat"],[250,30,246,30],[251,10,247,10,"compress"],[251,18,247,18],[251,20,247,20,"isPng"],[251,25,247,25],[251,28,247,28],[251,29,247,29],[251,32,247,32,"COMPRESSION_QUALITY"],[251,51,247,51],[252,10,248,10,"base64"],[252,16,248,16],[252,18,248,18],[253,8,249,8],[253,9,250,6],[253,10,250,7],[254,8,252,6],[254,14,252,12,"compressedSize"],[254,28,252,26],[254,31,252,29,"resizedImage"],[254,43,252,41],[254,44,252,42,"base64"],[254,50,252,48],[254,53,253,10,"Math"],[254,57,253,14],[254,58,253,15,"ceil"],[254,62,253,19],[254,63,253,21,"resizedImage"],[254,75,253,33],[254,76,253,34,"base64"],[254,82,253,40],[254,83,253,41,"length"],[254,89,253,47],[254,92,253,50],[254,93,253,51],[254,96,253,55],[254,97,253,56],[254,98,253,57],[254,101,254,10],[254,107,254,16],[254,111,254,20],[254,112,254,21,"getImageSize"],[254,124,254,33],[254,125,254,34,"resizedImage"],[254,137,254,46],[254,138,254,47,"uri"],[254,141,254,50],[254,142,254,51],[255,8,256,6],[255,15,256,13],[256,10,257,8,"uri"],[256,13,257,11],[256,15,257,13,"resizedImage"],[256,27,257,25],[256,28,257,26,"uri"],[256,31,257,29],[257,10,258,8,"base64"],[257,16,258,14],[257,18,258,16,"resizedImage"],[257,30,258,28],[257,31,258,29,"base64"],[257,37,258,35],[258,10,259,8,"width"],[258,15,259,13],[258,17,259,15,"resizedImage"],[258,29,259,27],[258,30,259,28,"width"],[258,35,259,33],[259,10,260,8,"height"],[259,16,260,14],[259,18,260,16,"resizedImage"],[259,30,260,28],[259,31,260,29,"height"],[259,37,260,35],[260,10,261,8,"originalSize"],[260,22,261,20],[261,10,262,8,"compressedSize"],[261,24,262,22],[262,10,263,8,"compressionRatio"],[262,26,263,24],[262,28,263,26,"originalSize"],[262,40,263,38],[262,43,263,41],[262,44,263,42],[262,47,263,45,"compressedSize"],[262,61,263,59],[262,64,263,62,"originalSize"],[262,76,263,74],[262,79,263,77],[262,80,263,78],[263,10,264,8,"format"],[263,16,264,14],[263,18,264,16,"isPng"],[263,23,264,21],[263,27,264,25,"preserveFormat"],[263,41,264,39],[263,44,264,42],[263,49,264,47],[263,52,264,50],[263,58,264,56],[264,10,265,8,"wasCompressed"],[264,23,265,21],[264,25,265,23,"newWidth"],[264,33,265,31],[264,38,265,36,"origWidth"],[264,47,265,45],[264,51,265,49,"newHeight"],[264,60,265,58],[264,65,265,63,"origHeight"],[265,8,266,6],[265,9,266,7],[266,6,267,4],[266,7,267,5],[266,8,267,6],[266,15,267,13,"error"],[266,20,267,18],[266,22,267,20],[267,8,268,6,"console"],[267,15,268,13],[267,16,268,14,"error"],[267,21,268,19],[267,22,268,20],[267,57,268,55],[267,59,268,57,"error"],[267,64,268,62],[267,65,268,63],[268,8,269,6],[268,14,269,12,"error"],[268,19,269,17],[269,6,270,4],[270,4,271,2],[272,4,273,2],[273,0,274,0],[274,0,275,0],[275,4,276,2],[275,10,276,8,"compressForUpload"],[275,27,276,25,"compressForUpload"],[275,28,277,4,"uri"],[275,31,277,15],[275,33,278,4,"options"],[275,40,282,5],[275,43,282,8],[275,44,282,9],[275,45,282,10],[275,47,283,32],[276,6,284,4],[276,12,284,10],[277,8,284,12,"maxWidth"],[277,16,284,20],[277,19,284,23],[277,23,284,27],[278,8,284,29,"maxHeight"],[278,17,284,38],[278,20,284,41],[278,24,284,45],[279,8,284,47,"preserveFormat"],[279,22,284,61],[279,25,284,64],[280,6,284,69],[280,7,284,70],[280,10,284,73,"options"],[280,17,284,80],[281,6,286,4],[281,10,286,8],[282,8,287,6],[282,14,287,12,"originalSize"],[282,26,287,24],[282,29,287,27],[282,35,287,33],[282,39,287,37],[282,40,287,38,"getImageSize"],[282,52,287,50],[282,53,287,51,"uri"],[282,56,287,54],[282,57,287,55],[283,8,288,6],[283,14,288,12,"isPng"],[283,19,288,17],[283,22,288,20],[283,26,288,24],[283,27,288,25,"isPngImage"],[283,37,288,35],[283,38,288,36,"uri"],[283,41,288,39],[283,42,288,40],[285,8,290,6],[286,8,291,6],[286,14,291,12,"resized"],[286,21,291,19],[286,24,291,22],[286,30,291,28],[286,34,291,32],[286,35,291,33,"resizeImage"],[286,46,291,44],[286,47,291,45,"uri"],[286,50,291,48],[286,52,291,50,"maxWidth"],[286,60,291,58],[286,62,291,60,"maxHeight"],[286,71,291,69],[286,73,291,71,"preserveFormat"],[286,87,291,85],[286,88,291,86],[288,8,293,6],[289,8,294,6],[289,12,294,10,"resized"],[289,19,294,17],[289,20,294,18,"compressedSize"],[289,34,294,32],[289,37,294,35,"SIZE_THRESHOLD_BYTES"],[289,57,294,55],[289,59,294,57],[290,10,295,8],[290,17,295,15],[290,23,295,21],[290,27,295,25],[290,28,295,26,"compressImage"],[290,41,295,39],[290,42,295,40,"resized"],[290,49,295,47],[290,50,295,48,"uri"],[290,53,295,51],[290,55,295,53,"preserveFormat"],[290,69,295,67],[290,70,295,68],[291,8,296,6],[292,8,298,6],[292,15,298,13,"resized"],[292,22,298,20],[293,6,299,4],[293,7,299,5],[293,8,299,6],[293,15,299,13,"error"],[293,20,299,18],[293,22,299,20],[294,8,300,6,"console"],[294,15,300,13],[294,16,300,14,"error"],[294,21,300,19],[294,22,300,20],[294,68,300,66],[294,70,300,68,"error"],[294,75,300,73],[294,76,300,74],[295,8,301,6],[295,14,301,12,"error"],[295,19,301,17],[296,6,302,4],[297,4,303,2],[298,2,304,0],[299,2,306,7],[299,8,306,13,"imageCompressionService"],[299,31,306,36],[299,34,306,39],[299,38,306,43,"ImageCompressionService"],[299,61,306,66],[299,62,306,67],[299,63,306,68],[300,2,307,0],[300,6,307,0,"_default"],[300,14,307,0],[300,17,307,15,"imageCompressionService"],[300,40,307,38],[301,0,307,39],[301,3]],"functionMap":{"names":["<global>","ImageCompressionService","ImageCompressionService#getImageSize","ImageCompressionService#isPngImage","ImageCompressionService#compressImage","ImageCompressionService#compressImages","ImageCompressionService#toBase64WithCompression","ImageCompressionService#resizeImage","ImageCompressionService#compressForUpload"],"mappings":"AAA;AC0B;ECI;GDgB;EEK;GFQ;EGO;GHwG;EIK;GJa;EKK;GLc;EMK;GN0D;EOK;GP2B;CDC"},"hasCjsExports":false},"type":"js/module"}]}
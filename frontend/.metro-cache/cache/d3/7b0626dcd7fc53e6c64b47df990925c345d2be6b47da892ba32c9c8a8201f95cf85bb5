{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":29,"index":44},"end":{"line":3,"column":84,"index":99}}],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"../common","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":14,"index":168},"end":{"line":6,"column":34,"index":188}}],"key":"vhvRLAgg70cx5BlWoiEZedxJwuQ=","exportNames":["*"],"imports":1}},{"name":"../../Relation","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":39,"index":229},"end":{"line":7,"column":64,"index":254}}],"key":"+kd+2nNxiZjYLhRedmlXoSB7G4U=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  exports.__esModule = true;\n  exports.default = void 0;\n  var _common = require(_dependencyMap[1], \"../common\");\n  var _Relation = _interopRequireDefault(require(_dependencyMap[2], \"../../Relation\"));\n  // Defines a model property that fetches a record with a specific ID\n  // Returns an mutable Relation object\n  // - when the fetched record changes\n  // - when the record ID changes (new record must be fetched)\n  // - â€¦ or emits null whenever record ID is null\n  //\n  // If the record ID *can't* change, use `immutableRelation` for efficiency\n  //\n  // Property's setter assigns a new record (you pass the record, and the ID is set)\n  //\n  // relationIdColumn - name of the column with record ID\n  // relationTable - name of the table containing desired recods\n  //\n  // Example: a Task has a project it belongs to (and the project can change), so it may define:\n  //   @relation('project', 'project_id') project: Relation<Project>\n  var relation = function (relationTable, relationIdColumn, options) {\n    return function (target, key, descriptor) {\n      (0, _common.ensureDecoratorUsedProperly)(relationIdColumn, target, key, descriptor);\n      return {\n        get: function () {\n          // $FlowFixMe\n          var model = this;\n          model._relationCache = model._relationCache || {};\n          var cachedRelation = model._relationCache[key];\n          if (cachedRelation) {\n            return cachedRelation;\n          }\n          var newRelation = new _Relation.default(model.asModel, relationTable, relationIdColumn, options || {\n            isImmutable: false\n          });\n          model._relationCache[key] = newRelation;\n          return newRelation;\n        },\n        set: function () {\n          throw new Error(\"Don't set relation directly. Use relation.set() instead\");\n        }\n      };\n    };\n  };\n  var _default = exports.default = relation;\n});","lineCount":49,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"_interopRequireDefault"],[4,28,3,26],[4,31,3,29,"require"],[4,38,3,36],[4,39,3,36,"_dependencyMap"],[4,53,3,36],[4,104,3,83],[4,105,3,84],[5,2,4,0,"exports"],[5,9,4,7],[5,10,4,8,"__esModule"],[5,20,4,18],[5,23,4,21],[5,27,4,25],[6,2,5,0,"exports"],[6,9,5,7],[6,10,5,8,"default"],[6,17,5,15],[6,20,5,18],[6,25,5,23],[6,26,5,24],[7,2,6,0],[7,6,6,4,"_common"],[7,13,6,11],[7,16,6,14,"require"],[7,23,6,21],[7,24,6,21,"_dependencyMap"],[7,38,6,21],[7,54,6,33],[7,55,6,34],[8,2,7,0],[8,6,7,4,"_Relation"],[8,15,7,13],[8,18,7,16,"_interopRequireDefault"],[8,40,7,38],[8,41,7,39,"require"],[8,48,7,46],[8,49,7,46,"_dependencyMap"],[8,63,7,46],[8,84,7,63],[8,85,7,64],[8,86,7,65],[9,2,8,0],[10,2,9,0],[11,2,10,0],[12,2,11,0],[13,2,12,0],[14,2,13,0],[15,2,14,0],[16,2,15,0],[17,2,16,0],[18,2,17,0],[19,2,18,0],[20,2,19,0],[21,2,20,0],[22,2,21,0],[23,2,22,0],[24,2,23,0],[24,6,23,4,"relation"],[24,14,23,12],[24,17,23,15],[24,26,23,15,"relation"],[24,27,23,25,"relationTable"],[24,40,23,38],[24,42,23,40,"relationIdColumn"],[24,58,23,56],[24,60,23,58,"options"],[24,67,23,65],[24,69,23,67],[25,4,24,2],[25,11,24,9],[25,21,24,19,"target"],[25,27,24,25],[25,29,24,27,"key"],[25,32,24,30],[25,34,24,32,"descriptor"],[25,44,24,42],[25,46,24,44],[26,6,25,4],[26,7,25,5],[26,8,25,6],[26,10,25,8,"_common"],[26,17,25,15],[26,18,25,16,"ensureDecoratorUsedProperly"],[26,45,25,43],[26,47,25,45,"relationIdColumn"],[26,63,25,61],[26,65,25,63,"target"],[26,71,25,69],[26,73,25,71,"key"],[26,76,25,74],[26,78,25,76,"descriptor"],[26,88,25,86],[26,89,25,87],[27,6,26,4],[27,13,26,11],[28,8,27,6,"get"],[28,11,27,9],[28,13,27,11],[28,22,27,11,"get"],[28,23,27,11],[28,25,27,23],[29,10,28,8],[30,10,29,8],[30,14,29,12,"model"],[30,19,29,17],[30,22,29,20],[30,26,29,24],[31,10,30,8,"model"],[31,15,30,13],[31,16,30,14,"_relationCache"],[31,30,30,28],[31,33,30,31,"model"],[31,38,30,36],[31,39,30,37,"_relationCache"],[31,53,30,51],[31,57,30,55],[31,58,30,56],[31,59,30,57],[32,10,31,8],[32,14,31,12,"cachedRelation"],[32,28,31,26],[32,31,31,29,"model"],[32,36,31,34],[32,37,31,35,"_relationCache"],[32,51,31,49],[32,52,31,50,"key"],[32,55,31,53],[32,56,31,54],[33,10,32,8],[33,14,32,12,"cachedRelation"],[33,28,32,26],[33,30,32,28],[34,12,33,10],[34,19,33,17,"cachedRelation"],[34,33,33,31],[35,10,34,8],[36,10,35,8],[36,14,35,12,"newRelation"],[36,25,35,23],[36,28,35,26],[36,32,35,30,"_Relation"],[36,41,35,39],[36,42,35,40,"default"],[36,49,35,47],[36,50,35,48,"model"],[36,55,35,53],[36,56,35,54,"asModel"],[36,63,35,61],[36,65,35,63,"relationTable"],[36,78,35,76],[36,80,35,78,"relationIdColumn"],[36,96,35,94],[36,98,35,96,"options"],[36,105,35,103],[36,109,35,107],[37,12,36,10,"isImmutable"],[37,23,36,21],[37,25,36,23],[38,10,37,8],[38,11,37,9],[38,12,37,10],[39,10,38,8,"model"],[39,15,38,13],[39,16,38,14,"_relationCache"],[39,30,38,28],[39,31,38,29,"key"],[39,34,38,32],[39,35,38,33],[39,38,38,36,"newRelation"],[39,49,38,47],[40,10,39,8],[40,17,39,15,"newRelation"],[40,28,39,26],[41,8,40,6],[41,9,40,7],[42,8,41,6,"set"],[42,11,41,9],[42,13,41,11],[42,22,41,11,"set"],[42,23,41,11],[42,25,41,23],[43,10,42,8],[43,16,42,14],[43,20,42,18,"Error"],[43,25,42,23],[43,26,42,24],[43,83,42,81],[43,84,42,82],[44,8,43,6],[45,6,44,4],[45,7,44,5],[46,4,45,2],[46,5,45,3],[47,2,46,0],[47,3,46,1],[48,2,47,0],[48,6,47,4,"_default"],[48,14,47,12],[48,17,47,15,"exports"],[48,24,47,22],[48,25,47,23,"default"],[48,32,47,30],[48,35,47,33,"relation"],[48,43,47,41],[49,0,47,42],[49,3]],"functionMap":{"names":["<global>","relation","<anonymous>","get","set"],"mappings":"AAA;eCsB;SCC;WCG;ODa;WEC;OFE;GDE;CDC"},"hasCjsExports":true},"type":"js/module"}]}
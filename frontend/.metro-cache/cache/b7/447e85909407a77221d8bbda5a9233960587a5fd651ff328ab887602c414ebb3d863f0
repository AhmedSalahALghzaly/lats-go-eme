{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":29,"index":44},"end":{"line":3,"column":84,"index":99}}],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"../utils/common/invariant","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":40,"index":395},"end":{"line":10,"column":76,"index":431}}],"key":"xXWoRmIvK22fz8BhZzrIVJrZW3I=","exportNames":["*"],"imports":1}},{"name":"../utils/common/logger","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":37,"index":471},"end":{"line":11,"column":70,"index":504}}],"key":"VryVzzhBa1bGcKcurcOH2zeAFWQ=","exportNames":["*"],"imports":1}},{"name":"../RawRecord","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":17,"index":524},"end":{"line":12,"column":40,"index":547}}],"key":"JOpuSzEXK5N8XJGCnvbqx3y7SSE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  exports.__esModule = true;\n  exports.devSetupCallback = devSetupCallback;\n  exports.sanitizeFindResult = sanitizeFindResult;\n  exports.sanitizeQueryResult = sanitizeQueryResult;\n  exports.validateAdapter = validateAdapter;\n  exports.validateTable = validateTable;\n  var _invariant = _interopRequireDefault(require(_dependencyMap[1], \"../utils/common/invariant\"));\n  var _logger = _interopRequireDefault(require(_dependencyMap[2], \"../utils/common/logger\"));\n  var _RawRecord = require(_dependencyMap[3], \"../RawRecord\");\n  // don't import the whole utils/ here!\n  function validateAdapter(adapter) {\n    if ('production' !== process.env.NODE_ENV) {\n      var schema = adapter.schema,\n        migrations = adapter.migrations;\n      (0, _invariant.default)(schema, \"Missing schema in the adapter\");\n      // TODO: uncomment when full migrations are shipped\n      // invariant(migrations, `Missing migrations`)\n      if (migrations) {\n        (0, _invariant.default)(migrations.validated, \"Invalid migrations - use schemaMigrations() to create migrations. See docs for more details.\");\n        var minVersion = migrations.minVersion,\n          maxVersion = migrations.maxVersion;\n        (0, _invariant.default)(maxVersion <= schema.version, \"Migrations can't be newer than schema. Schema is version \".concat(schema.version, \" and migrations cover range from \").concat(minVersion, \" to \").concat(maxVersion));\n        (0, _invariant.default)(maxVersion === schema.version, \"Missing migration. Database schema is currently at version \".concat(schema.version, \", but migrations only cover range from \").concat(minVersion, \" to \").concat(maxVersion));\n      }\n    }\n  }\n  function validateTable(tableName, schema) {\n    (0, _invariant.default)(\n    // $FlowFixMe\n    Object.prototype.hasOwnProperty.call(schema.tables, tableName), \"Could not invoke Adapter method because table name '\".concat(tableName, \"' does not exist in the schema. Most likely, it's a sync bug, and you're sending tables that don't exist in the current version of the app. Or, you made a mistake in migrations. Reminder: it's a serious programming error to pass non-whitelisted table names to Adapter.\"));\n  }\n  function sanitizeFindResult(dirtyRecord, tableSchema) {\n    return dirtyRecord && 'object' === typeof dirtyRecord ? (0, _RawRecord.sanitizedRaw)(dirtyRecord, tableSchema) : dirtyRecord;\n  }\n  function sanitizeQueryResult(dirtyRecords, tableSchema) {\n    return dirtyRecords.map(function (dirtyRecord) {\n      return 'string' === typeof dirtyRecord ? dirtyRecord : (0, _RawRecord.sanitizedRaw)(dirtyRecord, tableSchema);\n    });\n  }\n  function devSetupCallback(result, onSetUpError) {\n    if (result.error) {\n      _logger.default.error(\"Uh-oh. Database failed to load, we're in big trouble. This might happen if you didn't set up native code correctly (iOS, Android), or if you didn't recompile native app after WatermelonDB update. It might also mean that IndexedDB or SQLite refused to open.\", result.error);\n      onSetUpError && onSetUpError(result.error);\n    }\n  }\n});","lineCount":50,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"_interopRequireDefault"],[4,28,3,26],[4,31,3,29,"require"],[4,38,3,36],[4,39,3,36,"_dependencyMap"],[4,53,3,36],[4,104,3,83],[4,105,3,84],[5,2,4,0,"exports"],[5,9,4,7],[5,10,4,8,"__esModule"],[5,20,4,18],[5,23,4,21],[5,27,4,25],[6,2,5,0,"exports"],[6,9,5,7],[6,10,5,8,"devSetupCallback"],[6,26,5,24],[6,29,5,27,"devSetupCallback"],[6,45,5,43],[7,2,6,0,"exports"],[7,9,6,7],[7,10,6,8,"sanitizeFindResult"],[7,28,6,26],[7,31,6,29,"sanitizeFindResult"],[7,49,6,47],[8,2,7,0,"exports"],[8,9,7,7],[8,10,7,8,"sanitizeQueryResult"],[8,29,7,27],[8,32,7,30,"sanitizeQueryResult"],[8,51,7,49],[9,2,8,0,"exports"],[9,9,8,7],[9,10,8,8,"validateAdapter"],[9,25,8,23],[9,28,8,26,"validateAdapter"],[9,43,8,41],[10,2,9,0,"exports"],[10,9,9,7],[10,10,9,8,"validateTable"],[10,23,9,21],[10,26,9,24,"validateTable"],[10,39,9,37],[11,2,10,0],[11,6,10,4,"_invariant"],[11,16,10,14],[11,19,10,17,"_interopRequireDefault"],[11,41,10,39],[11,42,10,40,"require"],[11,49,10,47],[11,50,10,47,"_dependencyMap"],[11,64,10,47],[11,96,10,75],[11,97,10,76],[11,98,10,77],[12,2,11,0],[12,6,11,4,"_logger"],[12,13,11,11],[12,16,11,14,"_interopRequireDefault"],[12,38,11,36],[12,39,11,37,"require"],[12,46,11,44],[12,47,11,44,"_dependencyMap"],[12,61,11,44],[12,90,11,69],[12,91,11,70],[12,92,11,71],[13,2,12,0],[13,6,12,4,"_RawRecord"],[13,16,12,14],[13,19,12,17,"require"],[13,26,12,24],[13,27,12,24,"_dependencyMap"],[13,41,12,24],[13,60,12,39],[13,61,12,40],[14,2,13,0],[15,2,14,0],[15,11,14,9,"validateAdapter"],[15,26,14,24,"validateAdapter"],[15,27,14,25,"adapter"],[15,34,14,32],[15,36,14,34],[16,4,15,2],[16,8,15,6],[16,20,15,18],[16,25,15,23,"process"],[16,32,15,30],[16,33,15,31,"env"],[16,36,15,34],[16,37,15,35,"NODE_ENV"],[16,45,15,43],[16,47,15,45],[17,6,16,4],[17,10,17,14,"schema"],[17,16,17,20],[17,19,19,8,"adapter"],[17,26,19,15],[17,27,17,6,"schema"],[17,33,17,12],[18,8,18,18,"migrations"],[18,18,18,28],[18,21,19,8,"adapter"],[18,28,19,15],[18,29,18,6,"migrations"],[18,39,18,16],[19,6,20,4],[19,7,20,5],[19,8,20,6],[19,10,20,8,"_invariant"],[19,20,20,18],[19,21,20,19,"default"],[19,28,20,26],[19,30,20,28,"schema"],[19,36,20,34],[19,38,20,36],[19,69,20,67],[19,70,20,68],[20,6,21,4],[21,6,22,4],[22,6,23,4],[22,10,23,8,"migrations"],[22,20,23,18],[22,22,23,20],[23,8,24,6],[23,9,24,7],[23,10,24,8],[23,12,24,10,"_invariant"],[23,22,24,20],[23,23,24,21,"default"],[23,30,24,28],[23,32,24,30,"migrations"],[23,42,24,40],[23,43,24,41,"validated"],[23,52,24,50],[23,54,24,52],[23,148,24,146],[23,149,24,147],[24,8,25,6],[24,12,26,20,"minVersion"],[24,22,26,30],[24,25,28,10,"migrations"],[24,35,28,20],[24,36,26,8,"minVersion"],[24,46,26,18],[25,10,27,20,"maxVersion"],[25,20,27,30],[25,23,28,10,"migrations"],[25,33,28,20],[25,34,27,8,"maxVersion"],[25,44,27,18],[26,8,29,6],[26,9,29,7],[26,10,29,8],[26,12,29,10,"_invariant"],[26,22,29,20],[26,23,29,21,"default"],[26,30,29,28],[26,32,29,30,"maxVersion"],[26,42,29,40],[26,46,29,44,"schema"],[26,52,29,50],[26,53,29,51,"version"],[26,60,29,58],[26,62,29,60],[26,121,29,119],[26,122,29,120,"concat"],[26,128,29,126],[26,129,29,127,"schema"],[26,135,29,133],[26,136,29,134,"version"],[26,143,29,141],[26,145,29,143],[26,180,29,178],[26,181,29,179],[26,182,29,180,"concat"],[26,188,29,186],[26,189,29,187,"minVersion"],[26,199,29,197],[26,201,29,199],[26,207,29,205],[26,208,29,206],[26,209,29,207,"concat"],[26,215,29,213],[26,216,29,214,"maxVersion"],[26,226,29,224],[26,227,29,225],[26,228,29,226],[27,8,30,6],[27,9,30,7],[27,10,30,8],[27,12,30,10,"_invariant"],[27,22,30,20],[27,23,30,21,"default"],[27,30,30,28],[27,32,30,30,"maxVersion"],[27,42,30,40],[27,47,30,45,"schema"],[27,53,30,51],[27,54,30,52,"version"],[27,61,30,59],[27,63,30,61],[27,124,30,122],[27,125,30,123,"concat"],[27,131,30,129],[27,132,30,130,"schema"],[27,138,30,136],[27,139,30,137,"version"],[27,146,30,144],[27,148,30,146],[27,189,30,187],[27,190,30,188],[27,191,30,189,"concat"],[27,197,30,195],[27,198,30,196,"minVersion"],[27,208,30,206],[27,210,30,208],[27,216,30,214],[27,217,30,215],[27,218,30,216,"concat"],[27,224,30,222],[27,225,30,223,"maxVersion"],[27,235,30,233],[27,236,30,234],[27,237,30,235],[28,6,31,4],[29,4,32,2],[30,2,33,0],[31,2,34,0],[31,11,34,9,"validateTable"],[31,24,34,22,"validateTable"],[31,25,34,23,"tableName"],[31,34,34,32],[31,36,34,34,"schema"],[31,42,34,40],[31,44,34,42],[32,4,35,2],[32,5,35,3],[32,6,35,4],[32,8,35,6,"_invariant"],[32,18,35,16],[32,19,35,17,"default"],[32,26,35,24],[33,4,36,2],[34,4,37,2,"Object"],[34,10,37,8],[34,11,37,9,"prototype"],[34,20,37,18],[34,21,37,19,"hasOwnProperty"],[34,35,37,33],[34,36,37,34,"call"],[34,40,37,38],[34,41,37,39,"schema"],[34,47,37,45],[34,48,37,46,"tables"],[34,54,37,52],[34,56,37,54,"tableName"],[34,65,37,63],[34,66,37,64],[34,68,37,66],[34,122,37,120],[34,123,37,121,"concat"],[34,129,37,127],[34,130,37,128,"tableName"],[34,139,37,137],[34,141,37,139],[34,411,37,409],[34,412,37,410],[34,413,37,411],[35,2,38,0],[36,2,39,0],[36,11,39,9,"sanitizeFindResult"],[36,29,39,27,"sanitizeFindResult"],[36,30,39,28,"dirtyRecord"],[36,41,39,39],[36,43,39,41,"tableSchema"],[36,54,39,52],[36,56,39,54],[37,4,40,2],[37,11,40,9,"dirtyRecord"],[37,22,40,20],[37,26,40,24],[37,34,40,32],[37,39,40,37],[37,46,40,44,"dirtyRecord"],[37,57,40,55],[37,60,40,58],[37,61,40,59],[37,62,40,60],[37,64,40,62,"_RawRecord"],[37,74,40,72],[37,75,40,73,"sanitizedRaw"],[37,87,40,85],[37,89,40,87,"dirtyRecord"],[37,100,40,98],[37,102,40,100,"tableSchema"],[37,113,40,111],[37,114,40,112],[37,117,40,115,"dirtyRecord"],[37,128,40,126],[38,2,41,0],[39,2,42,0],[39,11,42,9,"sanitizeQueryResult"],[39,30,42,28,"sanitizeQueryResult"],[39,31,42,29,"dirtyRecords"],[39,43,42,41],[39,45,42,43,"tableSchema"],[39,56,42,54],[39,58,42,56],[40,4,43,2],[40,11,43,9,"dirtyRecords"],[40,23,43,21],[40,24,43,22,"map"],[40,27,43,25],[40,28,43,26],[40,38,43,36,"dirtyRecord"],[40,49,43,47],[40,51,43,49],[41,6,44,4],[41,13,44,11],[41,21,44,19],[41,26,44,24],[41,33,44,31,"dirtyRecord"],[41,44,44,42],[41,47,44,45,"dirtyRecord"],[41,58,44,56],[41,61,44,59],[41,62,44,60],[41,63,44,61],[41,65,44,63,"_RawRecord"],[41,75,44,73],[41,76,44,74,"sanitizedRaw"],[41,88,44,86],[41,90,44,88,"dirtyRecord"],[41,101,44,99],[41,103,44,101,"tableSchema"],[41,114,44,112],[41,115,44,113],[42,4,45,2],[42,5,45,3],[42,6,45,4],[43,2,46,0],[44,2,47,0],[44,11,47,9,"devSetupCallback"],[44,27,47,25,"devSetupCallback"],[44,28,47,26,"result"],[44,34,47,32],[44,36,47,34,"onSetUpError"],[44,48,47,46],[44,50,47,48],[45,4,48,2],[45,8,48,6,"result"],[45,14,48,12],[45,15,48,13,"error"],[45,20,48,18],[45,22,48,20],[46,6,49,4,"_logger"],[46,13,49,11],[46,14,49,12,"default"],[46,21,49,19],[46,22,49,20,"error"],[46,27,49,25],[46,28,49,26],[46,286,49,284],[46,288,49,286,"result"],[46,294,49,292],[46,295,49,293,"error"],[46,300,49,298],[46,301,49,299],[47,6,50,4,"onSetUpError"],[47,18,50,16],[47,22,50,20,"onSetUpError"],[47,34,50,32],[47,35,50,33,"result"],[47,41,50,39],[47,42,50,40,"error"],[47,47,50,45],[47,48,50,46],[48,4,51,2],[49,2,52,0],[50,0,52,1],[50,3]],"functionMap":{"names":["<global>","validateAdapter","validateTable","sanitizeFindResult","sanitizeQueryResult","dirtyRecords.map$argument_0","devSetupCallback"],"mappings":"AAA;ACa;CDmB;AEC;CFI;AGC;CHE;AIC;0BCC;GDE;CJC;AMC"},"hasCjsExports":true},"type":"js/module"}]}
{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":29,"index":44},"end":{"line":3,"column":84,"index":99}}],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/initializerDefineProperty","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":57,"index":211},"end":{"line":6,"column":116,"index":270}}],"key":"DenCmstGLvTfZ6W+iNIMxqRMp6Y=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":43,"index":316},"end":{"line":7,"column":88,"index":361}}],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/applyDecoratedDescriptor","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":56,"index":420},"end":{"line":8,"column":114,"index":478}}],"key":"I/merxjZzuQPC3oqK05QeKXuqJ8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/initializerWarningHelper","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":56,"index":537},"end":{"line":9,"column":114,"index":595}}],"key":"E0q2fj366mxWvU5gH3ZZDcJMY2w=","exportNames":["*"],"imports":1}},{"name":"../utils/common/invariant","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":40,"index":638},"end":{"line":10,"column":76,"index":674}}],"key":"xXWoRmIvK22fz8BhZzrIVJrZW3I=","exportNames":["*"],"imports":1}},{"name":"../utils/rx/publishReplayLatestWhileConnected","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":64,"index":741},"end":{"line":11,"column":120,"index":797}}],"key":"WvfLjq6z0fMIpl7a6p7XAcwdYCU=","exportNames":["*"],"imports":1}},{"name":"../decorators/lazy","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":12,"column":35,"index":835},"end":{"line":12,"column":64,"index":864}}],"key":"IoBQh2SWh0ntQR0XB8EE7rmgjF8=","exportNames":["*"],"imports":1}},{"name":"./helpers","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":13,"column":15,"index":882},"end":{"line":13,"column":35,"index":902}}],"key":"f1qS3jT0PALHpwfgOy1Ia0GaJzk=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  exports.__esModule = true;\n  exports.default = void 0;\n  var _initializerDefineProperty2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/initializerDefineProperty\"));\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var _applyDecoratedDescriptor2 = _interopRequireDefault(require(_dependencyMap[3], \"@babel/runtime/helpers/applyDecoratedDescriptor\"));\n  var _initializerWarningHelper2 = _interopRequireDefault(require(_dependencyMap[4], \"@babel/runtime/helpers/initializerWarningHelper\"));\n  var _invariant = _interopRequireDefault(require(_dependencyMap[5], \"../utils/common/invariant\"));\n  var _publishReplayLatestWhileConnected = _interopRequireDefault(require(_dependencyMap[6], \"../utils/rx/publishReplayLatestWhileConnected\"));\n  var _lazy = _interopRequireDefault(require(_dependencyMap[7], \"../decorators/lazy\"));\n  var _helpers = require(_dependencyMap[8], \"./helpers\");\n  var _class, _descriptor, _class2;\n  // Defines a one-to-one relation between two Models (two tables in db)\n  // Do not create this object directly! Use `relation` or `immutableRelation` decorators instead\n  var Relation = exports.default = (_class = (_class2 = /*#__PURE__*/function () {\n    // Used by withObservables to differentiate between object types\n\n    function Relation(model, relationTableName, columnName, options) {\n      (0, _initializerDefineProperty2.default)(this, \"_cachedObservable\", _descriptor, this);\n      this._model = model;\n      this._relationTableName = relationTableName;\n      this._columnName = columnName;\n      this._isImmutable = options.isImmutable;\n    }\n    var _proto = Relation.prototype;\n    _proto.fetch = function () {\n      var id = this.id;\n      if (id) {\n        return this._model.collections.get(this._relationTableName).find(id);\n      }\n      return Promise.resolve(null);\n    };\n    _proto.then = function (onFulfill, onReject) {\n      // $FlowFixMe\n      return this.fetch().then(onFulfill, onReject);\n    };\n    _proto.set = function (record) {\n      this.id = null === record || void 0 === record ? void 0 : record.id;\n    };\n    _proto.observe = function () {\n      return this._cachedObservable;\n    };\n    return (0, _createClass2.default)(Relation, [{\n      key: \"id\",\n      get: function get() {\n        return this._model._getRaw(this._columnName);\n      },\n      set: function set(newId) {\n        if (this._isImmutable) {\n          (0, _invariant.default)('create' === this._model._preparedState, \"Cannot change property marked as @immutableRelation \".concat(Object.getPrototypeOf(this._model).constructor.name, \" - \").concat(this._columnName));\n        }\n        this._model._setRaw(this._columnName, newId || null);\n      }\n    }]);\n  }(), _class2._wmelonTag = 'relation', _class2), _descriptor = (0, _applyDecoratedDescriptor2.default)(_class.prototype, \"_cachedObservable\", [_lazy.default], {\n    configurable: true,\n    enumerable: true,\n    writable: true,\n    initializer: function initializer() {\n      return (0, _helpers.createObservable)(this).pipe(_publishReplayLatestWhileConnected.default).refCount();\n    }\n  }), _class);\n});","lineCount":66,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"_interopRequireDefault"],[4,28,3,26],[4,31,3,29,"require"],[4,38,3,36],[4,39,3,36,"_dependencyMap"],[4,53,3,36],[4,104,3,83],[4,105,3,84],[5,2,4,0,"exports"],[5,9,4,7],[5,10,4,8,"__esModule"],[5,20,4,18],[5,23,4,21],[5,27,4,25],[6,2,5,0,"exports"],[6,9,5,7],[6,10,5,8,"default"],[6,17,5,15],[6,20,5,18],[6,25,5,23],[6,26,5,24],[7,2,6,0],[7,6,6,4,"_initializerDefineProperty2"],[7,33,6,31],[7,36,6,34,"_interopRequireDefault"],[7,58,6,56],[7,59,6,57,"require"],[7,66,6,64],[7,67,6,64,"_dependencyMap"],[7,81,6,64],[7,136,6,115],[7,137,6,116],[7,138,6,117],[8,2,7,0],[8,6,7,4,"_createClass2"],[8,19,7,17],[8,22,7,20,"_interopRequireDefault"],[8,44,7,42],[8,45,7,43,"require"],[8,52,7,50],[8,53,7,50,"_dependencyMap"],[8,67,7,50],[8,108,7,87],[8,109,7,88],[8,110,7,89],[9,2,8,0],[9,6,8,4,"_applyDecoratedDescriptor2"],[9,32,8,30],[9,35,8,33,"_interopRequireDefault"],[9,57,8,55],[9,58,8,56,"require"],[9,65,8,63],[9,66,8,63,"_dependencyMap"],[9,80,8,63],[9,134,8,113],[9,135,8,114],[9,136,8,115],[10,2,9,0],[10,6,9,4,"_initializerWarningHelper2"],[10,32,9,30],[10,35,9,33,"_interopRequireDefault"],[10,57,9,55],[10,58,9,56,"require"],[10,65,9,63],[10,66,9,63,"_dependencyMap"],[10,80,9,63],[10,134,9,113],[10,135,9,114],[10,136,9,115],[11,2,10,0],[11,6,10,4,"_invariant"],[11,16,10,14],[11,19,10,17,"_interopRequireDefault"],[11,41,10,39],[11,42,10,40,"require"],[11,49,10,47],[11,50,10,47,"_dependencyMap"],[11,64,10,47],[11,96,10,75],[11,97,10,76],[11,98,10,77],[12,2,11,0],[12,6,11,4,"_publishReplayLatestWhileConnected"],[12,40,11,38],[12,43,11,41,"_interopRequireDefault"],[12,65,11,63],[12,66,11,64,"require"],[12,73,11,71],[12,74,11,71,"_dependencyMap"],[12,88,11,71],[12,140,11,119],[12,141,11,120],[12,142,11,121],[13,2,12,0],[13,6,12,4,"_lazy"],[13,11,12,9],[13,14,12,12,"_interopRequireDefault"],[13,36,12,34],[13,37,12,35,"require"],[13,44,12,42],[13,45,12,42,"_dependencyMap"],[13,59,12,42],[13,84,12,63],[13,85,12,64],[13,86,12,65],[14,2,13,0],[14,6,13,4,"_helpers"],[14,14,13,12],[14,17,13,15,"require"],[14,24,13,22],[14,25,13,22,"_dependencyMap"],[14,39,13,22],[14,55,13,34],[14,56,13,35],[15,2,14,0],[15,6,14,4,"_class"],[15,12,14,10],[15,14,14,12,"_descriptor"],[15,25,14,23],[15,27,14,25,"_class2"],[15,34,14,32],[16,2,15,0],[17,2,16,0],[18,2,17,0],[18,6,17,4,"Relation"],[18,14,17,12],[18,17,17,15,"exports"],[18,24,17,22],[18,25,17,23,"default"],[18,32,17,30],[18,36,17,34,"_class"],[18,42,17,40],[18,46,17,44,"_class2"],[18,53,17,51],[18,56,17,54],[18,69,17,67],[18,81,17,79],[19,4,18,2],[21,4,20,2],[21,13,20,11,"Relation"],[21,21,20,19,"Relation"],[21,22,20,20,"model"],[21,27,20,25],[21,29,20,27,"relationTableName"],[21,46,20,44],[21,48,20,46,"columnName"],[21,58,20,56],[21,60,20,58,"options"],[21,67,20,65],[21,69,20,67],[22,6,21,4],[22,7,21,5],[22,8,21,6],[22,10,21,8,"_initializerDefineProperty2"],[22,37,21,35],[22,38,21,36,"default"],[22,45,21,43],[22,47,21,45],[22,51,21,49],[22,53,21,51],[22,72,21,70],[22,74,21,72,"_descriptor"],[22,85,21,83],[22,87,21,85],[22,91,21,89],[22,92,21,90],[23,6,22,4],[23,10,22,8],[23,11,22,9,"_model"],[23,17,22,15],[23,20,22,18,"model"],[23,25,22,23],[24,6,23,4],[24,10,23,8],[24,11,23,9,"_relationTableName"],[24,29,23,27],[24,32,23,30,"relationTableName"],[24,49,23,47],[25,6,24,4],[25,10,24,8],[25,11,24,9,"_columnName"],[25,22,24,20],[25,25,24,23,"columnName"],[25,35,24,33],[26,6,25,4],[26,10,25,8],[26,11,25,9,"_isImmutable"],[26,23,25,21],[26,26,25,24,"options"],[26,33,25,31],[26,34,25,32,"isImmutable"],[26,45,25,43],[27,4,26,2],[28,4,27,2],[28,8,27,6,"_proto"],[28,14,27,12],[28,17,27,15,"Relation"],[28,25,27,23],[28,26,27,24,"prototype"],[28,35,27,33],[29,4,28,2,"_proto"],[29,10,28,8],[29,11,28,9,"fetch"],[29,16,28,14],[29,19,28,17],[29,31,28,29],[30,6,29,4],[30,10,30,10,"id"],[30,12,30,12],[30,15,31,8],[30,19,31,12],[30,20,30,6,"id"],[30,22,30,8],[31,6,32,4],[31,10,32,8,"id"],[31,12,32,10],[31,14,32,12],[32,8,33,6],[32,15,33,13],[32,19,33,17],[32,20,33,18,"_model"],[32,26,33,24],[32,27,33,25,"collections"],[32,38,33,36],[32,39,33,37,"get"],[32,42,33,40],[32,43,33,41],[32,47,33,45],[32,48,33,46,"_relationTableName"],[32,66,33,64],[32,67,33,65],[32,68,33,66,"find"],[32,72,33,70],[32,73,33,71,"id"],[32,75,33,73],[32,76,33,74],[33,6,34,4],[34,6,35,4],[34,13,35,11,"Promise"],[34,20,35,18],[34,21,35,19,"resolve"],[34,28,35,26],[34,29,35,27],[34,33,35,31],[34,34,35,32],[35,4,36,2],[35,5,36,3],[36,4,37,2,"_proto"],[36,10,37,8],[36,11,37,9,"then"],[36,15,37,13],[36,18,37,16],[36,28,37,26,"onFulfill"],[36,37,37,35],[36,39,37,37,"onReject"],[36,47,37,45],[36,49,37,47],[37,6,38,4],[38,6,39,4],[38,13,39,11],[38,17,39,15],[38,18,39,16,"fetch"],[38,23,39,21],[38,24,39,22],[38,25,39,23],[38,26,39,24,"then"],[38,30,39,28],[38,31,39,29,"onFulfill"],[38,40,39,38],[38,42,39,40,"onReject"],[38,50,39,48],[38,51,39,49],[39,4,40,2],[39,5,40,3],[40,4,41,2,"_proto"],[40,10,41,8],[40,11,41,9,"set"],[40,14,41,12],[40,17,41,15],[40,27,41,25,"record"],[40,33,41,31],[40,35,41,33],[41,6,42,4],[41,10,42,8],[41,11,42,9,"id"],[41,13,42,11],[41,16,42,14],[41,20,42,18],[41,25,42,23,"record"],[41,31,42,29],[41,35,42,33],[41,40,42,38],[41,41,42,39],[41,46,42,44,"record"],[41,52,42,50],[41,55,42,53],[41,60,42,58],[41,61,42,59],[41,64,42,62,"record"],[41,70,42,68],[41,71,42,69,"id"],[41,73,42,71],[42,4,43,2],[42,5,43,3],[43,4,44,2,"_proto"],[43,10,44,8],[43,11,44,9,"observe"],[43,18,44,16],[43,21,44,19],[43,33,44,31],[44,6,45,4],[44,13,45,11],[44,17,45,15],[44,18,45,16,"_cachedObservable"],[44,35,45,33],[45,4,46,2],[45,5,46,3],[46,4,47,2],[46,11,47,9],[46,12,47,10],[46,13,47,11],[46,15,47,13,"_createClass2"],[46,28,47,26],[46,29,47,27,"default"],[46,36,47,34],[46,38,47,36,"Relation"],[46,46,47,44],[46,48,47,46],[46,49,47,47],[47,6,48,4,"key"],[47,9,48,7],[47,11,48,9],[47,15,48,13],[48,6,49,4,"get"],[48,9,49,7],[48,11,49,9],[48,20,49,18,"get"],[48,23,49,21,"get"],[48,24,49,21],[48,26,49,24],[49,8,50,6],[49,15,50,13],[49,19,50,17],[49,20,50,18,"_model"],[49,26,50,24],[49,27,50,25,"_getRaw"],[49,34,50,32],[49,35,50,33],[49,39,50,37],[49,40,50,38,"_columnName"],[49,51,50,49],[49,52,50,50],[50,6,51,4],[50,7,51,5],[51,6,52,4,"set"],[51,9,52,7],[51,11,52,9],[51,20,52,18,"set"],[51,23,52,21,"set"],[51,24,52,22,"newId"],[51,29,52,27],[51,31,52,29],[52,8,53,6],[52,12,53,10],[52,16,53,14],[52,17,53,15,"_isImmutable"],[52,29,53,27],[52,31,53,29],[53,10,54,8],[53,11,54,9],[53,12,54,10],[53,14,54,12,"_invariant"],[53,24,54,22],[53,25,54,23,"default"],[53,32,54,30],[53,34,54,32],[53,42,54,40],[53,47,54,45],[53,51,54,49],[53,52,54,50,"_model"],[53,58,54,56],[53,59,54,57,"_preparedState"],[53,73,54,71],[53,75,54,73],[53,129,54,127],[53,130,54,128,"concat"],[53,136,54,134],[53,137,54,135,"Object"],[53,143,54,141],[53,144,54,142,"getPrototypeOf"],[53,158,54,156],[53,159,54,157],[53,163,54,161],[53,164,54,162,"_model"],[53,170,54,168],[53,171,54,169],[53,172,54,170,"constructor"],[53,183,54,181],[53,184,54,182,"name"],[53,188,54,186],[53,190,54,188],[53,195,54,193],[53,196,54,194],[53,197,54,195,"concat"],[53,203,54,201],[53,204,54,202],[53,208,54,206],[53,209,54,207,"_columnName"],[53,220,54,218],[53,221,54,219],[53,222,54,220],[54,8,55,6],[55,8,56,6],[55,12,56,10],[55,13,56,11,"_model"],[55,19,56,17],[55,20,56,18,"_setRaw"],[55,27,56,25],[55,28,56,26],[55,32,56,30],[55,33,56,31,"_columnName"],[55,44,56,42],[55,46,56,44,"newId"],[55,51,56,49],[55,55,56,53],[55,59,56,57],[55,60,56,58],[56,6,57,4],[57,4,58,2],[57,5,58,3],[57,6,58,4],[57,7,58,5],[58,2,59,0],[58,3,59,1],[58,4,59,2],[58,5,59,3],[58,7,59,5,"_class2"],[58,14,59,12],[58,15,59,13,"_wmelonTag"],[58,25,59,23],[58,28,59,26],[58,38,59,36],[58,40,59,38,"_class2"],[58,47,59,45],[58,48,59,46],[58,50,59,48,"_descriptor"],[58,61,59,59],[58,64,59,62],[58,65,59,63],[58,66,59,64],[58,68,59,66,"_applyDecoratedDescriptor2"],[58,94,59,92],[58,95,59,93,"default"],[58,102,59,100],[58,104,59,102,"_class"],[58,110,59,108],[58,111,59,109,"prototype"],[58,120,59,118],[58,122,59,120],[58,141,59,139],[58,143,59,141],[58,144,59,142,"_lazy"],[58,149,59,147],[58,150,59,148,"default"],[58,157,59,155],[58,158,59,156],[58,160,59,158],[59,4,60,2,"configurable"],[59,16,60,14],[59,18,60,16],[59,22,60,20],[60,4,61,2,"enumerable"],[60,14,61,12],[60,16,61,14],[60,20,61,18],[61,4,62,2,"writable"],[61,12,62,10],[61,14,62,12],[61,18,62,16],[62,4,63,2,"initializer"],[62,15,63,13],[62,17,63,15],[62,26,63,24,"initializer"],[62,37,63,35,"initializer"],[62,38,63,35],[62,40,63,38],[63,6,64,4],[63,13,64,11],[63,14,64,12],[63,15,64,13],[63,17,64,15,"_helpers"],[63,25,64,23],[63,26,64,24,"createObservable"],[63,42,64,40],[63,44,64,42],[63,48,64,46],[63,49,64,47],[63,50,64,48,"pipe"],[63,54,64,52],[63,55,64,53,"_publishReplayLatestWhileConnected"],[63,89,64,87],[63,90,64,88,"default"],[63,97,64,95],[63,98,64,96],[63,99,64,97,"refCount"],[63,107,64,105],[63,108,64,106],[63,109,64,107],[64,4,65,2],[65,2,66,0],[65,3,66,1],[65,4,66,2],[65,6,66,4,"_class"],[65,12,66,10],[65,13,66,11],[66,0,66,12],[66,3]],"functionMap":{"names":["<global>","<anonymous>","Relation","_proto.fetch","_proto.then","_proto.set","_proto.observe","get","set","initializer"],"mappings":"AAA;mECgB;ECG;GDM;iBEE;GFQ;gBGC;GHG;eIC;GJE;mBKC;GLE;SMG;KNE;SOC;KPK;CDE;eSI;GTE"},"hasCjsExports":true},"type":"js/module"}]}
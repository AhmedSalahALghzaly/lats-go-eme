{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":29,"index":44},"end":{"line":3,"column":84,"index":99}}],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"../../utils/fp/identicalArrays","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":46,"index":221},"end":{"line":6,"column":87,"index":262}}],"key":"kkcIWN0yjzDpDf8rp16crxlPC6A=","exportNames":["*"],"imports":1}},{"name":"../subscribeToSimpleQuery","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":53,"index":318},"end":{"line":7,"column":89,"index":354}}],"key":"g4Th1Y4hYgmq16l3ke5zkcB1Trg=","exportNames":["*"],"imports":1}},{"name":"../subscribeToQueryReloading","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":56,"index":413},"end":{"line":8,"column":95,"index":452}}],"key":"4WpoVdztekNZ4cLQaDPTo+QeklA=","exportNames":["*"],"imports":1}},{"name":"../encodeMatcher/canEncode","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":40,"index":495},"end":{"line":9,"column":77,"index":532}}],"key":"LRaHhyI0v+NkASfqr8xWzbQshRM=","exportNames":["*"],"imports":1}},{"name":"../../utils/fp/arrayDifference","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":134,"column":26,"index":5684},"end":{"line":134,"column":67,"index":5725}}],"key":"YoAL4inJSg4Us62cKjQyxpJmtTU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  exports.__esModule = true;\n  exports.default = subscribeToQueryWithColumns;\n  var _identicalArrays = _interopRequireDefault(require(_dependencyMap[1], \"../../utils/fp/identicalArrays\"));\n  var _subscribeToSimpleQuery = _interopRequireDefault(require(_dependencyMap[2], \"../subscribeToSimpleQuery\"));\n  var _subscribeToQueryReloading = _interopRequireDefault(require(_dependencyMap[3], \"../subscribeToQueryReloading\"));\n  var _canEncode = _interopRequireDefault(require(_dependencyMap[4], \"../encodeMatcher/canEncode\"));\n  var getRecordState = function (record, columnNames) {\n    var state = [];\n    var raw = record._raw;\n    for (var i = 0, len = columnNames.length; i < len; i++) {\n      // $FlowFixMe\n      state.push(raw[columnNames[i]]);\n    }\n    return state;\n  };\n\n  // Invariant: same length and order of keys!\n  var recordStatesEqual = _identicalArrays.default;\n\n  // Observes the given observable list of records, and in those records,\n  // changes to given `rawFields`\n  //\n  // Emits a list of records when:\n  // - source observable emits a new list\n  // - any of the records in the list has any of the given fields changed\n  //\n  // TODO: Possible future optimizations:\n  // - simpleObserver could emit added/removed events, and this could operate on those instead of\n  //   re-deriving the same thing. For reloadingObserver, a Rx adapter could be fitted\n  // - multiple levels of array copying could probably be omitted\n\n  function subscribeToQueryWithColumns(query, columnNames, subscriber) {\n    // State kept for comparison between emissions\n    var unsubscribed = false;\n    var sourceIsFetching = true; // do not emit record-level changes while source is fetching new data\n    var hasPendingColumnChanges = false;\n    var firstEmission = true;\n    var observedRecords = [];\n    var recordStates = new Map();\n    var emitCopy = function (records) {\n      unsubscribed || subscriber(records.slice(0));\n    };\n\n    // NOTE:\n    // Observing both the source subscription and changes to columns is very tricky\n    // if we want to avoid unnecessary emissions (we do, because that triggers wasted app renders).\n    // The compounding factor is that we have two methods of observation: simpleObserver which is\n    // synchronous, and reloadingObserver, which is asynchronous.\n    //\n    // For reloadingObserver, we use `reloadingObserverWithStatus` to be notified that an async DB query\n    // has begun. If it did, we will not emit column-only changes until query has come back.\n    //\n    // For simpleObserver, we need to configure it to always emit on collection changes. This is a\n    // workaround to solve a race condition - collection observation for column check will always\n    // emit first, but we don't know if the list of observed records isn't about to change, so we\n    // flag, and wait for source response.\n    //\n    // FIXME: The above explanation is outdated in practice because modern WatermelonDB uses synchronous\n    // adapters... However, JSI on Android isn't yet fully shipped (so this is currently broken), and\n    // we may get back to some asynchronicity where appropriate...\n\n    // prepare source observable\n    // TODO: On one hand it would be nice to bring in the source logic to this function to optimize\n    // on the other, it would be good to have source provided as Observable, not Query\n    // so that we can reuse cached responses -- but they don't have compatible format\n    var canUseSimpleObservation = (0, _canEncode.default)(query.description);\n    var subscribeToSource = canUseSimpleObservation ? function (observer) {\n      return (0, _subscribeToSimpleQuery.default)(query, observer, true);\n    } : function (observer) {\n      return (0, _subscribeToQueryReloading.default)(query, observer, true);\n    };\n\n    // Observe changes to records we have on the list\n\n    var collectionUnsubscribe = query.collection.experimentalSubscribe(\n    // eslint-disable-next-line prefer-arrow-callback\n    function (changeSet) {\n      var hasColumnChanges = false;\n      // Can't use `Array.some`, because then we'd skip saving record state for relevant records\n      changeSet.forEach(function (_ref) {\n        var record = _ref.record,\n          type = _ref.type;\n        // See if change is relevant to our query\n        if ('updated' !== type) {\n          return;\n        }\n        var previousState = recordStates.get(record.id);\n        if (!previousState) {\n          return;\n        }\n\n        // Check if record changed one of its observed fields\n        var newState = getRecordState(record, columnNames);\n        if (!recordStatesEqual(previousState, newState)) {\n          recordStates.set(record.id, newState);\n          hasColumnChanges = true;\n        }\n      });\n      if (hasColumnChanges) {\n        if (sourceIsFetching || !!canUseSimpleObservation) {\n          // Mark change; will emit on source emission to avoid duplicate emissions\n          hasPendingColumnChanges = true;\n        } else {\n          emitCopy(observedRecords);\n        }\n      }\n    }, {\n      name: 'subscribeToQueryWithColumns',\n      query: query,\n      columnNames: columnNames\n    });\n\n    // Observe the source records list (list of records matching a query)\n    // eslint-disable-next-line prefer-arrow-callback\n    var sourceUnsubscribe = subscribeToSource(function (recordsOrStatus) {\n      // $FlowFixMe\n      if (false === recordsOrStatus) {\n        sourceIsFetching = true;\n        return;\n      }\n      sourceIsFetching = false;\n\n      // Emit changes if one of observed columns changed OR list of matching records changed\n      var records = recordsOrStatus;\n      var shouldEmit = firstEmission || hasPendingColumnChanges || !(0, _identicalArrays.default)(records, observedRecords);\n      hasPendingColumnChanges = false;\n      firstEmission = false;\n\n      // Find changes, and save current list for comparison on next emission\n      var arrayDifference = require(_dependencyMap[5], \"../../utils/fp/arrayDifference\").default;\n      var _arrayDifference = arrayDifference(observedRecords, records),\n        added = _arrayDifference.added,\n        removed = _arrayDifference.removed;\n      observedRecords = records;\n\n      // Unsubscribe from records removed from list\n      removed.forEach(function (record) {\n        recordStates.delete(record.id);\n      });\n\n      // Save current record state for later comparison\n      added.forEach(function (newRecord) {\n        recordStates.set(newRecord.id, getRecordState(newRecord, columnNames));\n      });\n\n      // Emit\n      shouldEmit && emitCopy(records);\n    });\n    return function () {\n      unsubscribed = true;\n      sourceUnsubscribe();\n      collectionUnsubscribe();\n    };\n  }\n});","lineCount":159,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"_interopRequireDefault"],[4,28,3,26],[4,31,3,29,"require"],[4,38,3,36],[4,39,3,36,"_dependencyMap"],[4,53,3,36],[4,104,3,83],[4,105,3,84],[5,2,4,0,"exports"],[5,9,4,7],[5,10,4,8,"__esModule"],[5,20,4,18],[5,23,4,21],[5,27,4,25],[6,2,5,0,"exports"],[6,9,5,7],[6,10,5,8,"default"],[6,17,5,15],[6,20,5,18,"subscribeToQueryWithColumns"],[6,47,5,45],[7,2,6,0],[7,6,6,4,"_identicalArrays"],[7,22,6,20],[7,25,6,23,"_interopRequireDefault"],[7,47,6,45],[7,48,6,46,"require"],[7,55,6,53],[7,56,6,53,"_dependencyMap"],[7,70,6,53],[7,107,6,86],[7,108,6,87],[7,109,6,88],[8,2,7,0],[8,6,7,4,"_subscribeToSimpleQuery"],[8,29,7,27],[8,32,7,30,"_interopRequireDefault"],[8,54,7,52],[8,55,7,53,"require"],[8,62,7,60],[8,63,7,60,"_dependencyMap"],[8,77,7,60],[8,109,7,88],[8,110,7,89],[8,111,7,90],[9,2,8,0],[9,6,8,4,"_subscribeToQueryReloading"],[9,32,8,30],[9,35,8,33,"_interopRequireDefault"],[9,57,8,55],[9,58,8,56,"require"],[9,65,8,63],[9,66,8,63,"_dependencyMap"],[9,80,8,63],[9,115,8,94],[9,116,8,95],[9,117,8,96],[10,2,9,0],[10,6,9,4,"_canEncode"],[10,16,9,14],[10,19,9,17,"_interopRequireDefault"],[10,41,9,39],[10,42,9,40,"require"],[10,49,9,47],[10,50,9,47,"_dependencyMap"],[10,64,9,47],[10,97,9,76],[10,98,9,77],[10,99,9,78],[11,2,10,0],[11,6,10,4,"getRecordState"],[11,20,10,18],[11,23,10,21],[11,32,10,21,"getRecordState"],[11,33,10,31,"record"],[11,39,10,37],[11,41,10,39,"columnNames"],[11,52,10,50],[11,54,10,52],[12,4,11,2],[12,8,11,6,"state"],[12,13,11,11],[12,16,11,14],[12,18,11,16],[13,4,12,2],[13,8,12,6,"raw"],[13,11,12,9],[13,14,12,12,"record"],[13,20,12,18],[13,21,12,19,"_raw"],[13,25,12,23],[14,4,13,2],[14,9,13,7],[14,13,13,11,"i"],[14,14,13,12],[14,17,13,15],[14,18,13,16],[14,20,13,18,"len"],[14,23,13,21],[14,26,13,24,"columnNames"],[14,37,13,35],[14,38,13,36,"length"],[14,44,13,42],[14,46,13,44,"i"],[14,47,13,45],[14,50,13,48,"len"],[14,53,13,51],[14,55,13,53,"i"],[14,56,13,54],[14,58,13,56],[14,60,13,58],[15,6,14,4],[16,6,15,4,"state"],[16,11,15,9],[16,12,15,10,"push"],[16,16,15,14],[16,17,15,15,"raw"],[16,20,15,18],[16,21,15,19,"columnNames"],[16,32,15,30],[16,33,15,31,"i"],[16,34,15,32],[16,35,15,33],[16,36,15,34],[16,37,15,35],[17,4,16,2],[18,4,17,2],[18,11,17,9,"state"],[18,16,17,14],[19,2,18,0],[19,3,18,1],[21,2,20,0],[22,2,21,0],[22,6,21,4,"recordStatesEqual"],[22,23,21,21],[22,26,21,24,"_identicalArrays"],[22,42,21,40],[22,43,21,41,"default"],[22,50,21,48],[24,2,23,0],[25,2,24,0],[26,2,25,0],[27,2,26,0],[28,2,27,0],[29,2,28,0],[30,2,29,0],[31,2,30,0],[32,2,31,0],[33,2,32,0],[34,2,33,0],[36,2,35,0],[36,11,35,9,"subscribeToQueryWithColumns"],[36,38,35,36,"subscribeToQueryWithColumns"],[36,39,35,37,"query"],[36,44,35,42],[36,46,35,44,"columnNames"],[36,57,35,55],[36,59,35,57,"subscriber"],[36,69,35,67],[36,71,35,69],[37,4,36,2],[38,4,37,2],[38,8,37,6,"unsubscribed"],[38,20,37,18],[38,23,37,21],[38,28,37,26],[39,4,38,2],[39,8,38,6,"sourceIsFetching"],[39,24,38,22],[39,27,38,25],[39,31,38,29],[39,32,38,30],[39,33,38,31],[40,4,39,2],[40,8,39,6,"hasPendingColumnChanges"],[40,31,39,29],[40,34,39,32],[40,39,39,37],[41,4,40,2],[41,8,40,6,"firstEmission"],[41,21,40,19],[41,24,40,22],[41,28,40,26],[42,4,41,2],[42,8,41,6,"observedRecords"],[42,23,41,21],[42,26,41,24],[42,28,41,26],[43,4,42,2],[43,8,42,6,"recordStates"],[43,20,42,18],[43,23,42,21],[43,27,42,25,"Map"],[43,30,42,28],[43,31,42,29],[43,32,42,30],[44,4,43,2],[44,8,43,6,"emitCopy"],[44,16,43,14],[44,19,43,17],[44,28,43,17,"emitCopy"],[44,29,43,27,"records"],[44,36,43,34],[44,38,43,36],[45,6,44,4,"unsubscribed"],[45,18,44,16],[45,22,44,20,"subscriber"],[45,32,44,30],[45,33,44,31,"records"],[45,40,44,38],[45,41,44,39,"slice"],[45,46,44,44],[45,47,44,45],[45,48,44,46],[45,49,44,47],[45,50,44,48],[46,4,45,2],[46,5,45,3],[48,4,47,2],[49,4,48,2],[50,4,49,2],[51,4,50,2],[52,4,51,2],[53,4,52,2],[54,4,53,2],[55,4,54,2],[56,4,55,2],[57,4,56,2],[58,4,57,2],[59,4,58,2],[60,4,59,2],[61,4,60,2],[62,4,61,2],[63,4,62,2],[64,4,63,2],[66,4,65,2],[67,4,66,2],[68,4,67,2],[69,4,68,2],[70,4,69,2],[70,8,69,6,"canUseSimpleObservation"],[70,31,69,29],[70,34,69,32],[70,35,69,33],[70,36,69,34],[70,38,69,36,"_canEncode"],[70,48,69,46],[70,49,69,47,"default"],[70,56,69,54],[70,58,69,56,"query"],[70,63,69,61],[70,64,69,62,"description"],[70,75,69,73],[70,76,69,74],[71,4,70,2],[71,8,70,6,"subscribeToSource"],[71,25,70,23],[71,28,70,26,"canUseSimpleObservation"],[71,51,70,49],[71,54,70,52],[71,64,70,62,"observer"],[71,72,70,70],[71,74,70,72],[72,6,71,4],[72,13,71,11],[72,14,71,12],[72,15,71,13],[72,17,71,15,"_subscribeToSimpleQuery"],[72,40,71,38],[72,41,71,39,"default"],[72,48,71,46],[72,50,71,48,"query"],[72,55,71,53],[72,57,71,55,"observer"],[72,65,71,63],[72,67,71,65],[72,71,71,69],[72,72,71,70],[73,4,72,2],[73,5,72,3],[73,8,72,6],[73,18,72,16,"observer"],[73,26,72,24],[73,28,72,26],[74,6,73,4],[74,13,73,11],[74,14,73,12],[74,15,73,13],[74,17,73,15,"_subscribeToQueryReloading"],[74,43,73,41],[74,44,73,42,"default"],[74,51,73,49],[74,53,73,51,"query"],[74,58,73,56],[74,60,73,58,"observer"],[74,68,73,66],[74,70,73,68],[74,74,73,72],[74,75,73,73],[75,4,74,2],[75,5,74,3],[77,4,76,2],[79,4,78,2],[79,8,78,6,"collectionUnsubscribe"],[79,29,78,27],[79,32,78,30,"query"],[79,37,78,35],[79,38,78,36,"collection"],[79,48,78,46],[79,49,78,47,"experimentalSubscribe"],[79,70,78,68],[80,4,79,2],[81,4,80,2],[81,14,80,12,"changeSet"],[81,23,80,21],[81,25,80,23],[82,6,81,4],[82,10,81,8,"hasColumnChanges"],[82,26,81,24],[82,29,81,27],[82,34,81,32],[83,6,82,4],[84,6,83,4,"changeSet"],[84,15,83,13],[84,16,83,14,"forEach"],[84,23,83,21],[84,24,83,22],[84,34,83,22,"_ref"],[84,38,83,22],[84,40,86,7],[85,8,86,7],[85,12,84,14,"record"],[85,18,84,20],[85,21,84,20,"_ref"],[85,25,84,20],[85,26,84,6,"record"],[85,32,84,12],[86,10,85,12,"type"],[86,14,85,16],[86,17,85,16,"_ref"],[86,21,85,16],[86,22,85,6,"type"],[86,26,85,10],[87,8,87,6],[88,8,88,6],[88,12,88,10],[88,21,88,19],[88,26,88,24,"type"],[88,30,88,28],[88,32,88,30],[89,10,89,8],[90,8,90,6],[91,8,91,6],[91,12,91,10,"previousState"],[91,25,91,23],[91,28,91,26,"recordStates"],[91,40,91,38],[91,41,91,39,"get"],[91,44,91,42],[91,45,91,43,"record"],[91,51,91,49],[91,52,91,50,"id"],[91,54,91,52],[91,55,91,53],[92,8,92,6],[92,12,92,10],[92,13,92,11,"previousState"],[92,26,92,24],[92,28,92,26],[93,10,93,8],[94,8,94,6],[96,8,96,6],[97,8,97,6],[97,12,97,10,"newState"],[97,20,97,18],[97,23,97,21,"getRecordState"],[97,37,97,35],[97,38,97,36,"record"],[97,44,97,42],[97,46,97,44,"columnNames"],[97,57,97,55],[97,58,97,56],[98,8,98,6],[98,12,98,10],[98,13,98,11,"recordStatesEqual"],[98,30,98,28],[98,31,98,29,"previousState"],[98,44,98,42],[98,46,98,44,"newState"],[98,54,98,52],[98,55,98,53],[98,57,98,55],[99,10,99,8,"recordStates"],[99,22,99,20],[99,23,99,21,"set"],[99,26,99,24],[99,27,99,25,"record"],[99,33,99,31],[99,34,99,32,"id"],[99,36,99,34],[99,38,99,36,"newState"],[99,46,99,44],[99,47,99,45],[100,10,100,8,"hasColumnChanges"],[100,26,100,24],[100,29,100,27],[100,33,100,31],[101,8,101,6],[102,6,102,4],[102,7,102,5],[102,8,102,6],[103,6,103,4],[103,10,103,8,"hasColumnChanges"],[103,26,103,24],[103,28,103,26],[104,8,104,6],[104,12,104,10,"sourceIsFetching"],[104,28,104,26],[104,32,104,30],[104,33,104,31],[104,34,104,32,"canUseSimpleObservation"],[104,57,104,55],[104,59,104,57],[105,10,105,8],[106,10,106,8,"hasPendingColumnChanges"],[106,33,106,31],[106,36,106,34],[106,40,106,38],[107,8,107,6],[107,9,107,7],[107,15,107,13],[108,10,108,8,"emitCopy"],[108,18,108,16],[108,19,108,17,"observedRecords"],[108,34,108,32],[108,35,108,33],[109,8,109,6],[110,6,110,4],[111,4,111,2],[111,5,111,3],[111,7,111,5],[112,6,112,4,"name"],[112,10,112,8],[112,12,112,10],[112,41,112,39],[113,6,113,4,"query"],[113,11,113,9],[113,13,113,11,"query"],[113,18,113,16],[114,6,114,4,"columnNames"],[114,17,114,15],[114,19,114,17,"columnNames"],[115,4,115,2],[115,5,115,3],[115,6,115,4],[117,4,117,2],[118,4,118,2],[119,4,119,2],[119,8,119,6,"sourceUnsubscribe"],[119,25,119,23],[119,28,119,26,"subscribeToSource"],[119,45,119,43],[119,46,119,44],[119,56,119,54,"recordsOrStatus"],[119,71,119,69],[119,73,119,71],[120,6,120,4],[121,6,121,4],[121,10,121,8],[121,15,121,13],[121,20,121,18,"recordsOrStatus"],[121,35,121,33],[121,37,121,35],[122,8,122,6,"sourceIsFetching"],[122,24,122,22],[122,27,122,25],[122,31,122,29],[123,8,123,6],[124,6,124,4],[125,6,125,4,"sourceIsFetching"],[125,22,125,20],[125,25,125,23],[125,30,125,28],[127,6,127,4],[128,6,128,4],[128,10,128,8,"records"],[128,17,128,15],[128,20,128,18,"recordsOrStatus"],[128,35,128,33],[129,6,129,4],[129,10,129,8,"shouldEmit"],[129,20,129,18],[129,23,129,21,"firstEmission"],[129,36,129,34],[129,40,129,38,"hasPendingColumnChanges"],[129,63,129,61],[129,67,129,65],[129,68,129,66],[129,69,129,67],[129,70,129,68],[129,72,129,70,"_identicalArrays"],[129,88,129,86],[129,89,129,87,"default"],[129,96,129,94],[129,98,129,96,"records"],[129,105,129,103],[129,107,129,105,"observedRecords"],[129,122,129,120],[129,123,129,121],[130,6,130,4,"hasPendingColumnChanges"],[130,29,130,27],[130,32,130,30],[130,37,130,35],[131,6,131,4,"firstEmission"],[131,19,131,17],[131,22,131,20],[131,27,131,25],[133,6,133,4],[134,6,134,4],[134,10,134,8,"arrayDifference"],[134,25,134,23],[134,28,134,26,"require"],[134,35,134,33],[134,36,134,33,"_dependencyMap"],[134,50,134,33],[134,87,134,66],[134,88,134,67],[134,89,134,68,"default"],[134,96,134,75],[135,6,135,4],[135,10,135,4,"_arrayDifference"],[135,26,135,4],[135,29,138,8,"arrayDifference"],[135,44,138,23],[135,45,138,24,"observedRecords"],[135,60,138,39],[135,62,138,41,"records"],[135,69,138,48],[135,70,138,49],[136,8,136,13,"added"],[136,13,136,18],[136,16,136,18,"_arrayDifference"],[136,32,136,18],[136,33,136,6,"added"],[136,38,136,11],[137,8,137,15,"removed"],[137,15,137,22],[137,18,137,22,"_arrayDifference"],[137,34,137,22],[137,35,137,6,"removed"],[137,42,137,13],[138,6,139,4,"observedRecords"],[138,21,139,19],[138,24,139,22,"records"],[138,31,139,29],[140,6,141,4],[141,6,142,4,"removed"],[141,13,142,11],[141,14,142,12,"forEach"],[141,21,142,19],[141,22,142,20],[141,32,142,30,"record"],[141,38,142,36],[141,40,142,38],[142,8,143,6,"recordStates"],[142,20,143,18],[142,21,143,19,"delete"],[142,27,143,25],[142,28,143,26,"record"],[142,34,143,32],[142,35,143,33,"id"],[142,37,143,35],[142,38,143,36],[143,6,144,4],[143,7,144,5],[143,8,144,6],[145,6,146,4],[146,6,147,4,"added"],[146,11,147,9],[146,12,147,10,"forEach"],[146,19,147,17],[146,20,147,18],[146,30,147,28,"newRecord"],[146,39,147,37],[146,41,147,39],[147,8,148,6,"recordStates"],[147,20,148,18],[147,21,148,19,"set"],[147,24,148,22],[147,25,148,23,"newRecord"],[147,34,148,32],[147,35,148,33,"id"],[147,37,148,35],[147,39,148,37,"getRecordState"],[147,53,148,51],[147,54,148,52,"newRecord"],[147,63,148,61],[147,65,148,63,"columnNames"],[147,76,148,74],[147,77,148,75],[147,78,148,76],[148,6,149,4],[148,7,149,5],[148,8,149,6],[150,6,151,4],[151,6,152,4,"shouldEmit"],[151,16,152,14],[151,20,152,18,"emitCopy"],[151,28,152,26],[151,29,152,27,"records"],[151,36,152,34],[151,37,152,35],[152,4,153,2],[152,5,153,3],[152,6,153,4],[153,4,154,2],[153,11,154,9],[153,23,154,21],[154,6,155,4,"unsubscribed"],[154,18,155,16],[154,21,155,19],[154,25,155,23],[155,6,156,4,"sourceUnsubscribe"],[155,23,156,21],[155,24,156,22],[155,25,156,23],[156,6,157,4,"collectionUnsubscribe"],[156,27,157,25],[156,28,157,26],[156,29,157,27],[157,4,158,2],[157,5,158,3],[158,2,159,0],[159,0,159,1],[159,3]],"functionMap":{"names":["<global>","getRecordState","subscribeToQueryWithColumns","emitCopy","<anonymous>","query.collection.experimentalSubscribe$argument_0","changeSet.forEach$argument_0","subscribeToSource$argument_0","removed.forEach$argument_0","added.forEach$argument_0"],"mappings":"AAA;qBCS;CDQ;AEiB;iBCQ;GDE;oDEyB;GFE,GE;GFE;EGM;sBCG;KDmB;GHS;4CKQ;oBCuB;KDE;kBEG;KFE;GLI;SEC;GFI"},"hasCjsExports":true},"type":"js/module"}]}
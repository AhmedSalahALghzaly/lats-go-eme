{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":29,"index":44},"end":{"line":3,"column":84,"index":99}}],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"../../utils/common/makeDecorator","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":44,"index":198},"end":{"line":6,"column":87,"index":241}}],"key":"ADlJXbIyOEW4nk0acJlULW4CQGg=","exportNames":["*"],"imports":1}},{"name":"../../utils/common/memory","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":14,"index":258},"end":{"line":7,"column":50,"index":294}}],"key":"EuFkyAyyhESsuGVl6+WbfZq2Xns=","exportNames":["*"],"imports":1}},{"name":"../common","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":14,"index":310},"end":{"line":8,"column":34,"index":330}}],"key":"vhvRLAgg70cx5BlWoiEZedxJwuQ=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  exports.__esModule = true;\n  exports.default = void 0;\n  var _makeDecorator = _interopRequireDefault(require(_dependencyMap[1], \"../../utils/common/makeDecorator\"));\n  var _memory = require(_dependencyMap[2], \"../../utils/common/memory\");\n  var _common = require(_dependencyMap[3], \"../common\");\n  // Defines a model property representing a date\n  //\n  // Serializes dates to milisecond-precision Unix timestamps, and deserializes them to Date objects\n  // (but passes null values as-is)\n  //\n  // Pass the database column name as an argument\n  //\n  // Examples:\n  //   @date('reacted_at') reactedAt: Date\n  var cache = new Map();\n  (0, _memory.onLowMemory)(function () {\n    return cache.clear();\n  });\n  var dateDecorator = (0, _makeDecorator.default)(function (columnName) {\n    return function (target, key, descriptor) {\n      (0, _common.ensureDecoratorUsedProperly)(columnName, target, key, descriptor);\n      return {\n        configurable: true,\n        enumerable: true,\n        get: function () {\n          // $FlowFixMe\n          var rawValue = this.asModel._getRaw(columnName);\n          if ('number' === typeof rawValue) {\n            var cached = cache.get(rawValue);\n            if (cached) {\n              return cached;\n            }\n            var date = new Date(rawValue);\n            cache.set(rawValue, date);\n            return date;\n          }\n          return null;\n        },\n        set: function (date) {\n          var rawValue = date ? +new Date(date) : null;\n          if (rawValue && date) {\n            cache.set(rawValue, new Date(date));\n          }\n          // $FlowFixMe\n          this.asModel._setRaw(columnName, rawValue);\n        }\n      };\n    };\n  });\n  var _default = exports.default = dateDecorator;\n});","lineCount":55,"map":[[2,2,1,0],[2,14,1,12],[4,2,3,0],[4,6,3,4,"_interopRequireDefault"],[4,28,3,26],[4,31,3,29,"require"],[4,38,3,36],[4,39,3,36,"_dependencyMap"],[4,53,3,36],[4,104,3,83],[4,105,3,84],[5,2,4,0,"exports"],[5,9,4,7],[5,10,4,8,"__esModule"],[5,20,4,18],[5,23,4,21],[5,27,4,25],[6,2,5,0,"exports"],[6,9,5,7],[6,10,5,8,"default"],[6,17,5,15],[6,20,5,18],[6,25,5,23],[6,26,5,24],[7,2,6,0],[7,6,6,4,"_makeDecorator"],[7,20,6,18],[7,23,6,21,"_interopRequireDefault"],[7,45,6,43],[7,46,6,44,"require"],[7,53,6,51],[7,54,6,51,"_dependencyMap"],[7,68,6,51],[7,107,6,86],[7,108,6,87],[7,109,6,88],[8,2,7,0],[8,6,7,4,"_memory"],[8,13,7,11],[8,16,7,14,"require"],[8,23,7,21],[8,24,7,21,"_dependencyMap"],[8,38,7,21],[8,70,7,49],[8,71,7,50],[9,2,8,0],[9,6,8,4,"_common"],[9,13,8,11],[9,16,8,14,"require"],[9,23,8,21],[9,24,8,21,"_dependencyMap"],[9,38,8,21],[9,54,8,33],[9,55,8,34],[10,2,9,0],[11,2,10,0],[12,2,11,0],[13,2,12,0],[14,2,13,0],[15,2,14,0],[16,2,15,0],[17,2,16,0],[18,2,17,0],[19,2,18,0],[19,6,18,4,"cache"],[19,11,18,9],[19,14,18,12],[19,18,18,16,"Map"],[19,21,18,19],[19,22,18,20],[19,23,18,21],[20,2,19,0],[20,3,19,1],[20,4,19,2],[20,6,19,4,"_memory"],[20,13,19,11],[20,14,19,12,"onLowMemory"],[20,25,19,23],[20,27,19,25],[20,39,19,37],[21,4,20,2],[21,11,20,9,"cache"],[21,16,20,14],[21,17,20,15,"clear"],[21,22,20,20],[21,23,20,21],[21,24,20,22],[22,2,21,0],[22,3,21,1],[22,4,21,2],[23,2,22,0],[23,6,22,4,"dateDecorator"],[23,19,22,17],[23,22,22,20],[23,23,22,21],[23,24,22,22],[23,26,22,24,"_makeDecorator"],[23,40,22,38],[23,41,22,39,"default"],[23,48,22,46],[23,50,22,48],[23,60,22,58,"columnName"],[23,70,22,68],[23,72,22,70],[24,4,23,2],[24,11,23,9],[24,21,23,19,"target"],[24,27,23,25],[24,29,23,27,"key"],[24,32,23,30],[24,34,23,32,"descriptor"],[24,44,23,42],[24,46,23,44],[25,6,24,4],[25,7,24,5],[25,8,24,6],[25,10,24,8,"_common"],[25,17,24,15],[25,18,24,16,"ensureDecoratorUsedProperly"],[25,45,24,43],[25,47,24,45,"columnName"],[25,57,24,55],[25,59,24,57,"target"],[25,65,24,63],[25,67,24,65,"key"],[25,70,24,68],[25,72,24,70,"descriptor"],[25,82,24,80],[25,83,24,81],[26,6,25,4],[26,13,25,11],[27,8,26,6,"configurable"],[27,20,26,18],[27,22,26,20],[27,26,26,24],[28,8,27,6,"enumerable"],[28,18,27,16],[28,20,27,18],[28,24,27,22],[29,8,28,6,"get"],[29,11,28,9],[29,13,28,11],[29,22,28,11,"get"],[29,23,28,11],[29,25,28,23],[30,10,29,8],[31,10,30,8],[31,14,30,12,"rawValue"],[31,22,30,20],[31,25,30,23],[31,29,30,27],[31,30,30,28,"asModel"],[31,37,30,35],[31,38,30,36,"_getRaw"],[31,45,30,43],[31,46,30,44,"columnName"],[31,56,30,54],[31,57,30,55],[32,10,31,8],[32,14,31,12],[32,22,31,20],[32,27,31,25],[32,34,31,32,"rawValue"],[32,42,31,40],[32,44,31,42],[33,12,32,10],[33,16,32,14,"cached"],[33,22,32,20],[33,25,32,23,"cache"],[33,30,32,28],[33,31,32,29,"get"],[33,34,32,32],[33,35,32,33,"rawValue"],[33,43,32,41],[33,44,32,42],[34,12,33,10],[34,16,33,14,"cached"],[34,22,33,20],[34,24,33,22],[35,14,34,12],[35,21,34,19,"cached"],[35,27,34,25],[36,12,35,10],[37,12,36,10],[37,16,36,14,"date"],[37,20,36,18],[37,23,36,21],[37,27,36,25,"Date"],[37,31,36,29],[37,32,36,30,"rawValue"],[37,40,36,38],[37,41,36,39],[38,12,37,10,"cache"],[38,17,37,15],[38,18,37,16,"set"],[38,21,37,19],[38,22,37,20,"rawValue"],[38,30,37,28],[38,32,37,30,"date"],[38,36,37,34],[38,37,37,35],[39,12,38,10],[39,19,38,17,"date"],[39,23,38,21],[40,10,39,8],[41,10,40,8],[41,17,40,15],[41,21,40,19],[42,8,41,6],[42,9,41,7],[43,8,42,6,"set"],[43,11,42,9],[43,13,42,11],[43,22,42,11,"set"],[43,23,42,21,"date"],[43,27,42,25],[43,29,42,27],[44,10,43,8],[44,14,43,12,"rawValue"],[44,22,43,20],[44,25,43,23,"date"],[44,29,43,27],[44,32,43,30],[44,33,43,31],[44,37,43,35,"Date"],[44,41,43,39],[44,42,43,40,"date"],[44,46,43,44],[44,47,43,45],[44,50,43,48],[44,54,43,52],[45,10,44,8],[45,14,44,12,"rawValue"],[45,22,44,20],[45,26,44,24,"date"],[45,30,44,28],[45,32,44,30],[46,12,45,10,"cache"],[46,17,45,15],[46,18,45,16,"set"],[46,21,45,19],[46,22,45,20,"rawValue"],[46,30,45,28],[46,32,45,30],[46,36,45,34,"Date"],[46,40,45,38],[46,41,45,39,"date"],[46,45,45,43],[46,46,45,44],[46,47,45,45],[47,10,46,8],[48,10,47,8],[49,10,48,8],[49,14,48,12],[49,15,48,13,"asModel"],[49,22,48,20],[49,23,48,21,"_setRaw"],[49,30,48,28],[49,31,48,29,"columnName"],[49,41,48,39],[49,43,48,41,"rawValue"],[49,51,48,49],[49,52,48,50],[50,8,49,6],[51,6,50,4],[51,7,50,5],[52,4,51,2],[52,5,51,3],[53,2,52,0],[53,3,52,1],[53,4,52,2],[54,2,53,0],[54,6,53,4,"_default"],[54,14,53,12],[54,17,53,15,"exports"],[54,24,53,22],[54,25,53,23,"default"],[54,32,53,30],[54,35,53,33,"dateDecorator"],[54,48,53,46],[55,0,53,47],[55,3]],"functionMap":{"names":["<global>","<anonymous>","get","set"],"mappings":"AAA;yBCkB;CDE;gDCC;WCM;ODa;WEC;OFO;CDG"},"hasCjsExports":true},"type":"js/module"}]}
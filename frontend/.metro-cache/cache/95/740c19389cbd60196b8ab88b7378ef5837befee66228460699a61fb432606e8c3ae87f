{"dependencies":[{"name":"../Subject","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":4,"column":16,"index":122},"end":{"line":4,"column":37,"index":143}}],"key":"rCTmTYO6TJ25UVDxGzxJlC7LYfM=","exportNames":["*"],"imports":1}},{"name":"../scheduler/async","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":5,"column":14,"index":159},"end":{"line":5,"column":43,"index":188}}],"key":"DwsQXSm/xtyztPccmczjezyRPzQ=","exportNames":["*"],"imports":1}},{"name":"../Subscription","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":21,"index":211},"end":{"line":6,"column":47,"index":237}}],"key":"qDNYA5CISvqasHYRTq3SM2YKHoA=","exportNames":["*"],"imports":1}},{"name":"../util/lift","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":13,"index":252},"end":{"line":7,"column":36,"index":275}}],"key":"QCxE0PdfaUm4cT9qPVYaaaoo46A=","exportNames":["*"],"imports":1}},{"name":"./OperatorSubscriber","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":27,"index":304},"end":{"line":8,"column":58,"index":335}}],"key":"5a4JxA+rxI0MIxewBKZddpWmHrQ=","exportNames":["*"],"imports":1}},{"name":"../util/arrRemove","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":9,"column":18,"index":355},"end":{"line":9,"column":46,"index":383}}],"key":"ehdm0jzUII0B9EiJDjheyjiioB4=","exportNames":["*"],"imports":1}},{"name":"../util/args","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":10,"column":13,"index":398},"end":{"line":10,"column":36,"index":421}}],"key":"EcXGacScQcK/IWUx+vcVFPWpUWc=","exportNames":["*"],"imports":1}},{"name":"../util/executeSchedule","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":11,"column":24,"index":447},"end":{"line":11,"column":58,"index":481}}],"key":"Fxw52IEQzCrpMSDADIsV7+EnCEs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.windowTime = void 0;\n  var Subject_1 = require(_dependencyMap[0], \"../Subject\");\n  var async_1 = require(_dependencyMap[1], \"../scheduler/async\");\n  var Subscription_1 = require(_dependencyMap[2], \"../Subscription\");\n  var lift_1 = require(_dependencyMap[3], \"../util/lift\");\n  var OperatorSubscriber_1 = require(_dependencyMap[4], \"./OperatorSubscriber\");\n  var arrRemove_1 = require(_dependencyMap[5], \"../util/arrRemove\");\n  var args_1 = require(_dependencyMap[6], \"../util/args\");\n  var executeSchedule_1 = require(_dependencyMap[7], \"../util/executeSchedule\");\n  function windowTime(windowTimeSpan) {\n    var _a, _b;\n    var otherArgs = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n      otherArgs[_i - 1] = arguments[_i];\n    }\n    var scheduler = (_a = args_1.popScheduler(otherArgs)) !== null && _a !== void 0 ? _a : async_1.asyncScheduler;\n    var windowCreationInterval = (_b = otherArgs[0]) !== null && _b !== void 0 ? _b : null;\n    var maxWindowSize = otherArgs[1] || Infinity;\n    return lift_1.operate(function (source, subscriber) {\n      var windowRecords = [];\n      var restartOnClose = false;\n      var closeWindow = function (record) {\n        var window = record.window,\n          subs = record.subs;\n        window.complete();\n        subs.unsubscribe();\n        arrRemove_1.arrRemove(windowRecords, record);\n        restartOnClose && startWindow();\n      };\n      var startWindow = function () {\n        if (windowRecords) {\n          var subs = new Subscription_1.Subscription();\n          subscriber.add(subs);\n          var window_1 = new Subject_1.Subject();\n          var record_1 = {\n            window: window_1,\n            subs: subs,\n            seen: 0\n          };\n          windowRecords.push(record_1);\n          subscriber.next(window_1.asObservable());\n          executeSchedule_1.executeSchedule(subs, scheduler, function () {\n            return closeWindow(record_1);\n          }, windowTimeSpan);\n        }\n      };\n      if (windowCreationInterval !== null && windowCreationInterval >= 0) {\n        executeSchedule_1.executeSchedule(subscriber, scheduler, startWindow, windowCreationInterval, true);\n      } else {\n        restartOnClose = true;\n      }\n      startWindow();\n      var loop = function (cb) {\n        return windowRecords.slice().forEach(cb);\n      };\n      var terminate = function (cb) {\n        loop(function (_a) {\n          var window = _a.window;\n          return cb(window);\n        });\n        cb(subscriber);\n        subscriber.unsubscribe();\n      };\n      source.subscribe(OperatorSubscriber_1.createOperatorSubscriber(subscriber, function (value) {\n        loop(function (record) {\n          record.window.next(value);\n          maxWindowSize <= ++record.seen && closeWindow(record);\n        });\n      }, function () {\n        return terminate(function (consumer) {\n          return consumer.complete();\n        });\n      }, function (err) {\n        return terminate(function (consumer) {\n          return consumer.error(err);\n        });\n      }));\n      return function () {\n        windowRecords = null;\n      };\n    });\n  }\n  exports.windowTime = windowTime;\n});","lineCount":90,"map":[[2,2,1,0],[2,14,1,12],[4,2,2,0,"Object"],[4,8,2,6],[4,9,2,7,"defineProperty"],[4,23,2,21],[4,24,2,22,"exports"],[4,31,2,29],[4,33,2,31],[4,45,2,43],[4,47,2,45],[5,4,2,47,"value"],[5,9,2,52],[5,11,2,54],[6,2,2,59],[6,3,2,60],[6,4,2,61],[7,2,3,0,"exports"],[7,9,3,7],[7,10,3,8,"windowTime"],[7,20,3,18],[7,23,3,21],[7,28,3,26],[7,29,3,27],[8,2,4,0],[8,6,4,4,"Subject_1"],[8,15,4,13],[8,18,4,16,"require"],[8,25,4,23],[8,26,4,23,"_dependencyMap"],[8,40,4,23],[8,57,4,36],[8,58,4,37],[9,2,5,0],[9,6,5,4,"async_1"],[9,13,5,11],[9,16,5,14,"require"],[9,23,5,21],[9,24,5,21,"_dependencyMap"],[9,38,5,21],[9,63,5,42],[9,64,5,43],[10,2,6,0],[10,6,6,4,"Subscription_1"],[10,20,6,18],[10,23,6,21,"require"],[10,30,6,28],[10,31,6,28,"_dependencyMap"],[10,45,6,28],[10,67,6,46],[10,68,6,47],[11,2,7,0],[11,6,7,4,"lift_1"],[11,12,7,10],[11,15,7,13,"require"],[11,22,7,20],[11,23,7,20,"_dependencyMap"],[11,37,7,20],[11,56,7,35],[11,57,7,36],[12,2,8,0],[12,6,8,4,"OperatorSubscriber_1"],[12,26,8,24],[12,29,8,27,"require"],[12,36,8,34],[12,37,8,34,"_dependencyMap"],[12,51,8,34],[12,78,8,57],[12,79,8,58],[13,2,9,0],[13,6,9,4,"arrRemove_1"],[13,17,9,15],[13,20,9,18,"require"],[13,27,9,25],[13,28,9,25,"_dependencyMap"],[13,42,9,25],[13,66,9,45],[13,67,9,46],[14,2,10,0],[14,6,10,4,"args_1"],[14,12,10,10],[14,15,10,13,"require"],[14,22,10,20],[14,23,10,20,"_dependencyMap"],[14,37,10,20],[14,56,10,35],[14,57,10,36],[15,2,11,0],[15,6,11,4,"executeSchedule_1"],[15,23,11,21],[15,26,11,24,"require"],[15,33,11,31],[15,34,11,31,"_dependencyMap"],[15,48,11,31],[15,78,11,57],[15,79,11,58],[16,2,12,0],[16,11,12,9,"windowTime"],[16,21,12,19,"windowTime"],[16,22,12,20,"windowTimeSpan"],[16,36,12,34],[16,38,12,36],[17,4,13,4],[17,8,13,8,"_a"],[17,10,13,10],[17,12,13,12,"_b"],[17,14,13,14],[18,4,14,4],[18,8,14,8,"otherArgs"],[18,17,14,17],[18,20,14,20],[18,22,14,22],[19,4,15,4],[19,9,15,9],[19,13,15,13,"_i"],[19,15,15,15],[19,18,15,18],[19,19,15,19],[19,21,15,21,"_i"],[19,23,15,23],[19,26,15,26,"arguments"],[19,35,15,35],[19,36,15,36,"length"],[19,42,15,42],[19,44,15,44,"_i"],[19,46,15,46],[19,48,15,48],[19,50,15,50],[20,6,16,8,"otherArgs"],[20,15,16,17],[20,16,16,18,"_i"],[20,18,16,20],[20,21,16,23],[20,22,16,24],[20,23,16,25],[20,26,16,28,"arguments"],[20,35,16,37],[20,36,16,38,"_i"],[20,38,16,40],[20,39,16,41],[21,4,17,4],[22,4,18,4],[22,8,18,8,"scheduler"],[22,17,18,17],[22,20,18,20],[22,21,18,21,"_a"],[22,23,18,23],[22,26,18,26,"args_1"],[22,32,18,32],[22,33,18,33,"popScheduler"],[22,45,18,45],[22,46,18,46,"otherArgs"],[22,55,18,55],[22,56,18,56],[22,62,18,62],[22,66,18,66],[22,70,18,70,"_a"],[22,72,18,72],[22,77,18,77],[22,82,18,82],[22,83,18,83],[22,86,18,86,"_a"],[22,88,18,88],[22,91,18,91,"async_1"],[22,98,18,98],[22,99,18,99,"asyncScheduler"],[22,113,18,113],[23,4,19,4],[23,8,19,8,"windowCreationInterval"],[23,30,19,30],[23,33,19,33],[23,34,19,34,"_b"],[23,36,19,36],[23,39,19,39,"otherArgs"],[23,48,19,48],[23,49,19,49],[23,50,19,50],[23,51,19,51],[23,57,19,57],[23,61,19,61],[23,65,19,65,"_b"],[23,67,19,67],[23,72,19,72],[23,77,19,77],[23,78,19,78],[23,81,19,81,"_b"],[23,83,19,83],[23,86,19,86],[23,90,19,90],[24,4,20,4],[24,8,20,8,"maxWindowSize"],[24,21,20,21],[24,24,20,24,"otherArgs"],[24,33,20,33],[24,34,20,34],[24,35,20,35],[24,36,20,36],[24,40,20,40,"Infinity"],[24,48,20,48],[25,4,21,4],[25,11,21,11,"lift_1"],[25,17,21,17],[25,18,21,18,"operate"],[25,25,21,25],[25,26,21,26],[25,36,21,36,"source"],[25,42,21,42],[25,44,21,44,"subscriber"],[25,54,21,54],[25,56,21,56],[26,6,22,8],[26,10,22,12,"windowRecords"],[26,23,22,25],[26,26,22,28],[26,28,22,30],[27,6,23,8],[27,10,23,12,"restartOnClose"],[27,24,23,26],[27,27,23,29],[27,32,23,34],[28,6,24,8],[28,10,24,12,"closeWindow"],[28,21,24,23],[28,24,24,26],[28,33,24,26,"closeWindow"],[28,34,24,36,"record"],[28,40,24,42],[28,42,24,44],[29,8,25,12],[29,12,25,16,"window"],[29,18,25,22],[29,21,25,25,"record"],[29,27,25,31],[29,28,25,32,"window"],[29,34,25,38],[30,10,25,40,"subs"],[30,14,25,44],[30,17,25,47,"record"],[30,23,25,53],[30,24,25,54,"subs"],[30,28,25,58],[31,8,26,12,"window"],[31,14,26,18],[31,15,26,19,"complete"],[31,23,26,27],[31,24,26,28],[31,25,26,29],[32,8,27,12,"subs"],[32,12,27,16],[32,13,27,17,"unsubscribe"],[32,24,27,28],[32,25,27,29],[32,26,27,30],[33,8,28,12,"arrRemove_1"],[33,19,28,23],[33,20,28,24,"arrRemove"],[33,29,28,33],[33,30,28,34,"windowRecords"],[33,43,28,47],[33,45,28,49,"record"],[33,51,28,55],[33,52,28,56],[34,8,29,12,"restartOnClose"],[34,22,29,26],[34,26,29,30,"startWindow"],[34,37,29,41],[34,38,29,42],[34,39,29,43],[35,6,30,8],[35,7,30,9],[36,6,31,8],[36,10,31,12,"startWindow"],[36,21,31,23],[36,24,31,26],[36,33,31,26,"startWindow"],[36,34,31,26],[36,36,31,38],[37,8,32,12],[37,12,32,16,"windowRecords"],[37,25,32,29],[37,27,32,31],[38,10,33,16],[38,14,33,20,"subs"],[38,18,33,24],[38,21,33,27],[38,25,33,31,"Subscription_1"],[38,39,33,45],[38,40,33,46,"Subscription"],[38,52,33,58],[38,53,33,59],[38,54,33,60],[39,10,34,16,"subscriber"],[39,20,34,26],[39,21,34,27,"add"],[39,24,34,30],[39,25,34,31,"subs"],[39,29,34,35],[39,30,34,36],[40,10,35,16],[40,14,35,20,"window_1"],[40,22,35,28],[40,25,35,31],[40,29,35,35,"Subject_1"],[40,38,35,44],[40,39,35,45,"Subject"],[40,46,35,52],[40,47,35,53],[40,48,35,54],[41,10,36,16],[41,14,36,20,"record_1"],[41,22,36,28],[41,25,36,31],[42,12,37,20,"window"],[42,18,37,26],[42,20,37,28,"window_1"],[42,28,37,36],[43,12,38,20,"subs"],[43,16,38,24],[43,18,38,26,"subs"],[43,22,38,30],[44,12,39,20,"seen"],[44,16,39,24],[44,18,39,26],[45,10,40,16],[45,11,40,17],[46,10,41,16,"windowRecords"],[46,23,41,29],[46,24,41,30,"push"],[46,28,41,34],[46,29,41,35,"record_1"],[46,37,41,43],[46,38,41,44],[47,10,42,16,"subscriber"],[47,20,42,26],[47,21,42,27,"next"],[47,25,42,31],[47,26,42,32,"window_1"],[47,34,42,40],[47,35,42,41,"asObservable"],[47,47,42,53],[47,48,42,54],[47,49,42,55],[47,50,42,56],[48,10,43,16,"executeSchedule_1"],[48,27,43,33],[48,28,43,34,"executeSchedule"],[48,43,43,49],[48,44,43,50,"subs"],[48,48,43,54],[48,50,43,56,"scheduler"],[48,59,43,65],[48,61,43,67],[48,73,43,79],[49,12,43,81],[49,19,43,88,"closeWindow"],[49,30,43,99],[49,31,43,100,"record_1"],[49,39,43,108],[49,40,43,109],[50,10,43,111],[50,11,43,112],[50,13,43,114,"windowTimeSpan"],[50,27,43,128],[50,28,43,129],[51,8,44,12],[52,6,45,8],[52,7,45,9],[53,6,46,8],[53,10,46,12,"windowCreationInterval"],[53,32,46,34],[53,37,46,39],[53,41,46,43],[53,45,46,47,"windowCreationInterval"],[53,67,46,69],[53,71,46,73],[53,72,46,74],[53,74,46,76],[54,8,47,12,"executeSchedule_1"],[54,25,47,29],[54,26,47,30,"executeSchedule"],[54,41,47,45],[54,42,47,46,"subscriber"],[54,52,47,56],[54,54,47,58,"scheduler"],[54,63,47,67],[54,65,47,69,"startWindow"],[54,76,47,80],[54,78,47,82,"windowCreationInterval"],[54,100,47,104],[54,102,47,106],[54,106,47,110],[54,107,47,111],[55,6,48,8],[55,7,48,9],[55,13,49,13],[56,8,50,12,"restartOnClose"],[56,22,50,26],[56,25,50,29],[56,29,50,33],[57,6,51,8],[58,6,52,8,"startWindow"],[58,17,52,19],[58,18,52,20],[58,19,52,21],[59,6,53,8],[59,10,53,12,"loop"],[59,14,53,16],[59,17,53,19],[59,26,53,19,"loop"],[59,27,53,29,"cb"],[59,29,53,31],[59,31,53,33],[60,8,53,35],[60,15,53,42,"windowRecords"],[60,28,53,55],[60,29,53,56,"slice"],[60,34,53,61],[60,35,53,62],[60,36,53,63],[60,37,53,64,"forEach"],[60,44,53,71],[60,45,53,72,"cb"],[60,47,53,74],[60,48,53,75],[61,6,53,77],[61,7,53,78],[62,6,54,8],[62,10,54,12,"terminate"],[62,19,54,21],[62,22,54,24],[62,31,54,24,"terminate"],[62,32,54,34,"cb"],[62,34,54,36],[62,36,54,38],[63,8,55,12,"loop"],[63,12,55,16],[63,13,55,17],[63,23,55,27,"_a"],[63,25,55,29],[63,27,55,31],[64,10,56,16],[64,14,56,20,"window"],[64,20,56,26],[64,23,56,29,"_a"],[64,25,56,31],[64,26,56,32,"window"],[64,32,56,38],[65,10,57,16],[65,17,57,23,"cb"],[65,19,57,25],[65,20,57,26,"window"],[65,26,57,32],[65,27,57,33],[66,8,58,12],[66,9,58,13],[66,10,58,14],[67,8,59,12,"cb"],[67,10,59,14],[67,11,59,15,"subscriber"],[67,21,59,25],[67,22,59,26],[68,8,60,12,"subscriber"],[68,18,60,22],[68,19,60,23,"unsubscribe"],[68,30,60,34],[68,31,60,35],[68,32,60,36],[69,6,61,8],[69,7,61,9],[70,6,62,8,"source"],[70,12,62,14],[70,13,62,15,"subscribe"],[70,22,62,24],[70,23,62,25,"OperatorSubscriber_1"],[70,43,62,45],[70,44,62,46,"createOperatorSubscriber"],[70,68,62,70],[70,69,62,71,"subscriber"],[70,79,62,81],[70,81,62,83],[70,91,62,93,"value"],[70,96,62,98],[70,98,62,100],[71,8,63,12,"loop"],[71,12,63,16],[71,13,63,17],[71,23,63,27,"record"],[71,29,63,33],[71,31,63,35],[72,10,64,16,"record"],[72,16,64,22],[72,17,64,23,"window"],[72,23,64,29],[72,24,64,30,"next"],[72,28,64,34],[72,29,64,35,"value"],[72,34,64,40],[72,35,64,41],[73,10,65,16,"maxWindowSize"],[73,23,65,29],[73,27,65,33],[73,29,65,35,"record"],[73,35,65,41],[73,36,65,42,"seen"],[73,40,65,46],[73,44,65,50,"closeWindow"],[73,55,65,61],[73,56,65,62,"record"],[73,62,65,68],[73,63,65,69],[74,8,66,12],[74,9,66,13],[74,10,66,14],[75,6,67,8],[75,7,67,9],[75,9,67,11],[75,21,67,23],[76,8,67,25],[76,15,67,32,"terminate"],[76,24,67,41],[76,25,67,42],[76,35,67,52,"consumer"],[76,43,67,60],[76,45,67,62],[77,10,67,64],[77,17,67,71,"consumer"],[77,25,67,79],[77,26,67,80,"complete"],[77,34,67,88],[77,35,67,89],[77,36,67,90],[78,8,67,92],[78,9,67,93],[78,10,67,94],[79,6,67,96],[79,7,67,97],[79,9,67,99],[79,19,67,109,"err"],[79,22,67,112],[79,24,67,114],[80,8,67,116],[80,15,67,123,"terminate"],[80,24,67,132],[80,25,67,133],[80,35,67,143,"consumer"],[80,43,67,151],[80,45,67,153],[81,10,67,155],[81,17,67,162,"consumer"],[81,25,67,170],[81,26,67,171,"error"],[81,31,67,176],[81,32,67,177,"err"],[81,35,67,180],[81,36,67,181],[82,8,67,183],[82,9,67,184],[82,10,67,185],[83,6,67,187],[83,7,67,188],[83,8,67,189],[83,9,67,190],[84,6,68,8],[84,13,68,15],[84,25,68,27],[85,8,69,12,"windowRecords"],[85,21,69,25],[85,24,69,28],[85,28,69,32],[86,6,70,8],[86,7,70,9],[87,4,71,4],[87,5,71,5],[87,6,71,6],[88,2,72,0],[89,2,73,0,"exports"],[89,9,73,7],[89,10,73,8,"windowTime"],[89,20,73,18],[89,23,73,21,"windowTime"],[89,33,73,31],[90,0,73,32],[90,3]],"functionMap":{"names":["<global>","windowTime","lift_1.operate$argument_0","closeWindow","startWindow","executeSchedule_1.executeSchedule$argument_2","loop","terminate","loop$argument_0","OperatorSubscriber_1.createOperatorSubscriber$argument_1","OperatorSubscriber_1.createOperatorSubscriber$argument_2","terminate$argument_0","OperatorSubscriber_1.createOperatorSubscriber$argument_3","<anonymous>"],"mappings":"AAA;ACW;0BCS;0BCG;SDM;0BEC;mECY,6CD;SFE;mBIQ,2DJ;wBKC;iBCC;aDG;SLG;mFOC;iBDC;aCG;SPC,EQ,+BC,mDD,IR,EU,kCD,mDC,IV;eWC;SXE;KDC;CDC"},"hasCjsExports":true},"type":"js/module"}]}
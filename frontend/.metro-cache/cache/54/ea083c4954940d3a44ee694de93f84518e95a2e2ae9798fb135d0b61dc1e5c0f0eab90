{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":3,"column":29,"index":44},"end":{"line":3,"column":84,"index":99}}],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":6,"column":43,"index":197},"end":{"line":6,"column":88,"index":242}}],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/inheritsLoose","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":7,"column":45,"index":290},"end":{"line":7,"column":92,"index":337}}],"key":"sS1Tf9zJB8kQBsfn9SN993z0kx4=","exportNames":["*"],"imports":1}},{"name":"../utils/common","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":8,"column":14,"index":354},"end":{"line":8,"column":40,"index":380}}],"key":"rc7/Oe8wiG+gaPEDKqm7sPGCPB4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _slicedToArray = require(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\").default;\n  var _interopRequireDefault = require(_dependencyMap[1], \"@babel/runtime/helpers/interopRequireDefault\");\n  exports.__esModule = true;\n  exports.default = void 0;\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var _inheritsLoose2 = _interopRequireDefault(require(_dependencyMap[3], \"@babel/runtime/helpers/inheritsLoose\"));\n  var _common = require(_dependencyMap[4], \"../utils/common\");\n  /* eslint-disable no-use-before-define */\n  var ReaderInterfaceImpl = /*#__PURE__*/function () {\n    function ReaderInterfaceImpl(queue, item) {\n      this.__workQueue = queue;\n      this.__workItem = item;\n    }\n    var _proto = ReaderInterfaceImpl.prototype;\n    _proto.__validateQueue = function () {\n      (0, _common.invariant)(this.__workQueue._queue[0] === this.__workItem, 'Illegal call on a reader/writer that should no longer be running');\n    };\n    _proto.callReader = function (reader) {\n      this.__validateQueue();\n      return this.__workQueue.subAction(reader);\n    };\n    return ReaderInterfaceImpl;\n  }();\n  var WriterInterfaceImpl = /*#__PURE__*/function (_ReaderInterfaceImpl) {\n    function WriterInterfaceImpl() {\n      return _ReaderInterfaceImpl.apply(this, arguments) || this;\n    }\n    (0, _inheritsLoose2.default)(WriterInterfaceImpl, _ReaderInterfaceImpl);\n    var _proto2 = WriterInterfaceImpl.prototype;\n    _proto2.callWriter = function (writer) {\n      this.__validateQueue();\n      return this.__workQueue.subAction(writer);\n    };\n    _proto2.batch = function () {\n      this.__validateQueue();\n      for (var _len = arguments.length, records = new Array(_len), _key = 0; _key < _len; _key++) {\n        records[_key] = arguments[_key];\n      }\n      return this.__workQueue._db.batch(records);\n    };\n    return WriterInterfaceImpl;\n  }(ReaderInterfaceImpl);\n  var actionInterface = function (queue, item) {\n    return item.isWriter ? new WriterInterfaceImpl(queue, item) : new ReaderInterfaceImpl(queue, item);\n  };\n  var WorkQueue = exports.default = /*#__PURE__*/function () {\n    function WorkQueue(db) {\n      this._queue = [];\n      this._subActionIncoming = false;\n      this._db = db;\n    }\n    var _proto3 = WorkQueue.prototype;\n    _proto3.enqueue = function (work, description, isWriter) {\n      var _this = this;\n      // If a subAction was scheduled using subAction(), database.write/read() calls skip the line\n      if (this._subActionIncoming) {\n        this._subActionIncoming = false;\n        var currentWork = this._queue[0];\n        if (!currentWork.isWriter) {\n          (0, _common.invariant)(!isWriter, 'Cannot call a writer block from a reader block');\n        }\n        return work(actionInterface(this, currentWork));\n      }\n      return new Promise(function (resolve, reject) {\n        var workItem = {\n          work: work,\n          isWriter: isWriter,\n          resolve: resolve,\n          reject: reject,\n          description: description\n        };\n        if ('production' !== process.env.NODE_ENV && _this._queue.length) {\n          setTimeout(function () {\n            var queue = _this._queue;\n            var current = queue[0];\n            if (current === workItem || !queue.includes(workItem)) {\n              return;\n            }\n            var enqueuedKind = isWriter ? 'writer' : 'reader';\n            var currentKind = current.isWriter ? 'writer' : 'reader';\n            _common.logger.warn(\"The \".concat(enqueuedKind, \" you're trying to run (\").concat(description || 'unnamed', \") can't be performed yet, because there are \").concat(queue.length, \" other readers/writers in the queue.\\n\\nCurrent \").concat(currentKind, \": \").concat(current.description || 'unnamed', \".\\n\\nIf everything is working fine, you can safely ignore this message (queueing is working as expected). But if your readers/writers are not running, it's because the current \").concat(currentKind, \" is stuck.\\nRemember that if you're calling a reader/writer from another reader/writer, you must use callReader()/callWriter(). See docs for more details.\"));\n            _common.logger.log(\"Enqueued \".concat(enqueuedKind, \":\"), work);\n            _common.logger.log(\"Running \".concat(currentKind, \":\"), current.work);\n          }, 1500);\n        }\n        _this._queue.push(workItem);\n        if (1 === _this._queue.length) {\n          _this._executeNext();\n        }\n      });\n    };\n    _proto3.subAction = function (work) {\n      try {\n        this._subActionIncoming = true;\n        var promise = work();\n        (0, _common.invariant)(!this._subActionIncoming, 'callReader/callWriter call must call a reader/writer synchronously');\n        return promise;\n      } catch (error) {\n        this._subActionIncoming = false;\n        return Promise.reject(error);\n      }\n    };\n    _proto3._executeNext = function () {\n      return new Promise(function ($return, $error) {\n        var _this2, workItem, work, resolve, reject, isWriter, workPromise;\n        _this2 = this;\n        workItem = this._queue[0];\n        var _workItem = workItem;\n        work = _workItem.work;\n        resolve = _workItem.resolve;\n        reject = _workItem.reject;\n        isWriter = _workItem.isWriter;\n        var $Try_2_Post = function () {\n          try {\n            this._queue.shift();\n            if (this._queue.length) {\n              setTimeout(function () {\n                return _this2._executeNext();\n              }, 0);\n            }\n            return $return();\n          } catch ($boundEx) {\n            return $error($boundEx);\n          }\n        }.bind(this);\n        var $Try_2_Catch = function $Try_2_Catch(error) {\n          try {\n            reject(error);\n            return $Try_2_Post();\n          } catch ($boundEx) {\n            return $error($boundEx);\n          }\n        };\n        try {\n          workPromise = work(actionInterface(this, workItem));\n          if ('production' !== process.env.NODE_ENV) {\n            (0, _common.invariant)(workPromise instanceof Promise, \"The function passed to database.\".concat(isWriter ? 'write' : 'read', \"() or a method marked as @\").concat(isWriter ? 'writer' : 'reader', \" must be asynchronous (marked as 'async' or always returning a promise) (in: \").concat(workItem.description || 'unnamed', \")\"));\n          }\n          return Promise.resolve(workPromise).then(function ($await_3) {\n            try {\n              resolve($await_3);\n              return $Try_2_Post();\n            } catch ($boundEx) {\n              return $Try_2_Catch($boundEx);\n            }\n          }, $Try_2_Catch);\n        } catch (error) {\n          $Try_2_Catch(error);\n        }\n      }.bind(this));\n    };\n    _proto3._abortPendingWork = function () {\n      (0, _common.invariant)(1 <= this._queue.length, '_abortPendingWork can only be called from a reader/writer');\n      var workToAbort = this._queue.splice(1); // leave only the caller on the queue\n      workToAbort.forEach(function (_ref) {\n        var reject = _ref.reject;\n        reject(new Error('Reader/writer has been aborted because the database was reset'));\n      });\n    };\n    return (0, _createClass2.default)(WorkQueue, [{\n      key: \"isWriterRunning\",\n      get: function get() {\n        var _this$_queue = _slicedToArray(this._queue, 1),\n          item = _this$_queue[0];\n        return Boolean(item && item.isWriter);\n      }\n    }]);\n  }();\n});","lineCount":172,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_slicedToArray"],[4,20,1,13],[4,23,1,13,"require"],[4,30,1,13],[4,31,1,13,"_dependencyMap"],[4,45,1,13],[4,90,1,13,"default"],[4,97,1,13],[5,2,3,0],[5,6,3,4,"_interopRequireDefault"],[5,28,3,26],[5,31,3,29,"require"],[5,38,3,36],[5,39,3,36,"_dependencyMap"],[5,53,3,36],[5,104,3,83],[5,105,3,84],[6,2,4,0,"exports"],[6,9,4,7],[6,10,4,8,"__esModule"],[6,20,4,18],[6,23,4,21],[6,27,4,25],[7,2,5,0,"exports"],[7,9,5,7],[7,10,5,8,"default"],[7,17,5,15],[7,20,5,18],[7,25,5,23],[7,26,5,24],[8,2,6,0],[8,6,6,4,"_createClass2"],[8,19,6,17],[8,22,6,20,"_interopRequireDefault"],[8,44,6,42],[8,45,6,43,"require"],[8,52,6,50],[8,53,6,50,"_dependencyMap"],[8,67,6,50],[8,108,6,87],[8,109,6,88],[8,110,6,89],[9,2,7,0],[9,6,7,4,"_inheritsLoose2"],[9,21,7,19],[9,24,7,22,"_interopRequireDefault"],[9,46,7,44],[9,47,7,45,"require"],[9,54,7,52],[9,55,7,52,"_dependencyMap"],[9,69,7,52],[9,112,7,91],[9,113,7,92],[9,114,7,93],[10,2,8,0],[10,6,8,4,"_common"],[10,13,8,11],[10,16,8,14,"require"],[10,23,8,21],[10,24,8,21,"_dependencyMap"],[10,38,8,21],[10,60,8,39],[10,61,8,40],[11,2,9,0],[12,2,10,0],[12,6,10,4,"ReaderInterfaceImpl"],[12,25,10,23],[12,28,10,26],[12,41,10,39],[12,53,10,51],[13,4,11,2],[13,13,11,11,"ReaderInterfaceImpl"],[13,32,11,30,"ReaderInterfaceImpl"],[13,33,11,31,"queue"],[13,38,11,36],[13,40,11,38,"item"],[13,44,11,42],[13,46,11,44],[14,6,12,4],[14,10,12,8],[14,11,12,9,"__workQueue"],[14,22,12,20],[14,25,12,23,"queue"],[14,30,12,28],[15,6,13,4],[15,10,13,8],[15,11,13,9,"__workItem"],[15,21,13,19],[15,24,13,22,"item"],[15,28,13,26],[16,4,14,2],[17,4,15,2],[17,8,15,6,"_proto"],[17,14,15,12],[17,17,15,15,"ReaderInterfaceImpl"],[17,36,15,34],[17,37,15,35,"prototype"],[17,46,15,44],[18,4,16,2,"_proto"],[18,10,16,8],[18,11,16,9,"__validateQueue"],[18,26,16,24],[18,29,16,27],[18,41,16,39],[19,6,17,4],[19,7,17,5],[19,8,17,6],[19,10,17,8,"_common"],[19,17,17,15],[19,18,17,16,"invariant"],[19,27,17,25],[19,29,17,27],[19,33,17,31],[19,34,17,32,"__workQueue"],[19,45,17,43],[19,46,17,44,"_queue"],[19,52,17,50],[19,53,17,51],[19,54,17,52],[19,55,17,53],[19,60,17,58],[19,64,17,62],[19,65,17,63,"__workItem"],[19,75,17,73],[19,77,17,75],[19,143,17,141],[19,144,17,142],[20,4,18,2],[20,5,18,3],[21,4,19,2,"_proto"],[21,10,19,8],[21,11,19,9,"callReader"],[21,21,19,19],[21,24,19,22],[21,34,19,32,"reader"],[21,40,19,38],[21,42,19,40],[22,6,20,4],[22,10,20,8],[22,11,20,9,"__validateQueue"],[22,26,20,24],[22,27,20,25],[22,28,20,26],[23,6,21,4],[23,13,21,11],[23,17,21,15],[23,18,21,16,"__workQueue"],[23,29,21,27],[23,30,21,28,"subAction"],[23,39,21,37],[23,40,21,38,"reader"],[23,46,21,44],[23,47,21,45],[24,4,22,2],[24,5,22,3],[25,4,23,2],[25,11,23,9,"ReaderInterfaceImpl"],[25,30,23,28],[26,2,24,0],[26,3,24,1],[26,4,24,2],[26,5,24,3],[27,2,25,0],[27,6,25,4,"WriterInterfaceImpl"],[27,25,25,23],[27,28,25,26],[27,41,25,39],[27,51,25,49,"_ReaderInterfaceImpl"],[27,71,25,69],[27,73,25,71],[28,4,26,2],[28,13,26,11,"WriterInterfaceImpl"],[28,32,26,30,"WriterInterfaceImpl"],[28,33,26,30],[28,35,26,33],[29,6,27,4],[29,13,27,11,"_ReaderInterfaceImpl"],[29,33,27,31],[29,34,27,32,"apply"],[29,39,27,37],[29,40,27,38],[29,44,27,42],[29,46,27,44,"arguments"],[29,55,27,53],[29,56,27,54],[29,60,27,58],[29,64,27,62],[30,4,28,2],[31,4,29,2],[31,5,29,3],[31,6,29,4],[31,8,29,6,"_inheritsLoose2"],[31,23,29,21],[31,24,29,22,"default"],[31,31,29,29],[31,33,29,31,"WriterInterfaceImpl"],[31,52,29,50],[31,54,29,52,"_ReaderInterfaceImpl"],[31,74,29,72],[31,75,29,73],[32,4,30,2],[32,8,30,6,"_proto2"],[32,15,30,13],[32,18,30,16,"WriterInterfaceImpl"],[32,37,30,35],[32,38,30,36,"prototype"],[32,47,30,45],[33,4,31,2,"_proto2"],[33,11,31,9],[33,12,31,10,"callWriter"],[33,22,31,20],[33,25,31,23],[33,35,31,33,"writer"],[33,41,31,39],[33,43,31,41],[34,6,32,4],[34,10,32,8],[34,11,32,9,"__validateQueue"],[34,26,32,24],[34,27,32,25],[34,28,32,26],[35,6,33,4],[35,13,33,11],[35,17,33,15],[35,18,33,16,"__workQueue"],[35,29,33,27],[35,30,33,28,"subAction"],[35,39,33,37],[35,40,33,38,"writer"],[35,46,33,44],[35,47,33,45],[36,4,34,2],[36,5,34,3],[37,4,35,2,"_proto2"],[37,11,35,9],[37,12,35,10,"batch"],[37,17,35,15],[37,20,35,18],[37,32,35,40],[38,6,36,4],[38,10,36,8],[38,11,36,9,"__validateQueue"],[38,26,36,24],[38,27,36,25],[38,28,36,26],[39,6,36,27],[39,15,36,27,"_len"],[39,19,36,27],[39,22,36,27,"arguments"],[39,31,36,27],[39,32,36,27,"length"],[39,38,36,27],[39,40,35,31,"records"],[39,47,35,38],[39,54,35,38,"Array"],[39,59,35,38],[39,60,35,38,"_len"],[39,64,35,38],[39,67,35,38,"_key"],[39,71,35,38],[39,77,35,38,"_key"],[39,81,35,38],[39,84,35,38,"_len"],[39,88,35,38],[39,90,35,38,"_key"],[39,94,35,38],[40,8,35,31,"records"],[40,15,35,38],[40,16,35,38,"_key"],[40,20,35,38],[40,24,35,38,"arguments"],[40,33,35,38],[40,34,35,38,"_key"],[40,38,35,38],[41,6,35,38],[42,6,37,4],[42,13,37,11],[42,17,37,15],[42,18,37,16,"__workQueue"],[42,29,37,27],[42,30,37,28,"_db"],[42,33,37,31],[42,34,37,32,"batch"],[42,39,37,37],[42,40,37,38,"records"],[42,47,37,45],[42,48,37,46],[43,4,38,2],[43,5,38,3],[44,4,39,2],[44,11,39,9,"WriterInterfaceImpl"],[44,30,39,28],[45,2,40,0],[45,3,40,1],[45,4,40,2,"ReaderInterfaceImpl"],[45,23,40,21],[45,24,40,22],[46,2,41,0],[46,6,41,4,"actionInterface"],[46,21,41,19],[46,24,41,22],[46,33,41,22,"actionInterface"],[46,34,41,32,"queue"],[46,39,41,37],[46,41,41,39,"item"],[46,45,41,43],[46,47,41,45],[47,4,42,2],[47,11,42,9,"item"],[47,15,42,13],[47,16,42,14,"isWriter"],[47,24,42,22],[47,27,42,25],[47,31,42,29,"WriterInterfaceImpl"],[47,50,42,48],[47,51,42,49,"queue"],[47,56,42,54],[47,58,42,56,"item"],[47,62,42,60],[47,63,42,61],[47,66,42,64],[47,70,42,68,"ReaderInterfaceImpl"],[47,89,42,87],[47,90,42,88,"queue"],[47,95,42,93],[47,97,42,95,"item"],[47,101,42,99],[47,102,42,100],[48,2,43,0],[48,3,43,1],[49,2,44,0],[49,6,44,4,"WorkQueue"],[49,15,44,13],[49,18,44,16,"exports"],[49,25,44,23],[49,26,44,24,"default"],[49,33,44,31],[49,36,44,34],[49,49,44,47],[49,61,44,59],[50,4,45,2],[50,13,45,11,"WorkQueue"],[50,22,45,20,"WorkQueue"],[50,23,45,21,"db"],[50,25,45,23],[50,27,45,25],[51,6,46,4],[51,10,46,8],[51,11,46,9,"_queue"],[51,17,46,15],[51,20,46,18],[51,22,46,20],[52,6,47,4],[52,10,47,8],[52,11,47,9,"_subActionIncoming"],[52,29,47,27],[52,32,47,30],[52,37,47,35],[53,6,48,4],[53,10,48,8],[53,11,48,9,"_db"],[53,14,48,12],[53,17,48,15,"db"],[53,19,48,17],[54,4,49,2],[55,4,50,2],[55,8,50,6,"_proto3"],[55,15,50,13],[55,18,50,16,"WorkQueue"],[55,27,50,25],[55,28,50,26,"prototype"],[55,37,50,35],[56,4,51,2,"_proto3"],[56,11,51,9],[56,12,51,10,"enqueue"],[56,19,51,17],[56,22,51,20],[56,32,51,30,"work"],[56,36,51,34],[56,38,51,36,"description"],[56,49,51,47],[56,51,51,49,"isWriter"],[56,59,51,57],[56,61,51,59],[57,6,52,4],[57,10,52,8,"_this"],[57,15,52,13],[57,18,52,16],[57,22,52,20],[58,6,53,4],[59,6,54,4],[59,10,54,8],[59,14,54,12],[59,15,54,13,"_subActionIncoming"],[59,33,54,31],[59,35,54,33],[60,8,55,6],[60,12,55,10],[60,13,55,11,"_subActionIncoming"],[60,31,55,29],[60,34,55,32],[60,39,55,37],[61,8,56,6],[61,12,56,10,"currentWork"],[61,23,56,21],[61,26,56,24],[61,30,56,28],[61,31,56,29,"_queue"],[61,37,56,35],[61,38,56,36],[61,39,56,37],[61,40,56,38],[62,8,57,6],[62,12,57,10],[62,13,57,11,"currentWork"],[62,24,57,22],[62,25,57,23,"isWriter"],[62,33,57,31],[62,35,57,33],[63,10,58,8],[63,11,58,9],[63,12,58,10],[63,14,58,12,"_common"],[63,21,58,19],[63,22,58,20,"invariant"],[63,31,58,29],[63,33,58,31],[63,34,58,32,"isWriter"],[63,42,58,40],[63,44,58,42],[63,92,58,90],[63,93,58,91],[64,8,59,6],[65,8,60,6],[65,15,60,13,"work"],[65,19,60,17],[65,20,60,18,"actionInterface"],[65,35,60,33],[65,36,60,34],[65,40,60,38],[65,42,60,40,"currentWork"],[65,53,60,51],[65,54,60,52],[65,55,60,53],[66,6,61,4],[67,6,62,4],[67,13,62,11],[67,17,62,15,"Promise"],[67,24,62,22],[67,25,62,23],[67,35,62,33,"resolve"],[67,42,62,40],[67,44,62,42,"reject"],[67,50,62,48],[67,52,62,50],[68,8,63,6],[68,12,63,10,"workItem"],[68,20,63,18],[68,23,63,21],[69,10,64,8,"work"],[69,14,64,12],[69,16,64,14,"work"],[69,20,64,18],[70,10,65,8,"isWriter"],[70,18,65,16],[70,20,65,18,"isWriter"],[70,28,65,26],[71,10,66,8,"resolve"],[71,17,66,15],[71,19,66,17,"resolve"],[71,26,66,24],[72,10,67,8,"reject"],[72,16,67,14],[72,18,67,16,"reject"],[72,24,67,22],[73,10,68,8,"description"],[73,21,68,19],[73,23,68,21,"description"],[74,8,69,6],[74,9,69,7],[75,8,70,6],[75,12,70,10],[75,24,70,22],[75,29,70,27,"process"],[75,36,70,34],[75,37,70,35,"env"],[75,40,70,38],[75,41,70,39,"NODE_ENV"],[75,49,70,47],[75,53,70,51,"_this"],[75,58,70,56],[75,59,70,57,"_queue"],[75,65,70,63],[75,66,70,64,"length"],[75,72,70,70],[75,74,70,72],[76,10,71,8,"setTimeout"],[76,20,71,18],[76,21,71,19],[76,33,71,31],[77,12,72,10],[77,16,72,14,"queue"],[77,21,72,19],[77,24,72,22,"_this"],[77,29,72,27],[77,30,72,28,"_queue"],[77,36,72,34],[78,12,73,10],[78,16,73,14,"current"],[78,23,73,21],[78,26,73,24,"queue"],[78,31,73,29],[78,32,73,30],[78,33,73,31],[78,34,73,32],[79,12,74,10],[79,16,74,14,"current"],[79,23,74,21],[79,28,74,26,"workItem"],[79,36,74,34],[79,40,74,38],[79,41,74,39,"queue"],[79,46,74,44],[79,47,74,45,"includes"],[79,55,74,53],[79,56,74,54,"workItem"],[79,64,74,62],[79,65,74,63],[79,67,74,65],[80,14,75,12],[81,12,76,10],[82,12,77,10],[82,16,77,14,"enqueuedKind"],[82,28,77,26],[82,31,77,29,"isWriter"],[82,39,77,37],[82,42,77,40],[82,50,77,48],[82,53,77,51],[82,61,77,59],[83,12,78,10],[83,16,78,14,"currentKind"],[83,27,78,25],[83,30,78,28,"current"],[83,37,78,35],[83,38,78,36,"isWriter"],[83,46,78,44],[83,49,78,47],[83,57,78,55],[83,60,78,58],[83,68,78,66],[84,12,79,10,"_common"],[84,19,79,17],[84,20,79,18,"logger"],[84,26,79,24],[84,27,79,25,"warn"],[84,31,79,29],[84,32,79,30],[84,38,79,36],[84,39,79,37,"concat"],[84,45,79,43],[84,46,79,44,"enqueuedKind"],[84,58,79,56],[84,60,79,58],[84,85,79,83],[84,86,79,84],[84,87,79,85,"concat"],[84,93,79,91],[84,94,79,92,"description"],[84,105,79,103],[84,109,79,107],[84,118,79,116],[84,120,79,118],[84,166,79,164],[84,167,79,165],[84,168,79,166,"concat"],[84,174,79,172],[84,175,79,173,"queue"],[84,180,79,178],[84,181,79,179,"length"],[84,187,79,185],[84,189,79,187],[84,239,79,237],[84,240,79,238],[84,241,79,239,"concat"],[84,247,79,245],[84,248,79,246,"currentKind"],[84,259,79,257],[84,261,79,259],[84,265,79,263],[84,266,79,264],[84,267,79,265,"concat"],[84,273,79,271],[84,274,79,272,"current"],[84,281,79,279],[84,282,79,280,"description"],[84,293,79,291],[84,297,79,295],[84,306,79,304],[84,308,79,306],[84,486,79,484],[84,487,79,485],[84,488,79,486,"concat"],[84,494,79,492],[84,495,79,493,"currentKind"],[84,506,79,504],[84,508,79,506],[84,664,79,662],[84,665,79,663],[84,666,79,664],[85,12,80,10,"_common"],[85,19,80,17],[85,20,80,18,"logger"],[85,26,80,24],[85,27,80,25,"log"],[85,30,80,28],[85,31,80,29],[85,42,80,40],[85,43,80,41,"concat"],[85,49,80,47],[85,50,80,48,"enqueuedKind"],[85,62,80,60],[85,64,80,62],[85,67,80,65],[85,68,80,66],[85,70,80,68,"work"],[85,74,80,72],[85,75,80,73],[86,12,81,10,"_common"],[86,19,81,17],[86,20,81,18,"logger"],[86,26,81,24],[86,27,81,25,"log"],[86,30,81,28],[86,31,81,29],[86,41,81,39],[86,42,81,40,"concat"],[86,48,81,46],[86,49,81,47,"currentKind"],[86,60,81,58],[86,62,81,60],[86,65,81,63],[86,66,81,64],[86,68,81,66,"current"],[86,75,81,73],[86,76,81,74,"work"],[86,80,81,78],[86,81,81,79],[87,10,82,8],[87,11,82,9],[87,13,82,11],[87,17,82,15],[87,18,82,16],[88,8,83,6],[89,8,84,6,"_this"],[89,13,84,11],[89,14,84,12,"_queue"],[89,20,84,18],[89,21,84,19,"push"],[89,25,84,23],[89,26,84,24,"workItem"],[89,34,84,32],[89,35,84,33],[90,8,85,6],[90,12,85,10],[90,13,85,11],[90,18,85,16,"_this"],[90,23,85,21],[90,24,85,22,"_queue"],[90,30,85,28],[90,31,85,29,"length"],[90,37,85,35],[90,39,85,37],[91,10,86,8,"_this"],[91,15,86,13],[91,16,86,14,"_executeNext"],[91,28,86,26],[91,29,86,27],[91,30,86,28],[92,8,87,6],[93,6,88,4],[93,7,88,5],[93,8,88,6],[94,4,89,2],[94,5,89,3],[95,4,90,2,"_proto3"],[95,11,90,9],[95,12,90,10,"subAction"],[95,21,90,19],[95,24,90,22],[95,34,90,32,"work"],[95,38,90,36],[95,40,90,38],[96,6,91,4],[96,10,91,8],[97,8,92,6],[97,12,92,10],[97,13,92,11,"_subActionIncoming"],[97,31,92,29],[97,34,92,32],[97,38,92,36],[98,8,93,6],[98,12,93,10,"promise"],[98,19,93,17],[98,22,93,20,"work"],[98,26,93,24],[98,27,93,25],[98,28,93,26],[99,8,94,6],[99,9,94,7],[99,10,94,8],[99,12,94,10,"_common"],[99,19,94,17],[99,20,94,18,"invariant"],[99,29,94,27],[99,31,94,29],[99,32,94,30],[99,36,94,34],[99,37,94,35,"_subActionIncoming"],[99,55,94,53],[99,57,94,55],[99,125,94,123],[99,126,94,124],[100,8,95,6],[100,15,95,13,"promise"],[100,22,95,20],[101,6,96,4],[101,7,96,5],[101,8,96,6],[101,15,96,13,"error"],[101,20,96,18],[101,22,96,20],[102,8,97,6],[102,12,97,10],[102,13,97,11,"_subActionIncoming"],[102,31,97,29],[102,34,97,32],[102,39,97,37],[103,8,98,6],[103,15,98,13,"Promise"],[103,22,98,20],[103,23,98,21,"reject"],[103,29,98,27],[103,30,98,28,"error"],[103,35,98,33],[103,36,98,34],[104,6,99,4],[105,4,100,2],[105,5,100,3],[106,4,101,2,"_proto3"],[106,11,101,9],[106,12,101,10,"_executeNext"],[106,24,101,22],[106,27,101,25],[106,39,101,37],[107,6,102,4],[107,13,102,11],[107,17,102,15,"Promise"],[107,24,102,22],[107,25,102,23],[107,35,102,33,"$return"],[107,42,102,40],[107,44,102,42,"$error"],[107,50,102,48],[107,52,102,50],[108,8,103,6],[108,12,103,10,"_this2"],[108,18,103,16],[108,20,103,18,"workItem"],[108,28,103,26],[108,30,103,28,"work"],[108,34,103,32],[108,36,103,34,"resolve"],[108,43,103,41],[108,45,103,43,"reject"],[108,51,103,49],[108,53,103,51,"isWriter"],[108,61,103,59],[108,63,103,61,"workPromise"],[108,74,103,72],[109,8,104,6,"_this2"],[109,14,104,12],[109,17,104,15],[109,21,104,19],[110,8,105,6,"workItem"],[110,16,105,14],[110,19,105,17],[110,23,105,21],[110,24,105,22,"_queue"],[110,30,105,28],[110,31,105,29],[110,32,105,30],[110,33,105,31],[111,8,105,32],[111,12,105,32,"_workItem"],[111,21,105,32],[111,24,111,10,"workItem"],[111,32,111,18],[112,8,107,14,"work"],[112,12,107,18],[112,15,107,18,"_workItem"],[112,24,107,18],[112,25,107,8,"work"],[112,29,107,12],[113,8,108,17,"resolve"],[113,15,108,24],[113,18,108,24,"_workItem"],[113,27,108,24],[113,28,108,8,"resolve"],[113,35,108,15],[114,8,109,16,"reject"],[114,14,109,22],[114,17,109,22,"_workItem"],[114,26,109,22],[114,27,109,8,"reject"],[114,33,109,14],[115,8,110,18,"isWriter"],[115,16,110,26],[115,19,110,26,"_workItem"],[115,28,110,26],[115,29,110,8,"isWriter"],[115,37,110,16],[116,8,112,6],[116,12,112,10,"$Try_2_Post"],[116,23,112,21],[116,26,112,24],[116,38,112,36],[117,10,113,8],[117,14,113,12],[118,12,114,10],[118,16,114,14],[118,17,114,15,"_queue"],[118,23,114,21],[118,24,114,22,"shift"],[118,29,114,27],[118,30,114,28],[118,31,114,29],[119,12,115,10],[119,16,115,14],[119,20,115,18],[119,21,115,19,"_queue"],[119,27,115,25],[119,28,115,26,"length"],[119,34,115,32],[119,36,115,34],[120,14,116,12,"setTimeout"],[120,24,116,22],[120,25,116,23],[120,37,116,35],[121,16,117,14],[121,23,117,21,"_this2"],[121,29,117,27],[121,30,117,28,"_executeNext"],[121,42,117,40],[121,43,117,41],[121,44,117,42],[122,14,118,12],[122,15,118,13],[122,17,118,15],[122,18,118,16],[122,19,118,17],[123,12,119,10],[124,12,120,10],[124,19,120,17,"$return"],[124,26,120,24],[124,27,120,25],[124,28,120,26],[125,10,121,8],[125,11,121,9],[125,12,121,10],[125,19,121,17,"$boundEx"],[125,27,121,25],[125,29,121,27],[126,12,122,10],[126,19,122,17,"$error"],[126,25,122,23],[126,26,122,24,"$boundEx"],[126,34,122,32],[126,35,122,33],[127,10,123,8],[128,8,124,6],[128,9,124,7],[128,10,124,8,"bind"],[128,14,124,12],[128,15,124,13],[128,19,124,17],[128,20,124,18],[129,8,125,6],[129,12,125,10,"$Try_2_Catch"],[129,24,125,22],[129,27,125,25],[129,36,125,34,"$Try_2_Catch"],[129,48,125,46,"$Try_2_Catch"],[129,49,125,47,"error"],[129,54,125,52],[129,56,125,54],[130,10,126,8],[130,14,126,12],[131,12,127,10,"reject"],[131,18,127,16],[131,19,127,17,"error"],[131,24,127,22],[131,25,127,23],[132,12,128,10],[132,19,128,17,"$Try_2_Post"],[132,30,128,28],[132,31,128,29],[132,32,128,30],[133,10,129,8],[133,11,129,9],[133,12,129,10],[133,19,129,17,"$boundEx"],[133,27,129,25],[133,29,129,27],[134,12,130,10],[134,19,130,17,"$error"],[134,25,130,23],[134,26,130,24,"$boundEx"],[134,34,130,32],[134,35,130,33],[135,10,131,8],[136,8,132,6],[136,9,132,7],[137,8,133,6],[137,12,133,10],[138,10,134,8,"workPromise"],[138,21,134,19],[138,24,134,22,"work"],[138,28,134,26],[138,29,134,27,"actionInterface"],[138,44,134,42],[138,45,134,43],[138,49,134,47],[138,51,134,49,"workItem"],[138,59,134,57],[138,60,134,58],[138,61,134,59],[139,10,135,8],[139,14,135,12],[139,26,135,24],[139,31,135,29,"process"],[139,38,135,36],[139,39,135,37,"env"],[139,42,135,40],[139,43,135,41,"NODE_ENV"],[139,51,135,49],[139,53,135,51],[140,12,136,10],[140,13,136,11],[140,14,136,12],[140,16,136,14,"_common"],[140,23,136,21],[140,24,136,22,"invariant"],[140,33,136,31],[140,35,136,33,"workPromise"],[140,46,136,44],[140,58,136,56,"Promise"],[140,65,136,63],[140,67,136,65],[140,101,136,99],[140,102,136,100,"concat"],[140,108,136,106],[140,109,136,107,"isWriter"],[140,117,136,115],[140,120,136,118],[140,127,136,125],[140,130,136,128],[140,136,136,134],[140,138,136,136],[140,166,136,164],[140,167,136,165],[140,168,136,166,"concat"],[140,174,136,172],[140,175,136,173,"isWriter"],[140,183,136,181],[140,186,136,184],[140,194,136,192],[140,197,136,195],[140,205,136,203],[140,207,136,205],[140,286,136,284],[140,287,136,285],[140,288,136,286,"concat"],[140,294,136,292],[140,295,136,293,"workItem"],[140,303,136,301],[140,304,136,302,"description"],[140,315,136,313],[140,319,136,317],[140,328,136,326],[140,330,136,328],[140,333,136,331],[140,334,136,332],[140,335,136,333],[141,10,137,8],[142,10,138,8],[142,17,138,15,"Promise"],[142,24,138,22],[142,25,138,23,"resolve"],[142,32,138,30],[142,33,138,31,"workPromise"],[142,44,138,42],[142,45,138,43],[142,46,138,44,"then"],[142,50,138,48],[142,51,138,49],[142,61,138,59,"$await_3"],[142,69,138,67],[142,71,138,69],[143,12,139,10],[143,16,139,14],[144,14,140,12,"resolve"],[144,21,140,19],[144,22,140,20,"$await_3"],[144,30,140,28],[144,31,140,29],[145,14,141,12],[145,21,141,19,"$Try_2_Post"],[145,32,141,30],[145,33,141,31],[145,34,141,32],[146,12,142,10],[146,13,142,11],[146,14,142,12],[146,21,142,19,"$boundEx"],[146,29,142,27],[146,31,142,29],[147,14,143,12],[147,21,143,19,"$Try_2_Catch"],[147,33,143,31],[147,34,143,32,"$boundEx"],[147,42,143,40],[147,43,143,41],[148,12,144,10],[149,10,145,8],[149,11,145,9],[149,13,145,11,"$Try_2_Catch"],[149,25,145,23],[149,26,145,24],[150,8,146,6],[150,9,146,7],[150,10,146,8],[150,17,146,15,"error"],[150,22,146,20],[150,24,146,22],[151,10,147,8,"$Try_2_Catch"],[151,22,147,20],[151,23,147,21,"error"],[151,28,147,26],[151,29,147,27],[152,8,148,6],[153,6,149,4],[153,7,149,5],[153,8,149,6,"bind"],[153,12,149,10],[153,13,149,11],[153,17,149,15],[153,18,149,16],[153,19,149,17],[154,4,150,2],[154,5,150,3],[155,4,151,2,"_proto3"],[155,11,151,9],[155,12,151,10,"_abortPendingWork"],[155,29,151,27],[155,32,151,30],[155,44,151,42],[156,6,152,4],[156,7,152,5],[156,8,152,6],[156,10,152,8,"_common"],[156,17,152,15],[156,18,152,16,"invariant"],[156,27,152,25],[156,29,152,27],[156,30,152,28],[156,34,152,32],[156,38,152,36],[156,39,152,37,"_queue"],[156,45,152,43],[156,46,152,44,"length"],[156,52,152,50],[156,54,152,52],[156,113,152,111],[156,114,152,112],[157,6,153,4],[157,10,153,8,"workToAbort"],[157,21,153,19],[157,24,153,22],[157,28,153,26],[157,29,153,27,"_queue"],[157,35,153,33],[157,36,153,34,"splice"],[157,42,153,40],[157,43,153,41],[157,44,153,42],[157,45,153,43],[157,46,153,44],[157,47,153,45],[158,6,154,4,"workToAbort"],[158,17,154,15],[158,18,154,16,"forEach"],[158,25,154,23],[158,26,154,24],[158,36,154,24,"_ref"],[158,40,154,24],[158,42,156,7],[159,8,156,7],[159,12,155,14,"reject"],[159,18,155,20],[159,21,155,20,"_ref"],[159,25,155,20],[159,26,155,6,"reject"],[159,32,155,12],[160,8,157,6,"reject"],[160,14,157,12],[160,15,157,13],[160,19,157,17,"Error"],[160,24,157,22],[160,25,157,23],[160,88,157,86],[160,89,157,87],[160,90,157,88],[161,6,158,4],[161,7,158,5],[161,8,158,6],[162,4,159,2],[162,5,159,3],[163,4,160,2],[163,11,160,9],[163,12,160,10],[163,13,160,11],[163,15,160,13,"_createClass2"],[163,28,160,26],[163,29,160,27,"default"],[163,36,160,34],[163,38,160,36,"WorkQueue"],[163,47,160,45],[163,49,160,47],[163,50,160,48],[164,6,161,4,"key"],[164,9,161,7],[164,11,161,9],[164,28,161,26],[165,6,162,4,"get"],[165,9,162,7],[165,11,162,9],[165,20,162,18,"get"],[165,23,162,21,"get"],[165,24,162,21],[165,26,162,24],[166,8,163,6],[166,12,163,6,"_this$_queue"],[166,24,163,6],[166,27,163,6,"_slicedToArray"],[166,41,163,6],[166,42,163,19],[166,46,163,23],[166,47,163,24,"_queue"],[166,53,163,30],[167,10,163,11,"item"],[167,14,163,15],[167,17,163,15,"_this$_queue"],[167,29,163,15],[168,8,164,6],[168,15,164,13,"Boolean"],[168,22,164,20],[168,23,164,21,"item"],[168,27,164,25],[168,31,164,29,"item"],[168,35,164,33],[168,36,164,34,"isWriter"],[168,44,164,42],[168,45,164,43],[169,6,165,4],[170,4,166,2],[170,5,166,3],[170,6,166,4],[170,7,166,5],[171,2,167,0],[171,3,167,1],[171,4,167,2],[171,5,167,3],[172,0,167,4],[172,3]],"functionMap":{"names":["<global>","<anonymous>","ReaderInterfaceImpl","_proto.__validateQueue","_proto.callReader","WriterInterfaceImpl","_proto2.callWriter","_proto2.batch","actionInterface","WorkQueue","_proto3.enqueue","Promise$argument_0","setTimeout$argument_0","_proto3.subAction","_proto3._executeNext","$Try_2_Catch","Promise.resolve.then$argument_0","_proto3._abortPendingWork","workToAbort.forEach$argument_0","get"],"mappings":"AAA;uCCS;ECC;GDG;2BEE;GFE;sBGC;GHG;CDE;uCCC;EIC;GJE;uBKG;GLG;kBMC;GNG;CDE;sBQC;CRE;+CCC;EQC;GRI;oBSE;uBCW;mBCS;SDW;KDM;GTC;sBYC;GZU;yBaC;uBbC;uBWc;aXE;yBcO;OdO;iDeM;SfO;KaI;GbC;8BgBC;wBCG;KDI;GhBC;SkBG;KlBG;CDE"},"hasCjsExports":true},"type":"js/module"}]}